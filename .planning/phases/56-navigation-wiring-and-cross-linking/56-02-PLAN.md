---
phase: 56-navigation-wiring-and-cross-linking
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/newlanding/CTA.tsx
  - src/components/newlanding/FAQ.tsx
  - src/components/pricing/PricingTiers.tsx
  - src/app/sitemap.ts
autonomous: true

must_haves:
  truths:
    - "CTA section 'Contact Sales' button navigates to /contact"
    - "CTA section 'View Pricing' button navigates to /pricing"
    - "FAQ 'Still have questions?' link navigates to /contact with locale prefix"
    - "Pricing enterprise tier CTA button navigates to /contact"
    - "Sitemap includes all static pages and all 7 provider type pages with EN+HE alternates"
  artifacts:
    - path: "src/components/newlanding/CTA.tsx"
      provides: "CTA section with locale-aware Link buttons to /contact and /pricing"
      contains: "Link.*from.*@/i18n/navigation"
    - path: "src/components/newlanding/FAQ.tsx"
      provides: "FAQ contact CTA using locale-aware Link"
      contains: "Link.*from.*@/i18n/navigation"
    - path: "src/components/pricing/PricingTiers.tsx"
      provides: "Enterprise tier CTA linking to /contact via locale-aware Link"
      contains: "Link.*from.*@/i18n/navigation"
    - path: "src/app/sitemap.ts"
      provides: "Sitemap with all pages and i18n alternates"
      contains: "MetadataRoute.Sitemap"
  key_links:
    - from: "src/components/newlanding/CTA.tsx"
      to: "/contact and /pricing"
      via: "Link href from @/i18n/navigation"
      pattern: "Link.*href.*/contact"
    - from: "src/components/newlanding/FAQ.tsx"
      to: "/contact"
      via: "Link href from @/i18n/navigation"
      pattern: "Link.*href.*/contact"
    - from: "src/components/pricing/PricingTiers.tsx"
      to: "/contact"
      via: "Link href for enterprise tier"
      pattern: "Link.*href.*/contact"
    - from: "src/app/sitemap.ts"
      to: "all pages"
      via: "MetadataRoute.Sitemap entries"
      pattern: "alternates.*languages"
---

<objective>
Wire cross-page CTA links and generate the sitemap. Convert CTA section buttons, FAQ "Still have questions?" link, and Pricing enterprise tier button to use locale-aware `Link` from `@/i18n/navigation`. Create `src/app/sitemap.ts` covering all static pages (landing, pricing, contact, privacy, terms, services) and all 7 dynamic provider pages, each with EN+HE alternates.

Purpose: Ensure cross-page CTAs work correctly (NAV-04, NAV-05, NAV-06, NAV-07) and generate SEO sitemap (NAV-08).
Output: Updated CTA.tsx, FAQ.tsx, PricingTiers.tsx, new sitemap.ts.
</objective>

<execution_context>
@/Users/Kohelet/.claude/get-shit-done/workflows/execute-plan.md
@/Users/Kohelet/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/components/newlanding/CTA.tsx
@src/components/newlanding/FAQ.tsx
@src/components/pricing/PricingTiers.tsx
@src/i18n/navigation.ts
@src/i18n/routing.ts
@src/app/[locale]/(main)/services/[type]/page.tsx (for VALID_TYPES constant reference)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Wire CTA, FAQ, and Pricing links to real routes</name>
  <files>
    src/components/newlanding/CTA.tsx
    src/components/newlanding/FAQ.tsx
    src/components/pricing/PricingTiers.tsx
  </files>
  <action>
    **CTA.tsx updates:**

    1. Import `Link` from `@/i18n/navigation`.
    2. Replace the two `<button>` elements (lines 35-40) with `<Link>` components styled as buttons:
       ```tsx
       <Link
         href="/contact"
         className="px-8 py-4 bg-foreground text-background rounded-full font-medium hover:bg-foreground/90 transition-colors w-full sm:w-auto inline-flex items-center justify-center"
       >
         {t("actions.contactSales")}
       </Link>
       <Link
         href="/pricing"
         className="px-8 py-4 bg-transparent border border-border text-foreground rounded-full font-medium hover:bg-foreground/5 transition-colors w-full sm:w-auto inline-flex items-center justify-center"
       >
         {t("actions.viewPricing")}
       </Link>
       ```
       NOTE: Use `Link` directly with className, not `Button asChild > Link`. This preserves the exact existing visual styling (rounded-full, custom padding) without shadcn Button class conflicts.

    **FAQ.tsx updates:**

    1. Import `Link` from `@/i18n/navigation`.
    2. Replace the `<a href="/contact">` (line 141-146) with `<Link href="/contact">`:
       ```tsx
       <Link
         href="/contact"
         className="inline-flex items-center gap-2 px-8 py-4 bg-foreground text-background rounded-full font-medium hover:bg-foreground/90 transition-colors"
       >
         {t("contactCta")}
       </Link>
       ```
       This is a minimal change - same className, just swap `<a>` to `<Link>` and remove the hardcoded `/contact` href (Link handles locale prefix automatically).

    **PricingTiers.tsx updates:**

    1. Import `Link` from `@/i18n/navigation`.
    2. The `<Button>` on line 84-89 currently has no href - it's a plain button with no navigation. Wrap it with Link for the enterprise tier only. Modify the button rendering to conditionally link enterprise tier to /contact:
       ```tsx
       {tier.key === "enterprise" ? (
         <Button
           className="w-full mb-6"
           variant="outline"
           asChild
         >
           <Link href="/contact">{tierT.cta}</Link>
         </Button>
       ) : (
         <Button
           className="w-full mb-6"
           variant={tier.isPopular ? "default" : "outline"}
           asChild
         >
           <Link href="/sign-up">{tierT.cta}</Link>
         </Button>
       )}
       ```
       This ensures:
       - Enterprise "Contact Sales" → /contact
       - Investor "Get Started Free" → /sign-up
       - Provider "Start Free Trial" → /sign-up
       All links are locale-aware via `Link` from `@/i18n/navigation`.
  </action>
  <verify>
    Run `npx next build 2>&1 | tail -20` to confirm no build errors.
    Grep CTA.tsx for `Link.*href.*/contact` and `Link.*href.*/pricing`.
    Grep FAQ.tsx for `Link.*href.*/contact`.
    Grep PricingTiers.tsx for `Link.*href.*/contact`.
    Confirm no `<a href="/contact"` or `<button>` for navigation in CTA.tsx.
  </verify>
  <done>
    CTA "Contact Sales" navigates to /contact. CTA "View Pricing" navigates to /pricing (NAV-04).
    FAQ "Still have questions?" link navigates to /contact with proper locale (NAV-05).
    Pricing enterprise tier CTA navigates to /contact (NAV-06).
    All links use locale-aware Link component (NAV-07).
  </done>
</task>

<task type="auto">
  <name>Task 2: Create sitemap.ts with all pages and i18n alternates</name>
  <files>src/app/sitemap.ts</files>
  <action>
    Create `src/app/sitemap.ts` (at the app root, NOT inside [locale]) using the Next.js built-in sitemap convention.

    The sitemap must:
    1. Use `MetadataRoute.Sitemap` type from next
    2. Cover all static pages: `/` (landing), `/pricing`, `/contact`, `/privacy`, `/terms`, `/services`
    3. Cover all 7 dynamic provider pages: `/services/broker`, `/services/lawyer`, `/services/appraiser`, `/services/mortgage-advisor`, `/services/entrepreneur`, `/services/asset-manager`, `/services/financial-advisor`
    4. Include i18n alternates for each page with both `en` and `he` URLs
    5. Set appropriate priority: landing = 1.0, pricing = 0.9, services index = 0.8, provider pages = 0.7, contact = 0.6, legal = 0.5
    6. Set appropriate changeFrequency: landing/pricing = 'monthly', services = 'weekly', legal = 'yearly', contact = 'monthly'

    Implementation:
    ```typescript
    import type { MetadataRoute } from 'next';

    const BASE_URL = 'https://reos.co';

    const PROVIDER_TYPES = [
      'broker',
      'lawyer',
      'appraiser',
      'mortgage-advisor',
      'entrepreneur',
      'asset-manager',
      'financial-advisor',
    ] as const;

    export default function sitemap(): MetadataRoute.Sitemap {
      const staticPages: {
        path: string;
        changeFrequency: MetadataRoute.Sitemap[number]['changeFrequency'];
        priority: number;
      }[] = [
        { path: '', changeFrequency: 'monthly', priority: 1.0 },
        { path: '/pricing', changeFrequency: 'monthly', priority: 0.9 },
        { path: '/services', changeFrequency: 'weekly', priority: 0.8 },
        { path: '/contact', changeFrequency: 'monthly', priority: 0.6 },
        { path: '/privacy', changeFrequency: 'yearly', priority: 0.5 },
        { path: '/terms', changeFrequency: 'yearly', priority: 0.5 },
      ];

      const staticEntries: MetadataRoute.Sitemap = staticPages.map((page) => ({
        url: `${BASE_URL}/en${page.path}`,
        lastModified: new Date(),
        changeFrequency: page.changeFrequency,
        priority: page.priority,
        alternates: {
          languages: {
            en: `${BASE_URL}/en${page.path}`,
            he: `${BASE_URL}/he${page.path}`,
          },
        },
      }));

      const providerEntries: MetadataRoute.Sitemap = PROVIDER_TYPES.map((type) => ({
        url: `${BASE_URL}/en/services/${type}`,
        lastModified: new Date(),
        changeFrequency: 'weekly' as const,
        priority: 0.7,
        alternates: {
          languages: {
            en: `${BASE_URL}/en/services/${type}`,
            he: `${BASE_URL}/he/services/${type}`,
          },
        },
      }));

      return [...staticEntries, ...providerEntries];
    }
    ```

    IMPORTANT: The sitemap file goes at `src/app/sitemap.ts` (NOT inside `[locale]` folder). Next.js automatically serves it at `/sitemap.xml`.
  </action>
  <verify>
    Run `npx next build 2>&1 | tail -20` to confirm no build errors.
    Check that `src/app/sitemap.ts` exists and contains all 7 provider types.
    Count entries: should be 6 static + 7 provider = 13 total entries, each with en+he alternates.
  </verify>
  <done>
    Sitemap.ts created at src/app/sitemap.ts.
    Covers 6 static pages and 7 dynamic provider pages = 13 entries.
    Each entry has en and he alternates.
    Proper priority and changeFrequency values set.
    Next.js will serve at /sitemap.xml automatically (NAV-08).
  </done>
</task>

</tasks>

<verification>
1. `npx next build` completes without errors
2. CTA section buttons link to /contact and /pricing (not buttons, actual links)
3. FAQ "Still have questions?" links to /contact with locale prefix
4. Pricing enterprise tier CTA links to /contact
5. All CTA/FAQ/Pricing links use `Link` from `@/i18n/navigation`
6. `src/app/sitemap.ts` exists with 13 entries (6 static + 7 provider)
7. Each sitemap entry has en and he alternates
</verification>

<success_criteria>
- CTA section "Contact Sales" links to /contact, "View Pricing" links to /pricing (NAV-04)
- FAQ "Still have questions?" links to /contact (NAV-05)
- Pricing enterprise tier links to /contact (NAV-06)
- All internal links use locale-aware Link component (NAV-07)
- Sitemap covers all new pages with i18n alternates (NAV-08)
- Build passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/56-navigation-wiring-and-cross-linking/56-02-SUMMARY.md`
</output>
