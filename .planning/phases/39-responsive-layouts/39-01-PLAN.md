---
phase: 39-responsive-layouts
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/responsive-dialog.tsx
  - src/components/feed/CreatePostDialog.tsx
  - src/components/feed/FollowListDialog.tsx
  - src/components/feed/RepostDialog.tsx
  - src/components/deals/RequestProviderDialog.tsx
  - src/components/chat/NewConversationDialog.tsx
  - src/components/chat/AddMembersDialog.tsx
  - src/components/chat/ParticipantSelectorDialog.tsx
autonomous: true

must_haves:
  truths:
    - "User on mobile tapping action that opens modal sees it slide up from bottom"
    - "User on desktop sees standard centered dialog"
    - "User can dismiss drawer by swiping down on mobile"
    - "User sees consistent header/footer structure in both modes"
  artifacts:
    - path: "src/components/ui/responsive-dialog.tsx"
      provides: "ResponsiveDialog wrapper with compound components"
      exports: ["ResponsiveDialog", "ResponsiveDialogHeader", "ResponsiveDialogTitle", "ResponsiveDialogDescription", "ResponsiveDialogFooter"]
  key_links:
    - from: "src/components/feed/CreatePostDialog.tsx"
      to: "src/components/ui/responsive-dialog.tsx"
      via: "import ResponsiveDialog"
      pattern: "ResponsiveDialog"
    - from: "src/components/ui/responsive-dialog.tsx"
      to: "src/hooks/use-mobile.ts"
      via: "useIsMobile hook"
      pattern: "useIsMobile"
---

<objective>
Create ResponsiveDialog component and convert all modal dialogs to bottom sheets on mobile.

Purpose: RSP-03 requires modals to display as bottom sheets on mobile for better UX with one-handed use. This creates the wrapper component and converts high-priority dialogs.
Output: ResponsiveDialog component and 7 converted dialogs using it.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/milestones/v1.5-ROADMAP.md
@.planning/phases/39-responsive-layouts/39-RESEARCH.md
@src/components/ui/dialog.tsx
@src/components/ui/drawer.tsx
@src/hooks/use-mobile.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ResponsiveDialog component</name>
  <files>src/components/ui/responsive-dialog.tsx</files>
  <action>
Create a new ResponsiveDialog component that conditionally renders Dialog on desktop and Drawer on mobile.

Implementation:
1. Import useIsMobile from @/hooks/use-mobile
2. Import Dialog components (Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription, DialogFooter)
3. Import Drawer components (Drawer, DrawerContent, DrawerHeader, DrawerTitle, DrawerDescription, DrawerFooter)
4. Create ResponsiveDialog props: open, onOpenChange, children
5. Use useIsMobile() to determine which component to render
6. On mobile: render Drawer with DrawerContent (add max-h-[85vh] for scroll support)
7. On desktop: render Dialog with DialogContent (sm:max-w-lg)
8. Create compound components that adapt:
   - ResponsiveDialogHeader: renders DrawerHeader or DialogHeader
   - ResponsiveDialogTitle: renders DrawerTitle or DialogTitle
   - ResponsiveDialogDescription: renders DrawerDescription or DialogDescription
   - ResponsiveDialogFooter: renders DrawerFooter or DialogFooter
9. Export all components

Pattern from research:
```typescript
export function ResponsiveDialog({ open, onOpenChange, children }: ResponsiveDialogProps) {
  const isMobile = useIsMobile();

  if (isMobile) {
    return (
      <Drawer open={open} onOpenChange={onOpenChange}>
        <DrawerContent className="max-h-[85vh]">
          {children}
        </DrawerContent>
      </Drawer>
    );
  }

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="sm:max-w-lg">
        {children}
      </DialogContent>
    </Dialog>
  );
}
```

Note: Use "use client" directive at top since it uses hooks.
  </action>
  <verify>File exists at src/components/ui/responsive-dialog.tsx with all exports</verify>
  <done>ResponsiveDialog and compound components created and exported</done>
</task>

<task type="auto">
  <name>Task 2: Convert feed dialogs to ResponsiveDialog</name>
  <files>
    src/components/feed/CreatePostDialog.tsx
    src/components/feed/FollowListDialog.tsx
    src/components/feed/RepostDialog.tsx
  </files>
  <action>
Convert three feed dialogs to use ResponsiveDialog:

**CreatePostDialog.tsx:**
1. Replace Dialog import with ResponsiveDialog imports
2. Replace `<Dialog>` with `<ResponsiveDialog>`
3. Remove `<DialogContent className="sm:max-w-lg">` - ResponsiveDialog handles this
4. Replace DialogHeader/Title/Footer with ResponsiveDialog versions
5. Keep all internal content/logic unchanged

**FollowListDialog.tsx:**
1. Same pattern - replace Dialog with ResponsiveDialog
2. Replace compound components with Responsive versions
3. Ensure ScrollArea inside works in both modes

**RepostDialog.tsx:**
1. Same pattern - replace Dialog with ResponsiveDialog
2. Replace compound components with Responsive versions

Import pattern for all:
```typescript
import {
  ResponsiveDialog,
  ResponsiveDialogHeader,
  ResponsiveDialogTitle,
  ResponsiveDialogDescription,
  ResponsiveDialogFooter,
} from "@/components/ui/responsive-dialog";
```
  </action>
  <verify>All three files compile without errors, dialogs still functional</verify>
  <done>CreatePostDialog, FollowListDialog, RepostDialog use ResponsiveDialog</done>
</task>

<task type="auto">
  <name>Task 3: Convert deals and chat dialogs to ResponsiveDialog</name>
  <files>
    src/components/deals/RequestProviderDialog.tsx
    src/components/chat/NewConversationDialog.tsx
    src/components/chat/AddMembersDialog.tsx
    src/components/chat/ParticipantSelectorDialog.tsx
  </files>
  <action>
Convert remaining high-priority dialogs to ResponsiveDialog:

**RequestProviderDialog.tsx:**
1. Replace Dialog with ResponsiveDialog
2. Replace DialogHeader, DialogTitle, DialogDescription, DialogFooter with Responsive versions
3. Provider list scrollable area should work in drawer mode

**NewConversationDialog.tsx:**
1. Same pattern - replace Dialog with ResponsiveDialog
2. Replace compound components

**AddMembersDialog.tsx:**
1. Same pattern - replace Dialog with ResponsiveDialog
2. Replace compound components

**ParticipantSelectorDialog.tsx:**
1. Same pattern - replace Dialog with ResponsiveDialog
2. Replace compound components

For each file:
1. Update imports to use responsive-dialog.tsx
2. Replace Dialog -> ResponsiveDialog
3. Replace DialogContent wrapper removal (ResponsiveDialog handles it internally)
4. Replace DialogHeader -> ResponsiveDialogHeader
5. Replace DialogTitle -> ResponsiveDialogTitle
6. Replace DialogDescription -> ResponsiveDialogDescription (if used)
7. Replace DialogFooter -> ResponsiveDialogFooter

Note: AlertDialogs (LeaveGroupDialog, DeleteGroupDialog) should remain as centered modals - they are intentionally interruptive confirmations.
  </action>
  <verify>All four files compile without errors, dialogs still functional</verify>
  <done>RequestProviderDialog, NewConversationDialog, AddMembersDialog, ParticipantSelectorDialog use ResponsiveDialog</done>
</task>

</tasks>

<verification>
1. Run `npm run build` - no TypeScript errors
2. Test on mobile viewport (Chrome DevTools):
   - Open CreatePostDialog - slides up from bottom
   - Can swipe down to dismiss
   - All content scrollable within drawer
3. Test on desktop viewport:
   - Same dialogs appear as centered modals
   - No visual regressions
</verification>

<success_criteria>
- ResponsiveDialog component exists with all compound components
- 7 dialogs converted to use ResponsiveDialog
- Dialogs render as bottom sheets on mobile (<768px)
- Dialogs render as centered modals on desktop (>=768px)
- No TypeScript errors
- Desktop layouts unchanged (RSP-06)
</success_criteria>

<output>
After completion, create `.planning/phases/39-responsive-layouts/39-01-SUMMARY.md`
</output>
