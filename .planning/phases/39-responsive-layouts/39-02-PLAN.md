---
phase: 39-responsive-layouts
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/[locale]/(app)/properties/page.tsx
  - src/app/[locale]/(app)/properties/saved/page.tsx
  - src/components/properties/NearbyProperties.tsx
  - src/components/properties/PropertyForm.tsx
  - src/components/profile/InvestorProfileForm.tsx
  - src/components/search/PropertyFiltersPanel.tsx
  - src/components/properties/MortgageCalculator.tsx
autonomous: true

must_haves:
  truths:
    - "User on mobile sees property cards stacked full-width (not side-by-side)"
    - "User on mobile sees all form inputs at full width"
    - "User on desktop sees unchanged grid layouts (2-3 columns)"
    - "Property page hides map on mobile and shows full-width cards"
  artifacts:
    - path: "src/app/[locale]/(app)/properties/page.tsx"
      provides: "Mobile-first property grid with hidden map on mobile"
      contains: "grid-cols-1"
  key_links:
    - from: "src/app/[locale]/(app)/properties/page.tsx"
      to: "src/components/properties/PropertyCard.tsx"
      via: "PropertyCard rendering"
      pattern: "PropertyCard"
---

<objective>
Update property card grids and form inputs for mobile-first responsive behavior.

Purpose: RSP-01 requires property cards to stack vertically on mobile. RSP-02 requires form inputs to be full-width on mobile. This plan updates all grid patterns to mobile-first approach.
Output: All property grids and forms render correctly on mobile with full-width items.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/milestones/v1.5-ROADMAP.md
@.planning/phases/39-responsive-layouts/39-RESEARCH.md
@src/app/[locale]/(app)/properties/page.tsx
@src/components/properties/PropertyForm.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update properties page for mobile-first cards</name>
  <files>
    src/app/[locale]/(app)/properties/page.tsx
    src/app/[locale]/(app)/properties/saved/page.tsx
  </files>
  <action>
Update the main properties page and saved properties page for mobile-first layout:

**properties/page.tsx:**

Current layout has split view with cards on left and map on right:
- Cards: `grid grid-cols-1 md:grid-cols-2 gap-4`
- Map: `w-1/2 hidden lg:block flex-shrink-0`

Update to:
1. On mobile (<lg): Full-width cards, no map
2. On lg+: Split view with cards and map (existing behavior)

Changes needed:
- Loading state: Keep `grid grid-cols-1 md:grid-cols-2` (already correct)
- Main content wrapper: Add `lg:flex` to only show split layout on desktop
- Cards container: Keep `flex-1 p-6 overflow-auto`
- Card grid: Already `grid-cols-1 md:grid-cols-2` - but on mobile without map, cards should be truly full-width

The key issue: When map is hidden on mobile, the cards container still takes `flex-1` in a flex parent. Need to ensure cards are full-width on mobile.

Solution: The current implementation already hides map with `hidden lg:block`. The cards will naturally fill the width. Just verify grid is `grid-cols-1` on mobile (no md: needed for mobile-only).

Actually current is correct for mobile since `grid-cols-1` is the base. No changes needed for card stacking.

**saved/page.tsx:**
- Check if grid pattern matches: `grid-cols-1 md:grid-cols-2 gap-4`
- Should be same pattern, verify it's correct

Both files should have:
```tsx
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
```

Wait - the properties page has a different layout than saved. Let me clarify:
- properties/page.tsx: Split view (cards + map)
- properties/saved/page.tsx: Cards only

For properties/page.tsx, the mobile experience should be:
- Hide the map completely (already done with `hidden lg:block`)
- Cards fill full width (already happens since flex-1)
- Grid is single column on mobile (already `grid-cols-1`)

Actually the current implementation is already correct for RSP-01. Just verify no changes break it.

If testing shows issues, the fix would be to ensure the parent flex container doesn't affect card width on mobile.
  </action>
  <verify>Open /properties on mobile viewport - cards are single column, full width</verify>
  <done>Properties pages show full-width cards on mobile</done>
</task>

<task type="auto">
  <name>Task 2: Update NearbyProperties grid</name>
  <files>src/components/properties/NearbyProperties.tsx</files>
  <action>
Update NearbyProperties grid from `grid-cols-2 lg:grid-cols-4` to mobile-first.

Current pattern (from research):
```tsx
<div className="grid grid-cols-2 lg:grid-cols-4 gap-4">
```

This shows 2 columns on mobile which is cramped for property cards.

Change to:
```tsx
<div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
```

This gives:
- Mobile (<640px): 1 column (full-width cards)
- sm-lg (640-1024px): 2 columns
- lg+ (1024px+): 4 columns

Find the grid div and update the className.
  </action>
  <verify>NearbyProperties shows single column on mobile viewport</verify>
  <done>NearbyProperties grid updated to mobile-first</done>
</task>

<task type="auto">
  <name>Task 3: Update form grid patterns</name>
  <files>
    src/components/properties/PropertyForm.tsx
    src/components/profile/InvestorProfileForm.tsx
    src/components/search/PropertyFiltersPanel.tsx
    src/components/properties/MortgageCalculator.tsx
  </files>
  <action>
Update all form grid patterns from `grid-cols-2` to `grid-cols-1 sm:grid-cols-2` for mobile-first full-width inputs.

**PropertyForm.tsx** - Multiple grid patterns to update:
1. Line ~537: `grid-cols-2 gap-4` -> `grid-cols-1 sm:grid-cols-2 gap-4`
2. Line ~622: `grid-cols-2 gap-4` -> `grid-cols-1 sm:grid-cols-2 gap-4`
3. Line ~972: `grid-cols-2 gap-4` -> `grid-cols-1 sm:grid-cols-2 gap-4`

Note: Line ~386 already has `grid-cols-1 lg:grid-cols-2` which is correct.

**InvestorProfileForm.tsx**:
1. Line ~206: `grid-cols-2 gap-4` -> `grid-cols-1 sm:grid-cols-2 gap-4`

Note: Line ~166 already has `grid-cols-1 lg:grid-cols-2` which is correct.

**PropertyFiltersPanel.tsx**:
1. Line ~134: `grid-cols-2 gap-3` -> `grid-cols-1 sm:grid-cols-2 gap-3`

**MortgageCalculator.tsx**:
1. Line ~157: `grid-cols-2 gap-4` -> `grid-cols-1 sm:grid-cols-2 gap-4`

For each file:
1. Search for `grid-cols-2 gap` patterns
2. Change `grid-cols-2` to `grid-cols-1 sm:grid-cols-2`
3. Keep the gap value unchanged

Do NOT change:
- Patterns that already have `grid-cols-1` as base
- Patterns with lg: breakpoints (they're intentionally desktop-only columns)
- Patterns in InvestorSearchBar (already handles mobile via Sheet)
  </action>
  <verify>Form inputs display full-width on mobile viewport</verify>
  <done>All form grids updated to mobile-first pattern</done>
</task>

</tasks>

<verification>
1. Run `npm run build` - no TypeScript errors
2. Test properties page on mobile viewport (Chrome DevTools <640px):
   - Cards are single column, full width
   - Map is hidden
3. Test PropertyForm on mobile viewport:
   - All input pairs stack vertically
   - Each input is full width
4. Test on desktop viewport:
   - Properties page shows split view with map
   - Forms show 2-column layout
   - No visual regressions
</verification>

<success_criteria>
- Property cards stack vertically on mobile (RSP-01)
- All form inputs are full-width on mobile (RSP-02)
- Desktop layouts remain unchanged (RSP-06)
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/39-responsive-layouts/39-02-SUMMARY.md`
</output>
