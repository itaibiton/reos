---
phase: 53-hero-navigation-mobile
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/newlanding/Navigation.tsx
autonomous: true

must_haves:
  truths:
    - "User sees hamburger icon on screens narrower than 768px"
    - "Tapping hamburger opens menu panel that slides in from left within 300ms"
    - "Platform and Solutions sections expand/collapse as accordions when tapped"
    - "All tappable items are at least 44px tall for comfortable touch interaction"
    - "Tapping any menu link or outside the menu closes it"
    - "Log in link is not visible in header below 640px width"
  artifacts:
    - path: "src/components/newlanding/Navigation.tsx"
      provides: "Mobile-responsive navigation with hamburger menu"
      contains: "Sheet"
  key_links:
    - from: "Navigation.tsx"
      to: "@/components/ui/sheet"
      via: "import statement"
      pattern: "import.*Sheet.*from"
    - from: "Navigation.tsx"
      to: "@/components/ui/accordion"
      via: "import statement"
      pattern: "import.*Accordion.*from"
---

<objective>
Add mobile hamburger menu to Navigation with slide-in panel using shadcn/ui Sheet and Accordion components.

Purpose: On mobile devices, the full desktop navigation menu doesn't fit. A hamburger menu with slide-in panel provides familiar mobile navigation UX with proper touch targets and accessibility.

Output: Updated Navigation.tsx with conditional hamburger menu on mobile, Sheet component for slide-in panel, and Accordion for nested Platform/Solutions menus.
</objective>

<execution_context>
@/Users/Kohelet/.claude/get-shit-done/workflows/execute-plan.md
@/Users/Kohelet/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/53-hero-navigation-mobile/53-RESEARCH.md
@src/components/newlanding/Navigation.tsx
@src/components/ui/sheet.tsx
@src/components/ui/accordion.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Mobile Menu Imports and State</name>
  <files>src/components/newlanding/Navigation.tsx</files>
  <action>
Add necessary imports and state for mobile menu:

1. **Verify shadcn components exist** (run before adding imports):
   - Check if `src/components/ui/sheet.tsx` exists. If not, run: `npx shadcn@latest add sheet`
   - Check if `src/components/ui/accordion.tsx` exists. If not, run: `npx shadcn@latest add accordion`
   - Both components already exist in this project, so proceed with imports.

2. **Add imports** at the top of the file:
```typescript
import { Sheet, SheetContent, SheetTrigger, SheetClose, SheetTitle } from "@/components/ui/sheet";
import {
  Accordion,
  AccordionContent,
  AccordionItem,
  AccordionTrigger,
} from "@/components/ui/accordion";
import { X } from "lucide-react";
```

3. **Add state** inside the Navigation component:
```typescript
const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
```

4. **Accessibility for SheetTitle** (use simpler sr-only approach):
   - Use `<SheetTitle className="sr-only">Navigation Menu</SheetTitle>`
   - Do NOT install @radix-ui/react-visually-hidden - sr-only is simpler and already available via Tailwind
  </action>
  <verify>
1. File saves without TypeScript errors
2. Imports resolve correctly - no red squiggles in IDE
3. Verify: `ls src/components/ui/sheet.tsx src/components/ui/accordion.tsx` both exist
  </verify>
  <done>
Mobile menu imports added (Sheet, Accordion, X icon).
mobileMenuOpen state added to component.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Hamburger Trigger and Hide Desktop Nav on Mobile</name>
  <files>src/components/newlanding/Navigation.tsx</files>
  <action>
Add hamburger menu trigger for mobile:

1. **Verify Menu icon import exists**:
   - Check that `Menu` is imported from `lucide-react` (it's already present in the current file)
   - If not present, add to the lucide-react import line

2. **Hide desktop navigation on mobile** (already done with `hidden md:flex`):
   - Verify the desktop nav div has `hidden md:flex` - keep this as-is

3. **Add hamburger menu trigger** (NAV-M01):
   - Location: Add between the desktop nav section (look for div with `hidden md:flex items-center`) and the CTA buttons section (look for div containing "Log in" and "Get Started" buttons)
   - Add this JSX:
```jsx
{/* Mobile Menu Trigger - add this between desktop nav and CTA buttons */}
<div className="md:hidden">
  <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>
    <SheetTrigger asChild>
      <button
        className="min-h-[44px] min-w-[44px] flex items-center justify-center hover:bg-foreground/5 rounded-lg transition-colors"
        aria-label="Open navigation menu"
      >
        <Menu className="h-6 w-6" />
      </button>
    </SheetTrigger>
    {/* SheetContent added in next task */}
  </Sheet>
</div>
```

4. **Update "Log in" link visibility** (NAV-M06):
   - Find the "Log in" link in the header CTA section
   - Ensure it has `hidden sm:block` class (hidden below 640px)

5. **Ensure Get Started button is always visible**:
   - The "Get Started" button should NOT have any hidden classes
  </action>
  <verify>
1. At viewport < 768px: Hamburger icon visible next to Get Started button
2. At viewport < 640px: "Log in" link hidden, only hamburger and Get Started visible
3. At viewport >= 768px: Desktop navigation visible, hamburger hidden
4. Run `npm run build` - no TypeScript errors
  </verify>
  <done>
Hamburger menu trigger visible on mobile (< 768px).
Desktop nav hidden on mobile.
Log in link hidden below 640px.
Get Started button always visible.
  </done>
</task>

<task type="auto">
  <name>Task 3: Implement Sheet Structure with Close Button</name>
  <files>src/components/newlanding/Navigation.tsx</files>
  <action>
Add SheetContent inside the Sheet component from Task 2:

```jsx
<SheetContent side="left" className="w-[300px] sm:w-[350px] px-0 pt-12">
  <SheetTitle className="sr-only">Navigation Menu</SheetTitle>

  {/* Close button */}
  <SheetClose asChild>
    <button
      className="absolute top-4 right-4 min-h-[44px] min-w-[44px] flex items-center justify-center hover:bg-foreground/5 rounded-lg transition-colors"
      aria-label="Close menu"
    >
      <X className="h-5 w-5" />
    </button>
  </SheetClose>

  <div className="flex flex-col h-full">
    {/* Accordion content added in next task */}
    {/* Simple links added in task after that */}
  </div>
</SheetContent>
```

Key implementation details:
- `side="left"` for slide-in from left (NAV-M02)
- `sr-only` class on SheetTitle for accessibility
- Close button has 44px touch target (NAV-M08)
  </action>
  <verify>
1. Click hamburger - Sheet slides in from left smoothly
2. Click X button - Sheet closes
3. Click outside Sheet - Sheet closes (built-in behavior)
  </verify>
  <done>
Sheet slides in from left with close button.
Accessibility title present but visually hidden.
  </done>
</task>

<task type="auto">
  <name>Task 4: Add Platform and Solutions Accordions</name>
  <files>src/components/newlanding/Navigation.tsx</files>
  <action>
Add Accordion component inside the `div.flex.flex-col.h-full` from Task 3:

```jsx
{/* Accordion for Platform and Solutions */}
<Accordion type="single" collapsible className="px-4">
  {/* Platform Accordion */}
  <AccordionItem value="platform" className="border-b-0">
    <AccordionTrigger className="py-4 text-base font-normal hover:no-underline hover:bg-foreground/5 px-2 rounded-lg min-h-[44px]">
      {t("menu.platform")}
    </AccordionTrigger>
    <AccordionContent className="pb-2">
      <div className="flex flex-col gap-1">
        <a
          href="#"
          onClick={() => setMobileMenuOpen(false)}
          className="flex items-center gap-3 px-4 py-3 min-h-[44px] text-sm hover:bg-foreground/5 rounded-lg transition-colors"
        >
          <Building2 className="h-5 w-5 text-muted-foreground" />
          <span>{t("platform.propertyManagement.title")}</span>
        </a>
        <a
          href="#"
          onClick={() => setMobileMenuOpen(false)}
          className="flex items-center gap-3 px-4 py-3 min-h-[44px] text-sm hover:bg-foreground/5 rounded-lg transition-colors"
        >
          <Workflow className="h-5 w-5 text-muted-foreground" />
          <span>{t("platform.automationEngine.title")}</span>
        </a>
        <a
          href="#"
          onClick={() => setMobileMenuOpen(false)}
          className="flex items-center gap-3 px-4 py-3 min-h-[44px] text-sm hover:bg-foreground/5 rounded-lg transition-colors"
        >
          <Shield className="h-5 w-5 text-muted-foreground" />
          <span>{t("platform.enterpriseSecurity.title")}</span>
        </a>
      </div>
    </AccordionContent>
  </AccordionItem>

  {/* Solutions Accordion */}
  <AccordionItem value="solutions" className="border-b-0">
    <AccordionTrigger className="py-4 text-base font-normal hover:no-underline hover:bg-foreground/5 px-2 rounded-lg min-h-[44px]">
      {t("menu.solutions")}
    </AccordionTrigger>
    <AccordionContent className="pb-2">
      <div className="flex flex-col gap-1">
        <a
          href="#"
          onClick={() => setMobileMenuOpen(false)}
          className="flex items-center gap-3 px-4 py-3 min-h-[44px] text-sm hover:bg-foreground/5 rounded-lg transition-colors"
        >
          <Home className="h-5 w-5 text-muted-foreground" />
          <span>{t("solutions.residential.title")}</span>
        </a>
        <a
          href="#"
          onClick={() => setMobileMenuOpen(false)}
          className="flex items-center gap-3 px-4 py-3 min-h-[44px] text-sm hover:bg-foreground/5 rounded-lg transition-colors"
        >
          <Building className="h-5 w-5 text-muted-foreground" />
          <span>{t("solutions.commercial.title")}</span>
        </a>
        <a
          href="#"
          onClick={() => setMobileMenuOpen(false)}
          className="flex items-center gap-3 px-4 py-3 min-h-[44px] text-sm hover:bg-foreground/5 rounded-lg transition-colors"
        >
          <Factory className="h-5 w-5 text-muted-foreground" />
          <span>{t("solutions.industrial.title")}</span>
        </a>
      </div>
    </AccordionContent>
  </AccordionItem>
</Accordion>
```

Key implementation:
- `type="single"` allows only one accordion open at a time
- All links have `onClick={() => setMobileMenuOpen(false)}` (NAV-M09)
- All items have `min-h-[44px]` for touch targets (NAV-M08)
  </action>
  <verify>
1. Platform accordion expands to show 3 links with icons
2. Solutions accordion expands to show 3 links with icons
3. Only one accordion can be open at a time
4. Click any link - menu closes
5. Touch targets feel adequate (44px+)
  </verify>
  <done>
Platform and Solutions are accordion items with nested links.
Icons display correctly for each submenu item.
  </done>
</task>

<task type="auto">
  <name>Task 5: Add Simple Links and Mobile CTAs</name>
  <files>src/components/newlanding/Navigation.tsx</files>
  <action>
Add simple links and bottom CTAs after the Accordion, inside the same flex container:

```jsx
{/* Simple Links */}
<div className="px-4 mt-2 flex flex-col gap-1">
  <a
    href="#"
    onClick={() => setMobileMenuOpen(false)}
    className="px-4 py-3 min-h-[44px] text-base hover:bg-foreground/5 rounded-lg transition-colors flex items-center"
  >
    {t("menu.institutions")}
  </a>
  <a
    href="#"
    onClick={() => setMobileMenuOpen(false)}
    className="px-4 py-3 min-h-[44px] text-base hover:bg-foreground/5 rounded-lg transition-colors flex items-center"
  >
    {t("menu.developers")}
  </a>
</div>

{/* Mobile-only Log In and Get Started at bottom */}
<div className="mt-auto px-4 pb-8 flex flex-col gap-3">
  <a
    href="#"
    onClick={() => setMobileMenuOpen(false)}
    className="px-4 py-3 min-h-[44px] text-base text-center border border-border rounded-full hover:bg-foreground/5 transition-colors"
  >
    {t("actions.login")}
  </a>
  <a
    href="#"
    onClick={() => setMobileMenuOpen(false)}
    className="px-4 py-3 min-h-[44px] text-base text-center bg-foreground text-background rounded-full hover:bg-foreground/90 transition-colors"
  >
    {t("actions.getStarted")}
  </a>
</div>
```

Key implementation:
- Simple links (Institutions, Developers) with 44px touch targets
- Log In and Get Started buttons at bottom with `mt-auto` to push down
- All links close menu on click
  </action>
  <verify>
1. Institutions and Developers links visible and tappable
2. Log In and Get Started buttons at bottom of menu
3. All links close menu when clicked
4. Run `npm run build` - no TypeScript errors
  </verify>
  <done>
Simple menu links for Institutions and Developers.
Mobile CTAs (Log In, Get Started) at bottom of slide-in menu.
All links close menu on tap.
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. Run `npm run build` - ensure no TypeScript errors
2. Run `npm run dev` and test at mobile viewport (< 768px):
   - Hamburger icon visible, click opens menu
   - Menu slides in from left smoothly
   - Platform accordion opens/closes correctly
   - Solutions accordion opens/closes correctly
   - Institutions and Developers links visible
   - All links close menu when clicked
   - Clicking outside menu closes it
   - All touch targets feel adequate
3. Test at 640px:
   - "Log in" link appears in header
4. Test at 768px+:
   - Desktop navigation visible
   - Hamburger menu hidden
</verification>

<success_criteria>
- Hamburger menu visible on mobile (< 768px)
- Menu opens with slide-in animation from left
- Platform/Solutions are accordion items
- All menu items have 44px+ touch targets
- Menu closes on link click
- Menu closes on outside tap
- "Log in" hidden below 640px in header
- "Get Started" always visible in header
- Desktop nav shows at 768px+
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/53-hero-navigation-mobile/53-02-SUMMARY.md`
</output>
