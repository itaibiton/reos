---
phase: 37-mobile-navigation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/navigation.ts
autonomous: true

must_haves:
  truths:
    - "getMobileTabsForRole() returns 5 tabs for investor role"
    - "getMobileTabsForRole() returns 5 tabs for all provider roles"
    - "Each tab has labelKey, href, icon, hugeIcon properties"
    - "Chat tab has showBadge: 'chat' property"
  artifacts:
    - path: "src/lib/navigation.ts"
      provides: "getMobileTabsForRole function with MobileTabItem type"
      exports: ["getMobileTabsForRole", "MobileTabItem"]
  key_links:
    - from: "getMobileTabsForRole"
      to: "existing UserRole type"
      via: "function parameter"
      pattern: "getMobileTabsForRole.*role.*UserRole"
---

<objective>
Add mobile tab navigation configuration to navigation.ts

Purpose: Provide role-specific 5-tab configuration for bottom navigation bar that MobileBottomNav will consume
Output: getMobileTabsForRole() function and MobileTabItem type exported from navigation.ts
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/milestones/v1.5-ROADMAP.md
@.planning/phases/37-mobile-navigation/37-RESEARCH.md
@src/lib/navigation.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add MobileTabItem type and getMobileTabsForRole function</name>
  <files>src/lib/navigation.ts</files>
  <action>
Add to the existing navigation.ts file:

1. Import HugeIcons at top (after lucide imports):
```typescript
import type { IconSvgElement } from "@hugeicons/react";
import {
  Home01Icon,
  Building02Icon,
  News01Icon,
  Message02Icon,
  Agreement01Icon,
  UserIcon,
  UserMultiple02Icon,
} from "@hugeicons/core-free-icons";
```

2. Add MobileTabItem type after existing types (around line 48):
```typescript
// Mobile tab item for bottom navigation
export type MobileTabItem = {
  labelKey: string;           // Translation key (e.g., "navigation.items.chat")
  href: string;
  icon: LucideIcon;           // Lucide icon for compatibility
  hugeIcon: IconSvgElement;   // HugeIcon for mobile display
  showBadge?: "chat" | "notifications"; // Which unread count to show
};
```

3. Add getMobileTabsForRole function at the end of file (after isActivePath):
```typescript
/**
 * Get mobile bottom tab items for a role (exactly 5 tabs)
 *
 * Investor tabs: Properties, Feed, Chat, Deals, Profile
 * Provider tabs: Dashboard, Clients, Chat, Feed, Profile
 *
 * @param role - The user's effective role
 * @returns Array of 5 MobileTabItem for bottom navigation
 */
export function getMobileTabsForRole(role: UserRole): MobileTabItem[] {
  if (role === "investor") {
    return [
      { labelKey: "navigation.items.browseProperties", href: "/properties", icon: Building2, hugeIcon: Building02Icon },
      { labelKey: "navigation.items.feed", href: "/feed", icon: Rss, hugeIcon: News01Icon },
      { labelKey: "navigation.items.chat", href: "/chat", icon: MessageSquare, hugeIcon: Message02Icon, showBadge: "chat" },
      { labelKey: "navigation.items.deals", href: "/deals", icon: Handshake, hugeIcon: Agreement01Icon },
      { labelKey: "navigation.items.profile", href: "/profile/investor", icon: UserCircle, hugeIcon: UserIcon },
    ];
  }

  // All provider roles (broker, mortgage_advisor, lawyer, accountant, notary, tax_consultant, appraiser, admin)
  return [
    { labelKey: "navigation.items.dashboard", href: "/dashboard", icon: Home, hugeIcon: Home01Icon },
    { labelKey: "navigation.items.clients", href: "/clients", icon: Users, hugeIcon: UserMultiple02Icon },
    { labelKey: "navigation.items.chat", href: "/chat", icon: MessageSquare, hugeIcon: Message02Icon, showBadge: "chat" },
    { labelKey: "navigation.items.feed", href: "/feed", icon: Rss, hugeIcon: News01Icon },
    { labelKey: "navigation.items.profile", href: "/profile/provider", icon: UserCircle, hugeIcon: UserIcon },
  ];
}
```

Note: The requirements specify:
- Investors: Properties, Feed, Chat, Deals, Profile (NAV-02)
- Providers: Dashboard, Clients, Chat, Feed, Profile (NAV-03)
  </action>
  <verify>
Run TypeScript check to ensure no type errors:
```bash
npx tsc --noEmit src/lib/navigation.ts
```
Or check the file compiles without errors by running:
```bash
npm run build 2>&1 | head -50
```
  </verify>
  <done>
- MobileTabItem type exported from navigation.ts
- getMobileTabsForRole function exported from navigation.ts
- Function returns exactly 5 tabs for investor role
- Function returns exactly 5 tabs for all other roles (providers)
- Chat tab includes showBadge: "chat" property
- All labelKeys use existing navigation.items.* translation keys
  </done>
</task>

</tasks>

<verification>
- [ ] TypeScript compiles without errors
- [ ] getMobileTabsForRole("investor") returns 5 items
- [ ] getMobileTabsForRole("broker") returns 5 items
- [ ] Each item has labelKey, href, icon, hugeIcon
- [ ] Chat item has showBadge: "chat"
</verification>

<success_criteria>
1. navigation.ts exports new MobileTabItem type
2. navigation.ts exports getMobileTabsForRole function
3. No TypeScript errors
4. Function correctly distinguishes investor vs provider roles
</success_criteria>

<output>
After completion, create `.planning/phases/37-mobile-navigation/37-01-SUMMARY.md`
</output>
