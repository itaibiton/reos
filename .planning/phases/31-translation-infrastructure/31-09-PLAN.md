---
phase: 31-translation-infrastructure
plan: 09
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/questionnaire/steps/BudgetStep.tsx
  - src/components/questionnaire/steps/HorizonStep.tsx
  - src/components/questionnaire/steps/GoalsStep.tsx
  - src/components/questionnaire/steps/YieldStep.tsx
  - src/components/questionnaire/steps/FinancingStep.tsx
  - messages/en.json
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "BudgetStep uses translations for question, description, and input labels"
    - "HorizonStep uses translations for question, description, and all 3 option labels/descriptions"
    - "GoalsStep uses translations for question, description, and all 4 goal options"
    - "YieldStep uses translations for question, description, and all 3 yield options"
    - "FinancingStep uses translations for question, description, and all 3 financing options"
  artifacts:
    - path: "src/components/questionnaire/steps/BudgetStep.tsx"
      provides: "Translated budget step"
      contains: "useTranslations"
    - path: "src/components/questionnaire/steps/HorizonStep.tsx"
      provides: "Translated horizon step"
      contains: "useTranslations"
    - path: "src/components/questionnaire/steps/GoalsStep.tsx"
      provides: "Translated goals step"
      contains: "useTranslations"
    - path: "src/components/questionnaire/steps/YieldStep.tsx"
      provides: "Translated yield step"
      contains: "useTranslations"
    - path: "src/components/questionnaire/steps/FinancingStep.tsx"
      provides: "Translated financing step"
      contains: "useTranslations"
  key_links:
    - from: "BudgetStep.tsx"
      to: "en.json"
      via: "useTranslations('onboarding.questions.budget')"
      pattern: "t\\(.*options"
---

<objective>
Translate second batch of questionnaire step components (budget, horizon, goals, yield, financing).

Purpose: Continue closing the gap where questionnaire steps have hardcoded English strings.
Output: 5 more translated step components using onboarding.questions namespace.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/milestones/v1.4-ROADMAP.md
@.planning/STATE.md
@.planning/phases/31-translation-infrastructure/31-VERIFICATION.md

Reference existing translations pattern (already in en.json):
- onboarding.questions.budget.title, description already exist
- onboarding.questions.horizon.title, description already exist
- etc.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add question option translations to en.json</name>
  <files>messages/en.json</files>
  <action>
Add options sub-keys under the existing onboarding.questions entries:

```json
"budget": {
  "title": "...",  // already exists
  "description": "...",  // already exists
  "options": {
    "minimum": "Minimum Budget (USD)",
    "maximum": "Maximum Budget (USD)",
    "placeholder": {
      "min": "e.g., 100,000",
      "max": "e.g., 500,000"
    }
  }
},
"horizon": {
  "title": "...",
  "description": "...",
  "options": {
    "shortTerm": {
      "label": "Short-term (under 2 years)",
      "description": "Quick flip or short-term rental"
    },
    "mediumTerm": {
      "label": "Medium-term (2-5 years)",
      "description": "Hold for appreciation"
    },
    "longTerm": {
      "label": "Long-term (5+ years)",
      "description": "Long-term wealth building"
    }
  }
},
"goals": {
  "title": "...",
  "description": "...",
  "options": {
    "appreciation": {
      "label": "Capital appreciation",
      "description": "Property value growth over time"
    },
    "rentalIncome": {
      "label": "Rental income",
      "description": "Regular cash flow from tenants"
    },
    "diversification": {
      "label": "Portfolio diversification",
      "description": "Spreading investment risk across asset classes"
    },
    "taxBenefits": {
      "label": "Tax benefits",
      "description": "Tax advantages from real estate ownership"
    }
  }
},
"yield": {
  "title": "...",
  "description": "...",
  "options": {
    "rentalYield": {
      "label": "Rental yield focus",
      "description": "Prioritize cash flow"
    },
    "appreciation": {
      "label": "Appreciation focus",
      "description": "Prioritize value growth"
    },
    "balanced": {
      "label": "Balanced approach",
      "description": "Both matter equally"
    }
  }
},
"financing": {
  "title": "...",
  "description": "...",
  "options": {
    "cash": {
      "label": "All cash",
      "description": "No financing needed"
    },
    "mortgage": {
      "label": "Mortgage/Financing",
      "description": "Will need mortgage advisor"
    },
    "exploring": {
      "label": "Still exploring options",
      "description": "Not sure yet"
    }
  }
}
```
  </action>
  <verify>npm run build passes, no JSON syntax errors</verify>
  <done>en.json has options sub-keys for budget, horizon, goals, yield, financing</done>
</task>

<task type="auto">
  <name>Task 2: Translate BudgetStep, HorizonStep, GoalsStep</name>
  <files>
    src/components/questionnaire/steps/BudgetStep.tsx
    src/components/questionnaire/steps/HorizonStep.tsx
    src/components/questionnaire/steps/GoalsStep.tsx
  </files>
  <action>
Update each step to use useTranslations:

1. Add import: `import { useTranslations } from "next-intl";`

2. Add hook with appropriate namespace:
   - BudgetStep: `const t = useTranslations("onboarding.questions.budget");`
   - HorizonStep: `const t = useTranslations("onboarding.questions.horizon");`
   - GoalsStep: `const t = useTranslations("onboarding.questions.goals");`

3. Replace hardcoded strings:
   - QuestionBubble props: `t("title")`, `t("description")`
   - Input labels: `t("options.minimum")`, `t("options.maximum")`
   - Option labels/descriptions: `t("options.{key}.label")`, `t("options.{key}.description")`

For GoalsStep, remove the inline GOALS array and use translations instead:
```tsx
const GOAL_IDS = ["appreciation", "rental_income", "diversification", "tax_benefits"] as const;

// Convert snake_case DB values to camelCase translation keys
const goalKeyMap: Record<string, string> = {
  appreciation: "appreciation",
  rental_income: "rentalIncome",
  diversification: "diversification",
  tax_benefits: "taxBenefits",
};

// In render:
{GOAL_IDS.map((goalId) => {
  const key = goalKeyMap[goalId];
  return (
    <label key={goalId}>
      <Label>{t(`options.${key}.label`)}</Label>
      <p>{t(`options.${key}.description`)}</p>
    </label>
  );
})}
```
  </action>
  <verify>npm run build passes, components render with translated strings</verify>
  <done>BudgetStep, HorizonStep, GoalsStep all use useTranslations with no hardcoded strings</done>
</task>

<task type="auto">
  <name>Task 3: Translate YieldStep and FinancingStep</name>
  <files>
    src/components/questionnaire/steps/YieldStep.tsx
    src/components/questionnaire/steps/FinancingStep.tsx
  </files>
  <action>
Update each step to use useTranslations following same pattern as Task 2:

1. Add import: `import { useTranslations } from "next-intl";`

2. Add hook:
   - YieldStep: `const t = useTranslations("onboarding.questions.yield");`
   - FinancingStep: `const t = useTranslations("onboarding.questions.financing");`

3. Replace hardcoded strings:
   - QuestionBubble props: `t("title")`, `t("description")`
   - Option labels: `t("options.{key}.label")`
   - Option descriptions: `t("options.{key}.description")`

For YieldStep, map DB values to translation keys:
- rental_yield -> rentalYield
- appreciation -> appreciation (same)
- balanced -> balanced (same)

For FinancingStep, map DB values to translation keys:
- cash -> cash (same)
- mortgage -> mortgage (same)
- exploring -> exploring (same)
  </action>
  <verify>npm run build passes, components render with translated strings</verify>
  <done>YieldStep and FinancingStep use useTranslations with no hardcoded strings</done>
</task>

</tasks>

<verification>
1. Build passes: `npm run build` completes without errors
2. Each modified file imports useTranslations from next-intl
3. Each modified file has zero hardcoded user-facing English strings
4. Translation keys exist in messages/en.json for all used keys
</verification>

<success_criteria>
- 5 questionnaire step components (BudgetStep, HorizonStep, GoalsStep, YieldStep, FinancingStep) use useTranslations
- All question text, descriptions, and option labels come from translation files
- No hardcoded English strings remain in these 5 files
- Build succeeds with no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/31-translation-infrastructure/31-09-SUMMARY.md`
</output>
