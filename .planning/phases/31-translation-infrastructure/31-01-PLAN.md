---
phase: 31-translation-infrastructure
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - messages/en.json
  - src/lib/constants.ts
autonomous: true

must_haves:
  truths:
    - "Common translation keys available for all components"
    - "Shared UI strings (buttons, labels, statuses) have translation keys"
    - "Constants file uses labelKey pattern instead of hardcoded labels"
  artifacts:
    - path: "messages/en.json"
      provides: "common namespace with shared translations"
      contains: '"common":'
  key_links:
    - from: "messages/en.json"
      to: "src/lib/constants.ts"
      via: "labelKey references to common.* keys"
      pattern: "common\\."
---

<objective>
Create translation file structure and common namespace with all shared strings.

Purpose: Establish foundational translations that other namespaces depend on (buttons, labels, statuses, property types, roles, amenities).

Output: Extended messages/en.json with common namespace, updated constants.ts with labelKey pattern.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/milestones/v1.4-ROADMAP.md
@.planning/phases/31-translation-infrastructure/31-RESEARCH.md
@messages/en.json
@src/lib/constants.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add common namespace to en.json</name>
  <files>messages/en.json</files>
  <action>
Add a `common` namespace to messages/en.json with these categories:

**actions** - Shared button/action labels:
- save, cancel, edit, delete, create, update, submit, close
- confirm, back, next, previous, search, clear, apply, reset
- viewAll, viewDetails, showMore, showLess, loadMore

**status** - Status indicators:
- loading, error, success, pending, active, inactive
- available, unavailable, completed, cancelled

**labels** - Form labels:
- email, phone, name, firstName, lastName, password
- address, city, country, description, title, date, time

**empty** - Empty state messages:
- noResults, noData, noItems, notFound

**errors** - Error messages:
- required, invalid, tooShort, tooLong, generic

**confirm** - Confirmation dialogs:
- areYouSure, deleteConfirm, cancelConfirm

**propertyTypes** - From constants.ts:
- residential, commercial, mixedUse, land

**propertyStatus** - From constants.ts:
- available, pending, sold

**roles** - User roles:
- investor, broker, mortgageAdvisor, lawyer, accountant, notary, taxConsultant, appraiser, admin

**amenities** - Property amenities (from constants.ts PROPERTY_AMENITIES):
- airConditioning, elevator, parking, storage, balcony, security, gym, pool, garden, renovated, furnished, petFriendly, accessible, safeRoom, solar

**riskTolerance** - From constants.ts:
- conservative, moderate, aggressive (with descriptions)

**investmentTimeline** - From constants.ts:
- shortTerm, mediumTerm, longTerm (with descriptions)

**languages** - From constants.ts:
- english, hebrew, russian, french, spanish

**contactPreferences** - From constants.ts:
- email, phone, whatsapp

**units** - Measurement units:
- sqm, bedrooms, bathrooms, floors

Keep existing `landing` namespace intact. Use nested structure for organization.
  </action>
  <verify>
Run: `node -e "const m = require('./messages/en.json'); console.log(Object.keys(m.common).join(', '))"`
Should output: actions, status, labels, empty, errors, confirm, propertyTypes, propertyStatus, roles, amenities, riskTolerance, investmentTimeline, languages, contactPreferences, units
  </verify>
  <done>messages/en.json has common namespace with all shared translation keys</done>
</task>

<task type="auto">
  <name>Task 2: Update constants.ts with labelKey pattern</name>
  <files>src/lib/constants.ts</files>
  <action>
Update src/lib/constants.ts to use translation keys instead of hardcoded labels.

Pattern change for each constant array:
```typescript
// BEFORE:
{ value: "residential", label: "Residential" }

// AFTER:
{ value: "residential", labelKey: "common.propertyTypes.residential" }
```

Apply to:
1. PROPERTY_TYPES - use common.propertyTypes.*
2. RISK_TOLERANCE_OPTIONS - use common.riskTolerance.* (add descriptionKey too)
3. INVESTMENT_TIMELINE_OPTIONS - use common.investmentTimeline.*
4. BROKER_SPECIALIZATIONS - use common.specializations.broker.*
5. MORTGAGE_ADVISOR_SPECIALIZATIONS - use common.specializations.mortgageAdvisor.*
6. LAWYER_SPECIALIZATIONS - use common.specializations.lawyer.*
7. LANGUAGE_OPTIONS - use common.languages.*
8. CONTACT_PREFERENCE_OPTIONS - use common.contactPreferences.*
9. PROPERTY_STATUS - use common.propertyStatus.*
10. PROPERTY_AMENITIES - use common.amenities.*
11. USER_ROLES - use common.roles.*

Keep `value` and `icon` fields unchanged. Only replace `label` with `labelKey` and `description` with `descriptionKey`.

Add specializations to common namespace in en.json (for broker, mortgageAdvisor, lawyer specializations).
  </action>
  <verify>
Run: `grep -c "labelKey" src/lib/constants.ts`
Should be > 40 (one per constant entry)

Run: `grep -c "\"label\":" src/lib/constants.ts`
Should be 0 (no hardcoded labels remain)
  </verify>
  <done>All constant arrays use labelKey pattern pointing to common.* translation keys</done>
</task>

<task type="auto">
  <name>Task 3: Add specializations to common namespace</name>
  <files>messages/en.json</files>
  <action>
Add specializations section to common namespace in messages/en.json:

```json
"specializations": {
  "broker": {
    "residential": "Residential",
    "commercial": "Commercial",
    "luxury": "Luxury Properties",
    "newConstruction": "New Construction",
    "investment": "Investment Properties"
  },
  "mortgageAdvisor": {
    "firstTimeBuyers": "First Time Buyers",
    "refinancing": "Refinancing",
    "investmentProperties": "Investment Properties",
    "foreignNationals": "Foreign Nationals"
  },
  "lawyer": {
    "realEstateTransactions": "Real Estate Transactions",
    "contracts": "Contract Review",
    "dueDiligence": "Due Diligence",
    "taxPlanning": "Tax Planning"
  }
}
```

Ensure values match the original labels from constants.ts exactly.
  </action>
  <verify>
Run: `node -e "const m = require('./messages/en.json'); console.log(Object.keys(m.common.specializations).join(', '))"`
Should output: broker, mortgageAdvisor, lawyer
  </verify>
  <done>Specializations added to common namespace for all provider types</done>
</task>

</tasks>

<verification>
1. messages/en.json parses without error: `node -e "require('./messages/en.json')"`
2. common namespace has all expected categories
3. constants.ts has no hardcoded label strings
4. labelKey values match actual keys in messages/en.json
</verification>

<success_criteria>
1. common namespace exists with 15+ categories of shared strings
2. All constants in constants.ts use labelKey pattern
3. Zero hardcoded label strings remain in constants.ts
4. Translation keys are properly nested and organized
</success_criteria>

<output>
After completion, create `.planning/phases/31-translation-infrastructure/31-01-SUMMARY.md`
</output>
