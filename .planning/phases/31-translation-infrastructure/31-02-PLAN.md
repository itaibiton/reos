---
phase: 31-translation-infrastructure
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - messages/en.json
  - src/lib/navigation.ts
  - src/components/layout/AppShell.tsx
autonomous: true

must_haves:
  truths:
    - "Sidebar navigation shows translated labels"
    - "Navigation items use useTranslations hook"
    - "All 9 role navigation configs use translation keys"
  artifacts:
    - path: "messages/en.json"
      provides: "navigation namespace"
      contains: '"navigation":'
    - path: "src/lib/navigation.ts"
      provides: "labelKey in NavItem type"
      contains: "labelKey"
  key_links:
    - from: "src/components/layout/AppShell.tsx"
      to: "messages/en.json"
      via: "useTranslations('navigation')"
      pattern: "useTranslations.*navigation"
---

<objective>
Add navigation namespace and convert sidebar navigation to use translations.

Purpose: High-visibility navigation items appear on every page - translating them provides immediate user-facing i18n impact.

Output: navigation namespace in en.json, updated navigation.ts with labelKey, AppShell using useTranslations.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/milestones/v1.4-ROADMAP.md
@.planning/phases/31-translation-infrastructure/31-RESEARCH.md
@messages/en.json
@src/lib/navigation.ts
@src/components/layout/AppShell.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add navigation namespace to en.json</name>
  <files>messages/en.json</files>
  <action>
Add a `navigation` namespace to messages/en.json with all sidebar navigation labels.

Structure based on src/lib/navigation.ts analysis:

```json
"navigation": {
  "groups": {
    "marketplace": "Marketplace",
    "propertyManagement": "Property Management",
    "mortgageRequests": "Mortgage Requests",
    "legalServices": "Legal Services",
    "accountingServices": "Accounting Services",
    "notarizationServices": "Notarization Services",
    "taxServices": "Tax Services",
    "appraisalServices": "Appraisal Services"
  },
  "items": {
    "dashboard": "Dashboard",
    "analytics": "Analytics",
    "browseProperties": "Browse Properties",
    "savedProperties": "Saved Properties",
    "yourListings": "Your Listings",
    "findProviders": "Find Providers",
    "deals": "Deals",
    "propertyTours": "Property Tours",
    "leadManagement": "Lead Management",
    "newApplications": "New Applications",
    "preApprovals": "Pre-approvals",
    "financingDeals": "Financing Deals",
    "consultationRequests": "Consultation Requests",
    "contractReviews": "Contract Reviews",
    "transactionDocuments": "Transaction Documents",
    "financialAnalysis": "Financial Analysis",
    "taxPlanning": "Tax Planning",
    "notarizationRequests": "Notarization Requests",
    "documentSignings": "Document Signings",
    "transactionNotarizations": "Transaction Notarizations",
    "taxFilingRequests": "Tax Filing Requests",
    "appraisalRequests": "Appraisal Requests",
    "propertyValuations": "Property Valuations",
    "valuationReports": "Valuation Reports",
    "clients": "Clients",
    "feed": "Feed",
    "chat": "Chat",
    "profile": "Profile",
    "settings": "Settings"
  }
}
```

Keep existing namespaces (landing, common) intact.
  </action>
  <verify>
Run: `node -e "const m = require('./messages/en.json'); console.log(Object.keys(m.navigation).join(', '))"`
Should output: groups, items
  </verify>
  <done>navigation namespace added to messages/en.json with all sidebar labels</done>
</task>

<task type="auto">
  <name>Task 2: Update navigation.ts to use labelKey</name>
  <files>src/lib/navigation.ts</files>
  <action>
Update src/lib/navigation.ts to use translation keys instead of hardcoded labels.

1. Update NavItem type:
```typescript
export type NavItem = {
  labelKey: string;  // Changed from label: string
  href: string;
  icon: LucideIcon;
  items?: NavItem[];
};
```

2. Update NavGroup type:
```typescript
export type NavGroup = {
  labelKey?: string;  // Changed from label?: string
  items: NavItem[];
};
```

3. Update all navigation configs to use labelKey:

For items, use `navigation.items.*` keys:
```typescript
{ labelKey: "navigation.items.dashboard", href: "/dashboard", icon: Home }
{ labelKey: "navigation.items.browseProperties", href: "/properties", icon: Building2 }
// etc.
```

For groups, use `navigation.groups.*` keys:
```typescript
{ labelKey: "navigation.groups.marketplace", items: [...] }
{ labelKey: "navigation.groups.propertyManagement", items: [...] }
// etc.
```

Apply this pattern to ALL 9 role navigation configs:
- investorNavigation
- brokerNavigation
- mortgageAdvisorNavigation
- lawyerNavigation
- accountantNavigation
- notaryNavigation
- taxConsultantNavigation
- appraiserNavigation
- adminNavigation

Keep href, icon, and items structure unchanged.
  </action>
  <verify>
Run: `grep -c "labelKey" src/lib/navigation.ts`
Should be > 80 (many nav items across 9 role configs)

Run: `grep -c "label:" src/lib/navigation.ts | grep -v "labelKey"`
Should be 0 (no hardcoded label strings, only labelKey)
  </verify>
  <done>All navigation configs use labelKey pattern pointing to navigation.* keys</done>
</task>

<task type="auto">
  <name>Task 3: Update AppShell to use useTranslations</name>
  <files>src/components/layout/AppShell.tsx</files>
  <action>
Update src/components/layout/AppShell.tsx to translate navigation labels.

1. Add import:
```typescript
import { useTranslations } from "next-intl";
```

2. In the component, get the translator:
```typescript
const t = useTranslations();
```

3. Where navigation items are rendered, use t() to translate:
```typescript
// For nav items:
{t(item.labelKey)}

// For group labels:
{group.labelKey && t(group.labelKey)}
```

Look for places where `item.label` or `group.label` is rendered and replace with `t(item.labelKey)` or `t(group.labelKey)`.

The pattern should work because labelKey contains the full path like "navigation.items.dashboard".
  </action>
  <verify>
Run: `grep -c "useTranslations" src/components/layout/AppShell.tsx`
Should be >= 1

Run: `grep "t(item.labelKey)" src/components/layout/AppShell.tsx`
Should find matches where nav items are rendered
  </verify>
  <done>AppShell uses useTranslations to render navigation labels</done>
</task>

</tasks>

<verification>
1. messages/en.json parses without error
2. navigation namespace has groups and items sections
3. navigation.ts compiles without TypeScript errors
4. AppShell renders navigation items using translations
5. Dev server shows no missing translation warnings
</verification>

<success_criteria>
1. navigation namespace exists with groups and items
2. All 9 role navigation configs use labelKey
3. AppShell uses useTranslations for sidebar labels
4. Zero hardcoded navigation strings remain
</success_criteria>

<output>
After completion, create `.planning/phases/31-translation-infrastructure/31-02-SUMMARY.md`
</output>
