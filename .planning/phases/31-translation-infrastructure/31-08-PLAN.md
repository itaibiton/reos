---
phase: 31-translation-infrastructure
plan: 08
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/questionnaire/steps/CitizenshipStep.tsx
  - src/components/questionnaire/steps/ResidencyStep.tsx
  - src/components/questionnaire/steps/ExperienceStep.tsx
  - src/components/questionnaire/steps/OwnershipStep.tsx
  - src/components/questionnaire/steps/InvestmentTypeStep.tsx
  - messages/en.json
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "CitizenshipStep uses translations for question, description, and all options"
    - "ResidencyStep uses translations for question, description, and all 4 option labels/descriptions"
    - "ExperienceStep uses translations for question, description, and all options"
    - "OwnershipStep uses translations for question, description, and boolean options"
    - "InvestmentTypeStep uses translations for question, description, and all options"
  artifacts:
    - path: "src/components/questionnaire/steps/CitizenshipStep.tsx"
      provides: "Translated citizenship step"
      contains: "useTranslations"
    - path: "src/components/questionnaire/steps/ResidencyStep.tsx"
      provides: "Translated residency step"
      contains: "useTranslations"
    - path: "src/components/questionnaire/steps/ExperienceStep.tsx"
      provides: "Translated experience step"
      contains: "useTranslations"
    - path: "src/components/questionnaire/steps/OwnershipStep.tsx"
      provides: "Translated ownership step"
      contains: "useTranslations"
    - path: "src/components/questionnaire/steps/InvestmentTypeStep.tsx"
      provides: "Translated investment type step"
      contains: "useTranslations"
    - path: "messages/en.json"
      provides: "Question option translations"
      contains: "onboarding.questions"
  key_links:
    - from: "CitizenshipStep.tsx"
      to: "en.json"
      via: "useTranslations('onboarding.questions.citizenship')"
      pattern: "t\\(.*options"
---

<objective>
Translate first batch of questionnaire step components (citizenship, residency, experience, ownership, investment type).

Purpose: Close gap where 15 questionnaire steps have hardcoded English strings, blocking full i18n for investor onboarding flow.
Output: 5 translated step components using onboarding.questions namespace.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/milestones/v1.4-ROADMAP.md
@.planning/STATE.md
@.planning/phases/31-translation-infrastructure/31-VERIFICATION.md

Reference existing translated step pattern:
@src/components/questionnaire/steps/AmenitiesStep.tsx (uses useTranslations)
@src/components/questionnaire/steps/PropertyTypeStep.tsx (uses useTranslations)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add question option translations to en.json</name>
  <files>messages/en.json</files>
  <action>
Add option translations under onboarding.questions namespace. The question title/description already exist in en.json (onboarding.questions.citizenship, etc.). Add options sub-keys for each:

```json
"citizenship": {
  "title": "...",  // already exists
  "description": "...",  // already exists
  "options": {
    "israeli": "Yes, I am an Israeli citizen",
    "nonIsraeli": "No, I am not an Israeli citizen"
  }
},
"residency": {
  "title": "...",
  "description": "...",
  "options": {
    "resident": {
      "label": "Israeli resident",
      "description": "I live in Israel full-time"
    },
    "returningResident": {
      "label": "Returning resident (Toshav Chozer)",
      "description": "Planning to return or returned within the last 10 years"
    },
    "nonResident": {
      "label": "Non-resident",
      "description": "I do not live in Israel"
    },
    "unsure": {
      "label": "I'm not sure",
      "description": "I need guidance on this"
    }
  }
},
"experience": {
  "title": "...",
  "description": "...",
  "options": {
    "none": {
      "label": "No experience",
      "description": "This would be my first property investment"
    },
    "some": {
      "label": "Some experience",
      "description": "I've invested in 1-2 properties"
    },
    "experienced": {
      "label": "Experienced",
      "description": "I've invested in 3+ properties"
    }
  }
},
"ownsProperty": {
  "title": "...",
  "description": "...",
  "options": {
    "yes": "Yes, I own property in Israel",
    "no": "No, I don't own property in Israel"
  }
},
"investmentType": {
  "title": "...",
  "description": "...",
  "options": {
    "rental": {
      "label": "Rental investment",
      "description": "Properties to rent out for income"
    },
    "flip": {
      "label": "Fix and flip",
      "description": "Properties to renovate and sell"
    },
    "longTerm": {
      "label": "Long-term appreciation",
      "description": "Properties to hold for value growth"
    },
    "mixed": {
      "label": "Mixed strategy",
      "description": "Combination of approaches"
    }
  }
}
```

Check existing step component code to ensure option values match DB values.
  </action>
  <verify>npm run build passes, no TypeScript errors</verify>
  <done>en.json has options sub-keys for citizenship, residency, experience, ownsProperty, investmentType</done>
</task>

<task type="auto">
  <name>Task 2: Translate CitizenshipStep, ResidencyStep, ExperienceStep</name>
  <files>
    src/components/questionnaire/steps/CitizenshipStep.tsx
    src/components/questionnaire/steps/ResidencyStep.tsx
    src/components/questionnaire/steps/ExperienceStep.tsx
  </files>
  <action>
Update each step to use useTranslations:

1. Add import: `import { useTranslations } from "next-intl";`

2. Add hook: `const t = useTranslations("onboarding.questions.{stepName}");`

3. Replace hardcoded strings:
   - QuestionBubble question prop: `t("title")`
   - QuestionBubble description prop: `t("description")`
   - Option labels: `t("options.{optionKey}.label")` or `t("options.{optionKey}")` for simple options
   - Option descriptions (if present): `t("options.{optionKey}.description")`

Pattern to follow (from PropertyTypeStep.tsx):
```tsx
const t = useTranslations("onboarding.questions.citizenship");

<QuestionBubble
  question={t("title")}
  description={t("description")}
  onTypingComplete={handleTypingComplete}
/>

<Label>
  {t("options.israeli")}
</Label>
```

For ResidencyStep and ExperienceStep which have label+description options, use:
```tsx
<Label>{t("options.resident.label")}</Label>
<p className="text-sm text-muted-foreground">{t("options.resident.description")}</p>
```
  </action>
  <verify>npm run build passes, components render with translated strings</verify>
  <done>CitizenshipStep, ResidencyStep, ExperienceStep all use useTranslations with no hardcoded strings</done>
</task>

<task type="auto">
  <name>Task 3: Translate OwnershipStep and InvestmentTypeStep</name>
  <files>
    src/components/questionnaire/steps/OwnershipStep.tsx
    src/components/questionnaire/steps/InvestmentTypeStep.tsx
  </files>
  <action>
Update each step to use useTranslations following same pattern as Task 2:

1. Add import: `import { useTranslations } from "next-intl";`

2. Add hook with appropriate namespace:
   - OwnershipStep: `const t = useTranslations("onboarding.questions.ownsProperty");`
   - InvestmentTypeStep: `const t = useTranslations("onboarding.questions.investmentType");`

3. Replace hardcoded strings:
   - QuestionBubble props: `t("title")`, `t("description")`
   - Option labels and descriptions from t("options.{key}")

For OwnershipStep (boolean values stored as true/false, display as yes/no):
```tsx
<Label>{t("options.yes")}</Label>  // for value={true}
<Label>{t("options.no")}</Label>   // for value={false}
```

For InvestmentTypeStep (has label+description options like residency):
```tsx
<Label>{t("options.rental.label")}</Label>
<p className="text-sm text-muted-foreground">{t("options.rental.description")}</p>
```
  </action>
  <verify>npm run build passes, components render with translated strings</verify>
  <done>OwnershipStep and InvestmentTypeStep use useTranslations with no hardcoded strings</done>
</task>

</tasks>

<verification>
1. Build passes: `npm run build` completes without errors
2. Each modified file imports useTranslations from next-intl
3. Each modified file has zero hardcoded user-facing English strings
4. Translation keys exist in messages/en.json for all used keys
</verification>

<success_criteria>
- 5 questionnaire step components (CitizenshipStep, ResidencyStep, ExperienceStep, OwnershipStep, InvestmentTypeStep) use useTranslations
- All question text, descriptions, and option labels come from translation files
- No hardcoded English strings remain in these 5 files
- Build succeeds with no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/31-translation-infrastructure/31-08-SUMMARY.md`
</output>
