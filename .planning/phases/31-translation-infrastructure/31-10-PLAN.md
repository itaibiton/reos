---
phase: 31-translation-infrastructure
plan: 10
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/questionnaire/steps/PropertySizeStep.tsx
  - src/components/questionnaire/steps/LocationStep.tsx
  - src/components/questionnaire/steps/TimelineStep.tsx
  - src/components/questionnaire/steps/AdditionalPreferencesStep.tsx
  - src/components/questionnaire/steps/ServicesStep.tsx
  - messages/en.json
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "PropertySizeStep uses translations for question, description, and input labels"
    - "LocationStep uses translations for question, description, and city names"
    - "TimelineStep uses translations for question, description, and all 4 timeline options"
    - "AdditionalPreferencesStep uses translations for question, description, placeholder, and char count"
    - "ServicesStep uses translations for question, description, and all service options"
  artifacts:
    - path: "src/components/questionnaire/steps/PropertySizeStep.tsx"
      provides: "Translated property size step"
      contains: "useTranslations"
    - path: "src/components/questionnaire/steps/LocationStep.tsx"
      provides: "Translated location step"
      contains: "useTranslations"
    - path: "src/components/questionnaire/steps/TimelineStep.tsx"
      provides: "Translated timeline step"
      contains: "useTranslations"
    - path: "src/components/questionnaire/steps/AdditionalPreferencesStep.tsx"
      provides: "Translated additional preferences step"
      contains: "useTranslations"
    - path: "src/components/questionnaire/steps/ServicesStep.tsx"
      provides: "Translated services step"
      contains: "useTranslations"
  key_links:
    - from: "LocationStep.tsx"
      to: "en.json"
      via: "useTranslations('onboarding.questions.locations')"
      pattern: "t\\(.*options"
---

<objective>
Translate final batch of questionnaire step components (property size, location, timeline, additional preferences, services).

Purpose: Complete the questionnaire translation gap closure - all 15 non-translated steps will be translated after this plan.
Output: Final 5 translated step components using onboarding.questions namespace.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/milestones/v1.4-ROADMAP.md
@.planning/STATE.md
@.planning/phases/31-translation-infrastructure/31-VERIFICATION.md

Note: onboarding.questions.propertySize, locations, timeline, additional, services already have title/description in en.json
Note: common.roles already has broker, mortgageAdvisor, lawyer for ServicesStep
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add question option translations to en.json</name>
  <files>messages/en.json</files>
  <action>
Add options sub-keys under the existing onboarding.questions entries:

```json
"propertySize": {
  "title": "...",  // already exists
  "description": "...",  // already exists
  "options": {
    "bedrooms": "Bedrooms",
    "area": "Area (sqm)",
    "minimum": "Minimum",
    "maximum": "Maximum",
    "placeholder": {
      "minBedrooms": "e.g., 2",
      "maxBedrooms": "e.g., 5",
      "minArea": "e.g., 80",
      "maxArea": "e.g., 200"
    }
  }
},
"locations": {
  "title": "...",
  "description": "...",
  "cities": {
    "Tel Aviv": "Tel Aviv",
    "Jerusalem": "Jerusalem",
    "Haifa": "Haifa",
    "Netanya": "Netanya",
    "Herzliya": "Herzliya",
    "Ramat Gan": "Ramat Gan",
    "Rishon LeZion": "Rishon LeZion",
    "Petah Tikva": "Petah Tikva",
    "Ashdod": "Ashdod",
    "Beer Sheva": "Beer Sheva",
    "Eilat": "Eilat",
    "Rehovot": "Rehovot",
    "Kfar Saba": "Kfar Saba",
    "Ashkelon": "Ashkelon",
    "Bat Yam": "Bat Yam"
  }
},
"timeline": {
  "title": "...",
  "description": "...",
  "options": {
    "3months": {
      "label": "Within 3 months",
      "description": "Ready to move quickly on the right property"
    },
    "6months": {
      "label": "Within 6 months",
      "description": "Actively searching and comparing options"
    },
    "1year": {
      "label": "Within 1 year",
      "description": "Planning ahead for the right opportunity"
    },
    "exploring": {
      "label": "Just exploring",
      "description": "Learning about the market, no timeline yet"
    }
  }
},
"additional": {
  "title": "...",  // already exists
  "description": "...",  // already exists
  "placeholder": "...",  // already exists
  "charCount": "..."  // already exists - uses {count}/{max} characters format
},
"services": {
  "title": "...",
  "description": "...",
  "options": {
    "broker": {
      "label": "Broker",
      "description": "Help finding and negotiating properties"
    },
    "mortgageAdvisor": {
      "label": "Mortgage advisor",
      "description": "Help with financing options"
    },
    "lawyer": {
      "label": "Lawyer",
      "description": "Legal assistance for purchase"
    }
  }
}
```

Note: The additional step already has translations for title, description, placeholder, charCount - just needs to wire them up.
  </action>
  <verify>npm run build passes, no JSON syntax errors</verify>
  <done>en.json has options sub-keys for propertySize, locations, timeline, services</done>
</task>

<task type="auto">
  <name>Task 2: Translate PropertySizeStep, LocationStep, TimelineStep</name>
  <files>
    src/components/questionnaire/steps/PropertySizeStep.tsx
    src/components/questionnaire/steps/LocationStep.tsx
    src/components/questionnaire/steps/TimelineStep.tsx
  </files>
  <action>
Update each step to use useTranslations:

1. Add import: `import { useTranslations } from "next-intl";`

2. Add hook with appropriate namespace

For PropertySizeStep:
```tsx
const t = useTranslations("onboarding.questions.propertySize");

<QuestionBubble question={t("title")} description={t("description")} />

<h3>{t("options.bedrooms")}</h3>
<Label>{t("options.minimum")}</Label>
<Input placeholder={t("options.placeholder.minBedrooms")} />
// ... similarly for max bedrooms, min/max area
<h3>{t("options.area")}</h3>
```

For LocationStep:
```tsx
const t = useTranslations("onboarding.questions.locations");

<QuestionBubble question={t("title")} description={t("description")} />

// Use ISRAELI_LOCATIONS from constants but translate display:
{ISRAELI_LOCATIONS.map((location) => (
  <Label>{t(`cities.${location}`)}</Label>
))}
```

For TimelineStep (map DB values to translation keys):
```tsx
const t = useTranslations("onboarding.questions.timeline");

const timelineKeyMap: Record<string, string> = {
  "3_months": "3months",
  "6_months": "6months",
  "1_year": "1year",
  exploring: "exploring",
};

<QuestionBubble question={t("title")} description={t("description")} />

// For each option:
<Label>{t(`options.${timelineKeyMap[value]}.label`)}</Label>
<p>{t(`options.${timelineKeyMap[value]}.description`)}</p>
```
  </action>
  <verify>npm run build passes, components render with translated strings</verify>
  <done>PropertySizeStep, LocationStep, TimelineStep all use useTranslations with no hardcoded strings</done>
</task>

<task type="auto">
  <name>Task 3: Translate AdditionalPreferencesStep and ServicesStep</name>
  <files>
    src/components/questionnaire/steps/AdditionalPreferencesStep.tsx
    src/components/questionnaire/steps/ServicesStep.tsx
  </files>
  <action>
Update each step to use useTranslations:

For AdditionalPreferencesStep:
```tsx
const t = useTranslations("onboarding.questions.additional");

<QuestionBubble question={t("title")} description={t("description")} />

<Textarea placeholder={t("placeholder")} />
<span>{t("charCount", { count: charCount, max: MAX_LENGTH })}</span>
```

For ServicesStep (map DB values to translation keys):
```tsx
const t = useTranslations("onboarding.questions.services");

const SERVICE_IDS = ["broker", "mortgage_advisor", "lawyer"] as const;

const serviceKeyMap: Record<string, string> = {
  broker: "broker",
  mortgage_advisor: "mortgageAdvisor",
  lawyer: "lawyer",
};

// Remove inline SERVICES array and use translation-driven render:
<QuestionBubble question={t("title")} description={t("description")} />

{SERVICE_IDS.map((serviceId) => {
  const key = serviceKeyMap[serviceId];
  return (
    <label key={serviceId}>
      <Checkbox id={serviceId} ... />
      <Label>{t(`options.${key}.label`)}</Label>
      <p>{t(`options.${key}.description`)}</p>
    </label>
  );
})}
```
  </action>
  <verify>npm run build passes, components render with translated strings</verify>
  <done>AdditionalPreferencesStep and ServicesStep use useTranslations with no hardcoded strings</done>
</task>

</tasks>

<verification>
1. Build passes: `npm run build` completes without errors
2. Each modified file imports useTranslations from next-intl
3. Each modified file has zero hardcoded user-facing English strings
4. Translation keys exist in messages/en.json for all used keys
5. All 15 originally untranslated questionnaire steps now use translations
</verification>

<success_criteria>
- 5 questionnaire step components (PropertySizeStep, LocationStep, TimelineStep, AdditionalPreferencesStep, ServicesStep) use useTranslations
- All question text, descriptions, and option labels come from translation files
- No hardcoded English strings remain in these 5 files
- Combined with 31-08 and 31-09, all 15 questionnaire steps are now translated
- Build succeeds with no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/31-translation-infrastructure/31-10-SUMMARY.md`
</output>
