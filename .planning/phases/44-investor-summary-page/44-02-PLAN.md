---
phase: 44-investor-summary-page
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/profile/QuickReplyButtons.tsx
  - src/components/ai/AIChatPanel.tsx
  - src/components/profile/index.ts
autonomous: true

must_haves:
  truths:
    - "Quick reply buttons appear above chat input"
    - "Clicking a quick reply sends the prompt to AI"
    - "Quick replies collapse to expandable icon after first button click"
    - "Context-aware prompts appear based on profile completeness"
  artifacts:
    - path: "src/components/profile/QuickReplyButtons.tsx"
      provides: "Chip buttons that inject prompts into chat"
      exports: ["QuickReplyButtons"]
    - path: "src/components/ai/AIChatPanel.tsx"
      provides: "Updated to accept quickReplySlot prop for extensibility"
      exports: ["AIChatPanel"]
  key_links:
    - from: "QuickReplyButtons"
      to: "useAIChat.sendMessage"
      via: "onPromptSelect callback"
      pattern: "onPromptSelect\\(prompt\\)"
    - from: "AIChatPanel"
      to: "QuickReplyButtons"
      via: "quickReplySlot prop rendered above input"
      pattern: "quickReplySlot.*border-t"
---

<objective>
Create quick reply buttons component and integrate it with AIChatPanel.

Purpose: Quick reply buttons guide investors to common AI actions ("Show properties", "Build my team") without needing to type. They collapse after use to keep the chat clean.

Output: QuickReplyButtons component with collapse behavior, updated AIChatPanel accepting quickReplySlot prop.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/44-investor-summary-page/44-CONTEXT.md
@.planning/phases/44-investor-summary-page/44-RESEARCH.md

# Existing AI components
@src/components/ai/AIChatPanel.tsx
@src/components/ai/AIChatInput.tsx
@src/components/ai/hooks/useAIChat.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create QuickReplyButtons component</name>
  <files>
    src/components/profile/QuickReplyButtons.tsx
  </files>
  <action>
Create QuickReplyButtons component with collapse behavior:

```typescript
interface QuickReplyButtonsProps {
  onPromptSelect: (prompt: string) => void;
  profileComplete?: boolean;
  className?: string;
}
```

**Implementation:**

1. Define BASE_PROMPTS array:
```typescript
const BASE_PROMPTS = [
  { label: "Show properties", prompt: "Show me properties that match my preferences" },
  { label: "Build my team", prompt: "Help me find service providers for my investment" },
  { label: "Explain options", prompt: "What are my investment options based on my profile?" },
];
```

2. If `profileComplete === false`, add context-aware prompt:
```typescript
{ label: "Complete profile", prompt: "What information am I missing in my profile?" }
```

3. Track collapsed state with `useState(false)`

4. When collapsed, show minimal UI:
```tsx
<div className="px-3 py-2 border-t bg-muted/30">
  <Button
    variant="ghost"
    size="sm"
    onClick={() => setCollapsed(false)}
    className="text-xs text-muted-foreground"
  >
    <HugeiconsIcon icon={MessageQuestionIcon} size={14} className="me-1" />
    Show suggestions
  </Button>
</div>
```

5. When expanded, show button chips:
```tsx
<div className={cn("px-3 py-2 border-t bg-muted/30", className)}>
  <div className="flex flex-wrap gap-2">
    {prompts.map(({ label, prompt }) => (
      <Button
        key={label}
        variant="outline"
        size="sm"
        onClick={() => {
          onPromptSelect(prompt);
          setCollapsed(true); // Collapse after use
        }}
        className="text-xs h-7"
      >
        {label}
      </Button>
    ))}
  </div>
</div>
```

6. Use appropriate icon from Hugeicons (MessageQuestionIcon or similar available icon)
  </action>
  <verify>
TypeScript compiles: `npx tsc --noEmit`
  </verify>
  <done>
QuickReplyButtons renders chip buttons that collapse after first use.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update AIChatPanel to accept quickReplySlot prop</name>
  <files>
    src/components/ai/AIChatPanel.tsx
  </files>
  <action>
Modify AIChatPanel to accept an optional slot for quick replies:

```typescript
interface AIChatPanelProps {
  className?: string;
  quickReplySlot?: ReactNode; // NEW
}
```

**Changes:**

1. Add quickReplySlot to destructured props:
```typescript
export function AIChatPanel({ className, quickReplySlot }: AIChatPanelProps) {
```

2. Render quickReplySlot above AIChatInput if provided:
```tsx
{/* Quick reply slot (above input) */}
{quickReplySlot}

{/* Input */}
<AIChatInput
  onSend={sendMessage}
  onStop={stopGeneration}
  isStreaming={isStreaming}
  disabled={false}
/>
```

The slot pattern allows the parent to inject QuickReplyButtons with the right sendMessage callback while keeping AIChatPanel generic.

**Export sendMessage for parent access:**
The parent page will use useAIChat hook directly and pass sendMessage to QuickReplyButtons. AIChatPanel doesn't need to expose its internal hook - the pattern is:

```tsx
// In summary page (Plan 03):
const { sendMessage, ... } = useAIChat();

<AIChatPanel
  quickReplySlot={
    <QuickReplyButtons
      onPromptSelect={sendMessage}
      profileComplete={completeness === 100}
    />
  }
/>
```

Wait - this won't work because AIChatPanel already uses useAIChat internally. We need to lift the hook to the parent or expose sendMessage.

**Better approach:** Modify AIChatPanel to accept optional onSendMessage override and pass sendMessage to quickReplySlot via render prop:

```typescript
interface AIChatPanelProps {
  className?: string;
  renderQuickReplies?: (sendMessage: (text: string) => void) => ReactNode;
}

// Usage in component:
{renderQuickReplies && renderQuickReplies(sendMessage)}
```

This keeps useAIChat inside AIChatPanel while allowing parent to inject UI that uses sendMessage.
  </action>
  <verify>
TypeScript compiles: `npx tsc --noEmit`
Existing AIChatPanel usage still works (prop is optional)
  </verify>
  <done>
AIChatPanel accepts renderQuickReplies prop for extensible quick reply injection.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update barrel export</name>
  <files>
    src/components/profile/index.ts
  </files>
  <action>
Add QuickReplyButtons to the profile barrel export:

```typescript
// Add to existing exports
export { QuickReplyButtons } from "./QuickReplyButtons";
```

Run type check to verify all exports work.
  </action>
  <verify>
`npx tsc --noEmit` passes.
Import works: `import { QuickReplyButtons } from "@/components/profile"` compiles.
  </verify>
  <done>
QuickReplyButtons exported and ready for use in summary page.
  </done>
</task>

</tasks>

<verification>
1. TypeScript compiles without errors
2. Lint passes
3. QuickReplyButtons shows prompt chips
4. Clicking a chip fires onPromptSelect callback
5. After click, buttons collapse to "Show suggestions" link
6. AIChatPanel renders renderQuickReplies output above input
7. Backward compatible - AIChatPanel works without new prop
</verification>

<success_criteria>
- Quick reply buttons visible above chat input
- Clicking button triggers AI message send
- Buttons collapse after first use
- "Show suggestions" expands buttons again
- Context-aware "Complete profile" appears when profile incomplete
- AIChatPanel backward compatible (existing usage unchanged)
</success_criteria>

<output>
After completion, create `.planning/phases/44-investor-summary-page/44-02-SUMMARY.md`
</output>
