---
phase: 54-legal-and-pricing-pages
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - messages/en.json
  - messages/he.json
  - src/components/legal/TableOfContents.tsx
  - src/components/legal/LegalSection.tsx
  - src/components/legal/index.ts
autonomous: true

must_haves:
  truths:
    - "Legal translation keys exist for privacy policy and terms of service in both EN and HE"
    - "TableOfContents component highlights active section as user scrolls through legal content"
    - "LegalSection component renders section with id, heading, and content for jump-link navigation"
  artifacts:
    - path: "messages/en.json"
      provides: "legal.privacy and legal.terms translation namespaces with full document content"
      contains: "legal"
    - path: "messages/he.json"
      provides: "Hebrew translations for legal.privacy and legal.terms namespaces"
      contains: "legal"
    - path: "src/components/legal/TableOfContents.tsx"
      provides: "Scroll spy TOC component using IntersectionObserver"
      exports: ["TableOfContents"]
    - path: "src/components/legal/LegalSection.tsx"
      provides: "Reusable legal section wrapper with id and heading"
      exports: ["LegalSection"]
    - path: "src/components/legal/index.ts"
      provides: "Barrel exports for legal components"
      exports: ["TableOfContents", "LegalSection"]
  key_links:
    - from: "src/components/legal/TableOfContents.tsx"
      to: "IntersectionObserver API"
      via: "useEffect with observer watching heading elements"
      pattern: "IntersectionObserver"
    - from: "src/components/legal/TableOfContents.tsx"
      to: "scrollIntoView"
      via: "click handler for smooth scroll navigation"
      pattern: "scrollIntoView"
---

<objective>
Create legal page i18n content (privacy policy + terms of service in EN and HE) and shared legal components (TableOfContents with scroll spy, LegalSection wrapper).

Purpose: Foundation for Phase 54 legal pages -- translation content and reusable components that both /privacy and /terms pages will consume.
Output: Translation keys in messages/*.json under "legal" namespace, and src/components/legal/ with TableOfContents and LegalSection components.
</objective>

<execution_context>
@/home/ubuntu/.claude/get-shit-done/workflows/execute-plan.md
@/home/ubuntu/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/54-legal-and-pricing-pages/54-RESEARCH.md
@.planning/codebase/CONVENTIONS.md
@.planning/codebase/STRUCTURE.md
@src/components/newlanding/HowItWorks.tsx (pattern reference for component structure)
@messages/en.json (add legal namespace at top level)
@messages/he.json (add legal namespace at top level)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add legal translation keys to EN and HE message files</name>
  <files>messages/en.json, messages/he.json</files>
  <action>
Add a top-level "legal" key to both messages/en.json and messages/he.json with two sub-namespaces: "privacy" and "terms".

**Structure for legal.privacy:**
```json
{
  "legal": {
    "privacy": {
      "meta": {
        "title": "Privacy Policy",
        "description": "Learn how REOS collects, uses, and protects your personal information."
      },
      "title": "Privacy Policy",
      "lastUpdated": "Last updated: January 28, 2026",
      "sections": {
        "introduction": {
          "heading": "Introduction",
          "content": "REOS (\"we\", \"our\", or \"us\") operates the REOS platform (reos.app), a real estate operating system connecting US investors with Israeli properties. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our platform. We are committed to protecting your privacy in compliance with applicable laws including the California Consumer Privacy Act (CCPA/CPRA), General Data Protection Regulation (GDPR), and Israeli Protection of Privacy Law (PPL)."
        },
        "dataCollection": {
          "heading": "Information We Collect",
          "whatWeCollect": {
            "heading": "Personal Information You Provide",
            "content": "When you create an account or use our services, we may collect: your name and email address, phone number (optional), investment preferences and risk tolerance, professional credentials (for service providers), property search history and saved properties, chat messages and communications, and financial preferences (budget range, investment goals)."
          },
          "automaticData": {
            "heading": "Information Collected Automatically",
            "content": "We automatically collect: device and browser information, IP address and approximate location, usage data (pages visited, features used, time spent), cookies and similar tracking technologies, and language and locale preferences."
          }
        },
        "dataUse": {
          "heading": "How We Use Your Information",
          "content": "We use your information to: provide and maintain the REOS platform, match investors with suitable properties and service providers, process AI-powered property recommendations and search, facilitate communications between investors and service providers, improve our platform and develop new features, send notifications about deal updates and new listings, comply with legal obligations, and prevent fraud and ensure platform security."
        },
        "dataProcessors": {
          "heading": "Data Processors and Sub-Processors",
          "content": "We use the following third-party services to process your data:",
          "processors": {
            "clerk": "Clerk (authentication and identity management) — US-based, SOC 2 Type II certified",
            "convex": "Convex (database and real-time backend) — US-based, SOC 2 compliant",
            "anthropic": "Anthropic (AI-powered features including property search and recommendations) — US-based, responsible AI practices"
          },
          "note": "Each processor is contractually bound to process data only as instructed and to maintain appropriate security measures."
        },
        "crossBorder": {
          "heading": "Cross-Border Data Transfers",
          "content": "REOS operates across the United States and Israel. Your data may be transferred between these jurisdictions. For transfers from the EU/EEA, we rely on Standard Contractual Clauses (SCCs) as approved by the European Commission. Israel has been recognized by the European Commission as providing an adequate level of data protection. For US-Israel transfers, we implement appropriate safeguards consistent with the Israeli Protection of Privacy Law and applicable US state privacy laws."
        },
        "dataSharing": {
          "heading": "Information Sharing",
          "content": "We do not sell your personal information. We may share your information with: service providers you choose to connect with through the platform, our data processors listed above, law enforcement when required by law, and in connection with a business transfer (merger, acquisition, or sale of assets). When you request a service provider (broker, mortgage advisor, or lawyer), your relevant profile information is shared with that provider to facilitate the service."
        },
        "yourRights": {
          "heading": "Your Privacy Rights",
          "content": "Depending on your location, you may have the following rights:",
          "ccpa": {
            "heading": "California Residents (CCPA/CPRA)",
            "content": "Right to know what personal information we collect and how it is used, right to delete your personal information, right to opt-out of the sale or sharing of personal information (we do not sell data), right to non-discrimination for exercising your rights, right to correct inaccurate personal information, and right to limit use of sensitive personal information."
          },
          "gdpr": {
            "heading": "EU/EEA Residents (GDPR)",
            "content": "Right of access to your personal data, right to rectification of inaccurate data, right to erasure (right to be forgotten), right to restrict processing, right to data portability, and right to object to processing."
          },
          "israel": {
            "heading": "Israeli Residents",
            "content": "Right to access your personal data held in our databases, right to request correction of inaccurate data, and right to request deletion of data no longer needed for the purpose it was collected."
          }
        },
        "dataSecurity": {
          "heading": "Data Security",
          "content": "We implement appropriate technical and organizational measures to protect your personal information, including encryption in transit (TLS/SSL) and at rest, access controls and authentication, regular security assessments, and employee training on data protection."
        },
        "cookies": {
          "heading": "Cookies and Tracking",
          "content": "We use essential cookies for authentication and session management. We use analytics cookies to understand platform usage and improve our services. You can manage cookie preferences through your browser settings. For details on specific cookies, see our Cookie Notice."
        },
        "retention": {
          "heading": "Data Retention",
          "content": "We retain your personal information for as long as your account is active or as needed to provide services. Deal and transaction records are retained for 7 years for legal compliance. You may request deletion of your account and associated data at any time by contacting us."
        },
        "children": {
          "heading": "Children's Privacy",
          "content": "REOS is not intended for users under 18 years of age. We do not knowingly collect personal information from children. If we learn we have collected data from a child under 18, we will delete it promptly."
        },
        "changes": {
          "heading": "Changes to This Policy",
          "content": "We may update this Privacy Policy from time to time. We will notify you of material changes by posting the updated policy on our platform and updating the \"Last updated\" date. Continued use of the platform after changes constitutes acceptance of the updated policy."
        },
        "contact": {
          "heading": "Contact Us",
          "content": "For privacy-related questions or to exercise your rights, contact us at: privacy@reos.app"
        }
      }
    },
    "terms": { ... }
  }
}
```

**Structure for legal.terms:**
Same pattern as privacy but for Terms of Service. Include these sections:
- "introduction": Acceptance of terms, who REOS is
- "eligibility": Must be 18+, US or Israeli resident for investment features
- "accountTerms": Account creation, accuracy of information, account security
- "platformUse": Permitted uses, prohibited conduct (fraud, scraping, unauthorized access)
- "investorTerms": Investment disclaimers (not financial advice), due diligence responsibility, property information accuracy
- "providerTerms": Provider obligations, professional licensing requirements, client communication standards
- "intellectualProperty": REOS owns platform IP, user retains content ownership, license grant for user content
- "userContent": Responsibility for content posted, right to remove content
- "disclaimer": Platform provided "as is", no warranty on property values or investment outcomes
- "limitationOfLiability": Limitation to fees paid, no consequential damages
- "indemnification": User agrees to indemnify REOS
- "termination": Right to suspend/terminate accounts, effect of termination
- "governingLaw": Governed by State of New York and/or Israeli law
- "disputeResolution": Arbitration clause, class action waiver
- "changes": Right to modify terms, notification process
- "contact": Contact information for legal inquiries

**Hebrew translations:** Provide complete Hebrew translations for ALL keys. Use formal Hebrew legal terminology. Ensure RTL-appropriate text. Privacy policy = "מדיניות פרטיות", Terms of Service = "תנאי שימוש".

**Important:**
- Add the "legal" key at the same nesting level as "landing", "common", etc. in the JSON
- Do NOT modify any existing keys -- only add new content
- Each section must have "heading" (string) and "content" (string) fields
- Include "meta.title" and "meta.description" for generateMetadata
- Include "lastUpdated" with date "January 28, 2026" / "28 בינואר 2026"
  </action>
  <verify>
Run `npx next build` or `npx tsc --noEmit` to confirm JSON is valid and no TypeScript errors. Verify both en.json and he.json parse correctly with `node -e "JSON.parse(require('fs').readFileSync('messages/en.json', 'utf8'))"` and same for he.json.
  </verify>
  <done>
Both messages/en.json and messages/he.json contain a "legal" namespace with "privacy" and "terms" sub-namespaces. Each has meta (title, description), lastUpdated, title, and sections with heading/content pairs covering all required topics. Hebrew translations are complete and use formal legal terminology.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create shared legal components (TableOfContents + LegalSection)</name>
  <files>src/components/legal/TableOfContents.tsx, src/components/legal/LegalSection.tsx, src/components/legal/index.ts</files>
  <action>
Create `src/components/legal/` directory with three files.

**TableOfContents.tsx:**
- "use client" directive (uses useState, useEffect, click handlers)
- Props: `headings: Array<{ id: string; text: string }>` (section ids and display text)
- Uses IntersectionObserver to track which section heading is currently visible
- Observer config: `rootMargin: '-20% 0px -35% 0px'` to activate when heading is in top portion of viewport
- State: `activeId` (string) tracking currently visible section
- Renders `<nav aria-label="Table of contents">` with list of anchor links
- Each link: `<a href={#id} onClick={smoothScroll}>` with `scrollIntoView({ behavior: 'smooth', block: 'start' })`
- Active link gets `font-semibold text-foreground` styling, inactive gets `text-muted-foreground hover:text-foreground`
- Sticky positioning: `sticky top-24` so TOC stays visible while scrolling
- Desktop only: Hidden on mobile (`hidden lg:block`), on mobile the TOC renders inline (non-sticky) above content
- Use logical properties for RTL: `ps-4 border-s-2` (not padding-left/border-left)
- Each link has `border-s-2` with active state: `border-s-2 border-primary` vs `border-s-2 border-transparent`
- Import `cn` from `@/lib/utils` for conditional class merging
- Cleanup: disconnect observer on unmount

**LegalSection.tsx:**
- Server component (no "use client" needed -- pure rendering)
- Props: `id: string`, `heading: string`, `children: React.ReactNode`
- Renders a `<section id={id} className="scroll-mt-24">` (offset for sticky header)
- Heading: `<h2 className="text-2xl font-semibold mb-4">{heading}</h2>`
- Content wrapper: `<div className="space-y-4 text-muted-foreground leading-relaxed">{children}</div>`
- The `scroll-mt-24` ensures jump links don't hide content behind sticky nav

**index.ts (barrel export):**
```typescript
export { TableOfContents } from "./TableOfContents";
export { LegalSection } from "./LegalSection";
```

**Follow existing patterns:**
- PascalCase component files
- Named exports (not default)
- Props via TypeScript interfaces
- cn() utility for class merging
- Import order: React -> next-intl -> internal (@/) -> local (./)
  </action>
  <verify>
Run `npx tsc --noEmit` to confirm TypeScript compiles without errors. Verify the barrel export works: `grep -r "TableOfContents" src/components/legal/index.ts` shows the export.
  </verify>
  <done>
Three files exist in src/components/legal/: TableOfContents.tsx (client component with IntersectionObserver scroll spy, sticky positioning, RTL-safe logical properties), LegalSection.tsx (section wrapper with scroll-margin-top offset and heading), and index.ts (barrel exports both components). TypeScript compiles without errors.
  </done>
</task>

</tasks>

<verification>
1. `node -e "const d=JSON.parse(require('fs').readFileSync('messages/en.json','utf8')); console.log(Object.keys(d.legal))"` outputs `['privacy', 'terms']`
2. `node -e "const d=JSON.parse(require('fs').readFileSync('messages/he.json','utf8')); console.log(Object.keys(d.legal))"` outputs `['privacy', 'terms']`
3. `npx tsc --noEmit` passes without errors
4. src/components/legal/index.ts exports TableOfContents and LegalSection
</verification>

<success_criteria>
- Legal translation keys exist in both EN and HE covering privacy policy (13 sections) and terms of service (15 sections)
- TableOfContents component uses IntersectionObserver for scroll spy with smooth scroll navigation
- LegalSection component provides reusable section wrapper with id-based jump links
- All files follow project conventions (PascalCase, named exports, cn() utility, logical properties for RTL)
- TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/54-legal-and-pricing-pages/54-01-SUMMARY.md`
</output>
