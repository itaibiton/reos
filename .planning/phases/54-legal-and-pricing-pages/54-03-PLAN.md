---
phase: 54-legal-and-pricing-pages
plan: 03
type: execute
wave: 2
depends_on: ["54-01"]
files_modified:
  - messages/en.json
  - messages/he.json
  - src/components/pricing/PricingTiers.tsx
  - src/components/pricing/PricingToggle.tsx
  - src/components/pricing/FeatureComparison.tsx
  - src/components/pricing/BillingFAQ.tsx
  - src/components/pricing/index.ts
  - src/app/[locale]/(main)/pricing/page.tsx
  - src/app/[locale]/(main)/pricing/PricingPageContent.tsx
autonomous: true

must_haves:
  truths:
    - "User can navigate to /pricing and see 3 tiers: Investor (free), Broker (monthly), Agency (custom)"
    - "User can toggle between annual and monthly billing and see price changes with savings display"
    - "User can see a feature comparison table showing which features each tier includes"
    - "User sees 'Most Popular' badge on the recommended Broker tier"
    - "User can read billing FAQ with common pricing questions answered"
    - "User sees trust signals including 'No credit card required' for free tier"
    - "Pricing page has correct metadata and displays in both English and Hebrew"
  artifacts:
    - path: "messages/en.json"
      provides: "pricing namespace with tiers, features, billingFAQ, and trustSignals translation keys"
      contains: "pricing"
    - path: "messages/he.json"
      provides: "Hebrew translations for pricing namespace"
      contains: "pricing"
    - path: "src/components/pricing/PricingTiers.tsx"
      provides: "Pricing tier cards with CTA buttons and Most Popular badge"
      exports: ["PricingTiers"]
    - path: "src/components/pricing/PricingToggle.tsx"
      provides: "Annual/monthly billing toggle using Radix Switch"
      exports: ["PricingToggle"]
    - path: "src/components/pricing/FeatureComparison.tsx"
      provides: "Responsive feature comparison: table on desktop, stacked cards on mobile"
      exports: ["FeatureComparison"]
    - path: "src/components/pricing/BillingFAQ.tsx"
      provides: "FAQ accordion for billing questions using Radix Accordion"
      exports: ["BillingFAQ"]
    - path: "src/components/pricing/index.ts"
      provides: "Barrel exports for all pricing components"
      exports: ["PricingTiers", "PricingToggle", "FeatureComparison", "BillingFAQ"]
    - path: "src/app/[locale]/(main)/pricing/page.tsx"
      provides: "Pricing page route with metadata, JSON-LD, and all pricing components"
      exports: ["default", "generateMetadata"]
  key_links:
    - from: "src/app/[locale]/(main)/pricing/page.tsx"
      to: "src/components/pricing/index.ts"
      via: "import all pricing components"
      pattern: "import.*from.*@/components/pricing"
    - from: "src/components/pricing/PricingTiers.tsx"
      to: "messages/en.json pricing namespace"
      via: "useTranslations('pricing')"
      pattern: "useTranslations.*pricing"
    - from: "src/components/pricing/PricingToggle.tsx"
      to: "Radix Switch component"
      via: "import Switch from @/components/ui/switch"
      pattern: "import.*Switch.*from.*@/components/ui/switch"
    - from: "src/components/pricing/FeatureComparison.tsx"
      to: "Radix Table component"
      via: "import Table components from @/components/ui/table"
      pattern: "import.*Table.*from.*@/components/ui/table"
    - from: "src/components/pricing/BillingFAQ.tsx"
      to: "Radix Accordion component"
      via: "import Accordion from @/components/ui/accordion"
      pattern: "import.*Accordion.*from.*@/components/ui/accordion"
---

<objective>
Create the Pricing page (/pricing) with i18n content, 3-tier comparison, annual/monthly toggle, feature comparison table, billing FAQ, trust signals, and JSON-LD structured data.

Purpose: Users need to compare pricing tiers to choose the right plan. This page is critical for conversion. Fulfills requirements PRICE-01 through PRICE-10.
Output: Pricing translation keys in messages/*.json, four pricing components in src/components/pricing/, and the /pricing page route.
</objective>

<execution_context>
@/home/ubuntu/.claude/get-shit-done/workflows/execute-plan.md
@/home/ubuntu/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/54-legal-and-pricing-pages/54-RESEARCH.md
@.planning/phases/54-legal-and-pricing-pages/54-01-SUMMARY.md
@.planning/codebase/CONVENTIONS.md
@src/components/landing/Pricing/PricingPlans.tsx (existing landing pricing component -- reference for translation key patterns but do NOT modify)
@src/components/ui/switch.tsx (Radix Switch component)
@src/components/ui/accordion.tsx (Radix Accordion component)
@src/components/ui/table.tsx (Radix Table component)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add pricing translation keys and create pricing components</name>
  <files>messages/en.json, messages/he.json, src/components/pricing/PricingTiers.tsx, src/components/pricing/PricingToggle.tsx, src/components/pricing/FeatureComparison.tsx, src/components/pricing/BillingFAQ.tsx, src/components/pricing/index.ts</files>
  <action>
**Step A: Add pricing translation keys to messages/en.json and messages/he.json**

Add a top-level "pricing" key (separate from the existing "landing.pricing" which is for the landing page section). This is for the standalone pricing page.

**Translation structure:**
```json
{
  "pricing": {
    "meta": {
      "title": "Pricing",
      "description": "Compare REOS pricing plans for investors, brokers, and agencies. Start free, scale as you grow."
    },
    "title": "Simple, transparent pricing",
    "subtitle": "Choose the plan that fits your real estate business. Start free, upgrade when you're ready.",
    "billing": {
      "monthly": "Monthly",
      "annual": "Annual",
      "save": "Save 20%",
      "month": "mo",
      "year": "yr",
      "perMonth": "/month",
      "perYear": "/year",
      "billedAnnually": "Billed annually"
    },
    "tiers": {
      "investor": {
        "name": "Investor",
        "description": "Perfect for individual investors exploring Israeli real estate opportunities",
        "priceMonthly": "0",
        "priceAnnual": "0",
        "cta": "Get Started Free",
        "features": [
          "Property marketplace access",
          "AI-powered property search",
          "Save and compare properties",
          "Connect with service providers",
          "Deal tracking dashboard",
          "Basic notifications"
        ]
      },
      "broker": {
        "name": "Broker",
        "description": "For real estate professionals managing clients and deals",
        "priceMonthly": "49",
        "priceAnnual": "39",
        "cta": "Start Free Trial",
        "popular": "Most Popular",
        "features": [
          "Everything in Investor",
          "Client management dashboard",
          "Lead tracking and pipeline",
          "Provider profile and reviews",
          "Priority support",
          "Analytics and insights",
          "Deal handoff management",
          "Custom notifications"
        ]
      },
      "agency": {
        "name": "Agency",
        "description": "For agencies and teams requiring custom solutions and dedicated support",
        "priceMonthly": "Custom",
        "priceAnnual": "Custom",
        "cta": "Contact Sales",
        "features": [
          "Everything in Broker",
          "Team management",
          "Multi-agent support",
          "Custom integrations",
          "Dedicated account manager",
          "White-label options",
          "API access",
          "Priority onboarding",
          "SLA guarantee"
        ]
      }
    },
    "comparison": {
      "title": "Compare plan features",
      "feature": "Feature",
      "features": [
        { "name": "Property marketplace", "investor": true, "broker": true, "agency": true },
        { "name": "AI property search", "investor": true, "broker": true, "agency": true },
        { "name": "Save & compare properties", "investor": true, "broker": true, "agency": true },
        { "name": "Connect with providers", "investor": true, "broker": true, "agency": true },
        { "name": "Deal tracking", "investor": true, "broker": true, "agency": true },
        { "name": "Client management", "investor": false, "broker": true, "agency": true },
        { "name": "Lead pipeline", "investor": false, "broker": true, "agency": true },
        { "name": "Provider profile", "investor": false, "broker": true, "agency": true },
        { "name": "Analytics & insights", "investor": false, "broker": true, "agency": true },
        { "name": "Deal handoff", "investor": false, "broker": true, "agency": true },
        { "name": "Team management", "investor": false, "broker": false, "agency": true },
        { "name": "Custom integrations", "investor": false, "broker": false, "agency": true },
        { "name": "API access", "investor": false, "broker": false, "agency": true },
        { "name": "Dedicated account manager", "investor": false, "broker": false, "agency": true },
        { "name": "SLA guarantee", "investor": false, "broker": false, "agency": true }
      ]
    },
    "faq": {
      "title": "Billing FAQ",
      "questions": [
        { "id": "trial", "question": "Is there a free trial?", "answer": "Yes! The Broker plan includes a 14-day free trial. No credit card required to start." },
        { "id": "upgrade", "question": "Can I upgrade or downgrade anytime?", "answer": "Absolutely. You can change your plan at any time. When upgrading, you'll be prorated for the remainder of your billing cycle. When downgrading, the change takes effect at your next billing date." },
        { "id": "cancel", "question": "What happens if I cancel?", "answer": "You can cancel anytime. Your access continues until the end of your current billing period. Your data is retained for 30 days after cancellation in case you change your mind." },
        { "id": "payment", "question": "What payment methods do you accept?", "answer": "We accept all major credit cards (Visa, Mastercard, American Express) and bank transfers for annual plans." },
        { "id": "enterprise", "question": "How does Agency pricing work?", "answer": "Agency pricing is customized based on team size, volume, and specific requirements. Contact our sales team for a personalized quote." },
        { "id": "refund", "question": "Do you offer refunds?", "answer": "We offer a full refund within the first 14 days of any paid plan. After that, you can cancel anytime but refunds are not provided for partial billing periods." }
      ]
    },
    "trustSignals": {
      "noCreditCard": "No credit card required",
      "freeTrial": "14-day free trial",
      "cancelAnytime": "Cancel anytime",
      "securePayment": "Secure payment"
    }
  }
}
```

Provide complete Hebrew translations for ALL keys. Use appropriate Hebrew for pricing context: "תמחור" (pricing), "חינם" (free), "חודשי" (monthly), "שנתי" (annual), "הכי פופולרי" (most popular), "צור קשר עם המכירות" (contact sales).

NOTE: The existing "landing.pricing" key is for the landing page section component (PricingPlans.tsx in src/components/landing/). Do NOT modify it. This new "pricing" top-level key is for the standalone pricing page.

**Step B: Create pricing components in src/components/pricing/**

**PricingToggle.tsx:**
- "use client" (uses state)
- Props: `isAnnual: boolean`, `onToggle: (isAnnual: boolean) => void`
- Uses `Switch` from `@/components/ui/switch` (Radix Switch)
- Uses `useTranslations("pricing.billing")`
- Layout: `<div className="flex items-center justify-center gap-3">`
- Monthly label (dimmed when annual), Switch, Annual label (dimmed when monthly) + green "Save 20%" badge
- Use semantic colors and logical properties for RTL

**PricingTiers.tsx:**
- "use client" (receives isAnnual prop for dynamic pricing display)
- Props: `isAnnual: boolean`
- Uses `useTranslations("pricing")`
- Renders 3 tier cards in a responsive grid: `grid grid-cols-1 md:grid-cols-3 gap-6 lg:gap-8`
- Each card: border rounded-xl p-6 with flex-col layout
- Broker tier (isPopular=true): `border-primary shadow-lg ring-2 ring-primary/20 relative` + "Most Popular" badge absolutely positioned at top
- Tier card content: name (h3), description, price display (large number + period), CTA button, feature list with Check icons
- CTA button variants: popular tier uses `variant="default"`, others use `variant="outline"`
- Price display: `$0`, `$49/mo` or `$39/mo` (annual), `Custom` for Agency
- Trust signal under Investor CTA: "No credit card required"
- Trust signal under Broker CTA: "14-day free trial"
- Import `Check` from `lucide-react` for feature checkmarks
- Use `cn()` for conditional styling

**FeatureComparison.tsx:**
- "use client"
- Uses `useTranslations("pricing.comparison")`
- Access feature list via `t.raw("features")` to get the array
- **Desktop (md+):** Uses `Table`, `TableHeader`, `TableBody`, `TableRow`, `TableHead`, `TableCell` from `@/components/ui/table`
  - Header row: "Feature", "Investor", "Broker", "Agency"
  - Data rows: feature name + checkmark (Check icon, green) or dash (Minus icon, muted) per tier
- **Mobile (< md):** Stacked cards per tier showing included features only
  - Each card: tier name as heading, list of included features with Check icon
  - `<div className="md:hidden space-y-6">` for mobile cards
  - `<div className="hidden md:block">` for desktop table
- Import `Check`, `Minus` from `lucide-react`

**BillingFAQ.tsx:**
- "use client"
- Uses `useTranslations("pricing.faq")`
- Access questions via `t.raw("questions")` to get the array
- Uses `Accordion`, `AccordionItem`, `AccordionTrigger`, `AccordionContent` from `@/components/ui/accordion`
- `<Accordion type="multiple">` for independent expand/collapse (consistent with landing page FAQ pattern)
- Section title: h2 with `t("title")`
- Each question renders as AccordionItem with trigger (question) and content (answer)
- Style: `text-base font-medium text-start` on trigger, `text-foreground/60 leading-relaxed` on content

**index.ts (barrel export):**
```typescript
export { PricingTiers } from "./PricingTiers";
export { PricingToggle } from "./PricingToggle";
export { FeatureComparison } from "./FeatureComparison";
export { BillingFAQ } from "./BillingFAQ";
```

**Follow existing patterns:**
- PascalCase files, named exports
- Import order: React -> framer-motion (if used) -> next-intl -> lucide-react -> @/components/ui -> @/lib -> local
- cn() for conditional classes
- Logical properties (ps, pe, ms, me) for RTL support
- aria-hidden="true" on decorative icons
  </action>
  <verify>
Run `npx tsc --noEmit` to verify TypeScript compiles. Verify JSON is valid: `node -e "const d=JSON.parse(require('fs').readFileSync('messages/en.json','utf8')); console.log(Object.keys(d.pricing))"` should output `['meta', 'title', 'subtitle', 'billing', 'tiers', 'comparison', 'faq', 'trustSignals']`.
  </verify>
  <done>
Pricing translation keys exist in both EN and HE with complete tier data, feature comparison, billing FAQ, and trust signals. Four pricing components created: PricingToggle (Radix Switch), PricingTiers (3-tier cards with badge/CTAs), FeatureComparison (responsive table/cards), BillingFAQ (accordion). Barrel exports working. TypeScript compiles.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Pricing page at /pricing with metadata and JSON-LD</name>
  <files>src/app/[locale]/(main)/pricing/page.tsx</files>
  <action>
Create `src/app/[locale]/(main)/pricing/page.tsx` as a page that combines server metadata with client pricing components.

**The page needs both generateMetadata (server) and interactive components (client).** Use the pattern:
- Page component renders a client wrapper that holds the isAnnual state
- generateMetadata is exported separately (works because page.tsx can have server exports alongside default component)

**Approach:** Make page.tsx a SERVER component with generateMetadata. Create a client wrapper component inline or import one that manages the isAnnual toggle state and renders all pricing components.

**Recommended implementation:**

```typescript
import type { Metadata } from "next";
import { getTranslations } from "next-intl/server";
import Script from "next/script";
import { PricingPageContent } from "./PricingPageContent";

export async function generateMetadata({ params }: { params: Promise<{ locale: string }> }): Promise<Metadata> {
  const { locale } = await params;
  const t = await getTranslations({ locale, namespace: "pricing.meta" });

  return {
    title: t("title"),
    description: t("description"),
    openGraph: {
      title: t("title"),
      description: t("description"),
      locale: locale === "he" ? "he_IL" : "en_US",
      type: "website",
    },
    alternates: {
      languages: {
        en: "/en/pricing",
        he: "/he/pricing",
      },
    },
  };
}

export default function PricingPage() {
  const pricingSchema = {
    "@context": "https://schema.org",
    "@type": "Product",
    "name": "REOS Platform",
    "description": "Real estate operating system connecting US investors with Israeli properties",
    "offers": [
      {
        "@type": "Offer",
        "name": "Investor",
        "price": "0",
        "priceCurrency": "USD",
        "description": "Free plan for individual investors"
      },
      {
        "@type": "Offer",
        "name": "Broker",
        "price": "49",
        "priceCurrency": "USD",
        "description": "Professional plan for real estate brokers",
        "priceValidUntil": "2026-12-31"
      },
      {
        "@type": "Offer",
        "name": "Agency",
        "description": "Custom pricing for agencies and teams"
      }
    ]
  };

  return (
    <>
      <Script
        id="pricing-schema"
        type="application/ld+json"
        dangerouslySetInnerHTML={{ __html: JSON.stringify(pricingSchema) }}
      />
      <PricingPageContent />
    </>
  );
}
```

**Then create `src/app/[locale]/(main)/pricing/PricingPageContent.tsx`** (client component):

```typescript
"use client";

import { useState } from "react";
import { useTranslations } from "next-intl";
import { PricingTiers, PricingToggle, FeatureComparison, BillingFAQ } from "@/components/pricing";
import { Shield, CreditCard, Clock } from "lucide-react";

export function PricingPageContent() {
  const [isAnnual, setIsAnnual] = useState(true);
  const t = useTranslations("pricing");

  return (
    <div className="py-16 md:py-24">
      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        {/* Hero section */}
        <div className="text-center mb-12">
          <h1 className="text-4xl md:text-5xl font-bold mb-4">{t("title")}</h1>
          <p className="text-xl text-muted-foreground max-w-2xl mx-auto">{t("subtitle")}</p>
        </div>

        {/* Billing toggle */}
        <div className="flex justify-center mb-12">
          <PricingToggle isAnnual={isAnnual} onToggle={setIsAnnual} />
        </div>

        {/* Pricing tier cards */}
        <PricingTiers isAnnual={isAnnual} />

        {/* Trust signals row */}
        <div className="flex flex-wrap items-center justify-center gap-6 mt-8 mb-16">
          <div className="flex items-center gap-2 text-sm text-muted-foreground">
            <CreditCard className="w-4 h-4" aria-hidden="true" />
            <span>{t("trustSignals.noCreditCard")}</span>
          </div>
          <div className="flex items-center gap-2 text-sm text-muted-foreground">
            <Clock className="w-4 h-4" aria-hidden="true" />
            <span>{t("trustSignals.freeTrial")}</span>
          </div>
          <div className="flex items-center gap-2 text-sm text-muted-foreground">
            <Shield className="w-4 h-4" aria-hidden="true" />
            <span>{t("trustSignals.securePayment")}</span>
          </div>
        </div>

        {/* Feature comparison */}
        <div className="mb-16">
          <FeatureComparison />
        </div>

        {/* Billing FAQ */}
        <div className="max-w-3xl mx-auto">
          <BillingFAQ />
        </div>
      </div>
    </div>
  );
}
```

**Also add this file to files_modified.** Create: `src/app/[locale]/(main)/pricing/PricingPageContent.tsx`

**Key details:**
- isAnnual state lives in PricingPageContent, passed to PricingToggle and PricingTiers
- JSON-LD uses Schema.org Product type with Offer array for each tier
- Trust signals row with icons (CreditCard, Clock, Shield) between tiers and comparison
- Feature comparison full width, billing FAQ centered in max-w-3xl
- Page inherits Navigation + Footer from (main)/layout.tsx
- aria-hidden="true" on decorative icons
  </action>
  <verify>
Run `npx tsc --noEmit` to verify TypeScript compiles. Run `npx next build` and check /en/pricing and /he/pricing routes generate. Check JSON-LD output: `grep -r "pricing-schema" src/app/` should find the Script tag. Verify that PricingPageContent imports all 4 pricing components.
  </verify>
  <done>
/pricing page route exists with generateMetadata (title, description, OpenGraph, alternates), JSON-LD Product schema with 3 Offer entries, and a client PricingPageContent component that manages annual/monthly toggle state. Page renders: hero title/subtitle, billing toggle, 3 tier cards (Investor free, Broker $49/$39, Agency custom) with Most Popular badge, trust signals row, feature comparison table (responsive), and billing FAQ accordion. Displays correctly in EN and HE.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes without errors
2. `npx next build` completes with /en/pricing and /he/pricing routes
3. `node -e "const d=JSON.parse(require('fs').readFileSync('messages/en.json','utf8')); console.log(d.pricing.tiers.broker.popular)"` outputs "Most Popular"
4. `node -e "const d=JSON.parse(require('fs').readFileSync('messages/he.json','utf8')); console.log(Object.keys(d.pricing.tiers))"` outputs `['investor', 'broker', 'agency']`
5. JSON-LD Script tag exists with pricing-schema id
6. PricingPageContent imports all 4 components from @/components/pricing
7. Radix Switch used for billing toggle (not custom implementation)
8. Feature comparison uses Radix Table on desktop, stacked cards on mobile
</verification>

<success_criteria>
- /pricing renders 3 tiers: Investor (free), Broker ($49/mo or $39/mo annual), Agency (Custom)
- Annual/monthly toggle works with Radix Switch showing price changes and "Save 20%" badge
- Feature comparison table shows 15 features with checkmarks per tier (responsive: table on desktop, cards on mobile)
- "Most Popular" badge appears on Broker tier
- Billing FAQ section with 6 questions using Radix Accordion (type="multiple")
- Trust signals displayed: "No credit card required", "14-day free trial", "Secure payment"
- JSON-LD Product schema in page source with 3 Offer entries
- Correct metadata (title, description, OpenGraph, alternates) in EN and HE
- All text from translation files (no hardcoded strings in components)
- Satisfies requirements: PRICE-01 through PRICE-10
</success_criteria>

<output>
After completion, create `.planning/phases/54-legal-and-pricing-pages/54-03-SUMMARY.md`
</output>
