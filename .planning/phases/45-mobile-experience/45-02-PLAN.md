---
phase: 45-mobile-experience
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ai/AIChatInput.tsx
  - src/components/profile/QuickReplyButtons.tsx
  - src/components/profile/InlineFieldEditor.tsx
autonomous: true
user_setup: []

must_haves:
  truths:
    - "All interactive elements have minimum 44px touch targets"
    - "Quick reply buttons are easily tappable without accidental adjacent presses"
    - "Chat input stays visible above keyboard when keyboard opens"
  artifacts:
    - path: "src/components/ai/AIChatInput.tsx"
      provides: "Touch-optimized chat input with 44px targets"
      contains: "min-h-11"
    - path: "src/components/profile/QuickReplyButtons.tsx"
      provides: "Horizontal scrolling quick replies with proper spacing"
      contains: "gap-2"
    - path: "src/components/profile/InlineFieldEditor.tsx"
      provides: "Responsive popover/drawer for mobile editing"
      contains: "useIsMobile"
  key_links:
    - from: "InlineFieldEditor.tsx"
      to: "Drawer component"
      via: "mobile conditional rendering"
      pattern: "isMobile.*Drawer"
---

<objective>
Add touch optimizations to existing components: 44px touch targets, proper spacing, and responsive field editing.

Purpose: Ensure all interactive elements are touch-friendly on mobile with proper target sizes and spacing to prevent accidental taps.

Output: AIChatInput, QuickReplyButtons, and InlineFieldEditor updated for mobile touch optimization.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/45-mobile-experience/45-CONTEXT.md
@.planning/phases/45-mobile-experience/45-RESEARCH.md
@src/components/ai/AIChatInput.tsx
@src/components/profile/QuickReplyButtons.tsx
@src/components/profile/InlineFieldEditor.tsx
@src/components/ui/drawer.tsx
@src/hooks/use-mobile.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update AIChatInput for touch targets</name>
  <files>src/components/ai/AIChatInput.tsx</files>
  <action>
Update chat input for 44px touch targets and mobile-friendly sizing.

Changes:
1. Send button: Add `min-h-11 min-w-11` (44px touch target, Tailwind uses 4px base)
2. Stop button: Add `min-h-11 min-w-11`
3. Textarea: Ensure `min-h-11` for touch friendliness
4. Container padding: Ensure adequate spacing

Current button sizes are h-10 w-10 (40px). Update to:
```tsx
// Stop button
<Button
  onClick={onStop}
  variant="destructive"
  size="icon"
  className="h-11 w-11 min-h-11 min-w-11 flex-shrink-0"
  aria-label="Stop generating"
>

// Send button
<Button
  onClick={handleSend}
  disabled={inputDisabled || isEmpty}
  size="icon"
  className="h-11 w-11 min-h-11 min-w-11 flex-shrink-0"
  aria-label="Send message"
>
```

Textarea minimum height:
```tsx
className={cn(
  "flex-1 resize-none rounded-lg border bg-transparent px-3 py-2 text-sm",
  "placeholder:text-muted-foreground",
  "focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",
  "disabled:cursor-not-allowed disabled:opacity-50",
  "min-h-11" // Updated from min-h-[40px]
)}
```

DO NOT change any logic - only add/update class names for touch targets.
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>AIChatInput has 44px (h-11/w-11) touch targets on buttons and textarea</done>
</task>

<task type="auto">
  <name>Task 2: Update QuickReplyButtons for mobile</name>
  <files>src/components/profile/QuickReplyButtons.tsx</files>
  <action>
Update quick reply buttons for horizontal scrolling and touch optimization.

Changes:
1. Button container: Horizontal scroll with snap
2. Buttons: 44px height, minimum width, proper gap
3. Show suggestions button: 44px touch target
4. Add scroll-snap for smooth horizontal scrolling

Updated container:
```tsx
<div className={cn("px-3 py-2 border-t bg-muted/30", className)}>
  <div className="flex overflow-x-auto gap-2 pb-1 snap-x snap-mandatory scrollbar-hide">
    {prompts.map(({ labelKey, prompt }) => (
      <Button
        key={labelKey}
        variant="outline"
        size="sm"
        onClick={() => {
          onPromptSelect(prompt);
          setCollapsed(true);
        }}
        className="flex-shrink-0 snap-start min-h-11 min-w-[100px] text-xs whitespace-nowrap"
      >
        {t(labelKey)}
      </Button>
    ))}
  </div>
</div>
```

Collapsed state button (show suggestions):
```tsx
<Button
  variant="ghost"
  size="sm"
  onClick={() => setCollapsed(false)}
  className="text-xs text-muted-foreground min-h-11"
>
```

Add scrollbar-hide utility if not present. If Tailwind scrollbar-hide plugin not available, use:
```tsx
className="... [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]"
```

Key spacing: gap-2 (8px) between buttons prevents accidental adjacent taps.
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>QuickReplyButtons has horizontal scroll, 44px targets, 8px gap between buttons</done>
</task>

<task type="auto">
  <name>Task 3: Make InlineFieldEditor responsive (Popover/Drawer)</name>
  <files>src/components/profile/InlineFieldEditor.tsx</files>
  <action>
Update InlineFieldEditor to use Popover on desktop and Drawer on mobile.

Changes:
1. Import useIsMobile hook
2. Import Drawer components from @/components/ui/drawer
3. Conditionally render Popover (desktop) or Drawer (mobile)
4. Drawer should be full-width with max-h-[85vh]
5. Keep all editing logic unchanged

Add imports:
```tsx
import { useIsMobile } from "@/hooks/use-mobile";
import {
  Drawer,
  DrawerContent,
  DrawerHeader,
  DrawerTitle,
  DrawerFooter,
} from "@/components/ui/drawer";
```

Pattern (following ResponsiveDialog pattern from codebase):
```tsx
const isMobile = useIsMobile();

// Mobile: Use Drawer
if (isMobile) {
  return (
    <Drawer open={isOpen} onOpenChange={setIsOpen}>
      <DrawerContent className="max-h-[85vh]">
        <DrawerHeader>
          <DrawerTitle>{label}</DrawerTitle>
        </DrawerHeader>
        <div className="p-4">
          {/* renderInput content */}
          {renderInput(editValue, setEditValue)}
        </div>
        <DrawerFooter className="flex-row gap-2">
          <Button variant="outline" onClick={() => setIsOpen(false)}>
            {t("cancel")}
          </Button>
          <Button onClick={handleSave} disabled={isSaving}>
            {t("save")}
          </Button>
        </DrawerFooter>
      </DrawerContent>
    </Drawer>
  );
}

// Desktop: Keep existing Popover
return (
  <Popover open={isOpen} onOpenChange={setIsOpen}>
    {/* existing Popover content */}
  </Popover>
);
```

Trigger remains the same for both - the button that opens the editor.
Drawer trigger is implicit (controlled via open/onOpenChange).

Important: The trigger button must still render outside the conditional.
Structure should be:
1. Trigger button (always renders)
2. isMobile ? Drawer : Popover for the content

Ensure Save/Cancel buttons in drawer have min-h-11 for touch targets.
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>InlineFieldEditor shows Drawer on mobile, Popover on desktop</done>
</task>

</tasks>

<verification>
- [ ] `npx tsc --noEmit` passes
- [ ] AIChatInput buttons are h-11 w-11 (44px)
- [ ] QuickReplyButtons has gap-2 and horizontal scroll
- [ ] InlineFieldEditor conditionally renders Drawer on mobile
- [ ] All touch targets meet 44px minimum
</verification>

<success_criteria>
- Chat input send/stop buttons are 44px touch targets
- Quick reply buttons scroll horizontally with 8px gap
- Inline field editor shows full-screen drawer on mobile
- All interactive elements are easily tappable
</success_criteria>

<output>
After completion, create `.planning/phases/45-mobile-experience/45-02-SUMMARY.md`
</output>
