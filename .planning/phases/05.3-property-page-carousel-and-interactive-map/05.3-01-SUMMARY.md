---
phase: 05.3-property-page-carousel-and-interactive-map
plan: 01
subsystem: database, ui
tags: [convex, schema, carousel, embla-carousel, shadcn, coordinates, geolocation]

# Dependency graph
requires:
  - phase: 05.2
    provides: 15 mock properties with Israeli city data
provides:
  - Property schema with latitude/longitude fields
  - PropertyImageCarousel component with Shadcn Carousel
  - Seed data with real Israeli city coordinates
affects: [05.3-02 (interactive map), property detail page]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - Carousel with embla-carousel-react via Shadcn
    - Dot indicators using carousel API state

key-files:
  created:
    - src/components/properties/PropertyImageCarousel.tsx
  modified:
    - convex/schema.ts
    - convex/seedData.ts

key-decisions:
  - "Optional lat/lng fields to support existing properties without coordinates"
  - "Navigation buttons inside image with semi-transparent background"
  - "Single-image mode hides carousel controls"

patterns-established:
  - "Carousel API usage for slide tracking and dot indicators"

issues-created: []

# Metrics
duration: 4min
completed: 2026-01-14
---

# Phase 5.3 Plan 01: Schema + Carousel Summary

**Property schema extended with coordinates, seed data updated with 9 Israeli cities, PropertyImageCarousel component with navigation and dot indicators**

## Performance

- **Duration:** 4 min
- **Started:** 2026-01-14T18:21:52Z
- **Completed:** 2026-01-14T18:26:11Z
- **Tasks:** 3
- **Files modified:** 3

## Accomplishments

- Added latitude/longitude optional fields to property schema
- Updated all 15 mock properties with real Israeli city coordinates (with Â±0.01 variations)
- Created PropertyImageCarousel component with full carousel functionality

## Task Commits

Each task was committed atomically:

1. **Task 1: Add latitude/longitude to property schema** - `5461442` (feat)
2. **Task 2: Update seed data with coordinates** - `270519b` (feat)
3. **Task 3: Create PropertyImageCarousel component** - `8105f74` (feat)

## Files Created/Modified

- `convex/schema.ts` - Added optional latitude and longitude number fields
- `convex/seedData.ts` - Added coordinates to all 15 properties across 9 cities
- `src/components/properties/PropertyImageCarousel.tsx` - New carousel component

## PropertyImageCarousel Features

- Props: `images: string[]`, `title: string`, `className?: string`
- Navigation buttons positioned inside (left-4, right-4) with semi-transparent bg
- Dot indicators below showing current slide position
- Fallback placeholder when no images provided
- Single-image mode (hides controls when only 1 image)
- Loop enabled for continuous navigation
- Uses Shadcn Carousel with embla-carousel-react

## Coordinates Added

| City | Latitude | Longitude |
|------|----------|-----------|
| Tel Aviv | 32.0853 | 34.7818 |
| Jerusalem | 31.7683 | 35.2137 |
| Herzliya | 32.1667 | 34.8417 |
| Haifa | 32.7940 | 34.9896 |
| Netanya | 32.3286 | 34.8550 |
| Ra'anana | 32.1844 | 34.8706 |
| Ashdod | 31.8044 | 34.6554 |
| Beer Sheva | 31.2530 | 34.7915 |
| Eilat | 29.5581 | 34.9482 |

## Decisions Made

- Made latitude/longitude optional to support existing properties without coordinates
- Navigation buttons inside image (not outside) for better UX
- Single-image mode automatically hides carousel controls

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None

## Next Phase Readiness

- Schema ready for map display with coordinates
- Carousel component ready to replace static image gallery
- Ready for 05.3-02: Interactive Map integration

---
*Phase: 05.3-property-page-carousel-and-interactive-map*
*Completed: 2026-01-14*
