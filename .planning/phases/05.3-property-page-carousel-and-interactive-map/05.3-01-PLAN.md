---
phase: 05.3-property-page-carousel-and-interactive-map
plan: 01
type: execute
---

<objective>
Add coordinates to property schema, update seed data, and create an image carousel component.

Purpose: Enable location-based map display and replace static image gallery with interactive carousel.
Output: Schema migration with lat/lng, updated seed data, PropertyImageCarousel component.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05.2-mock-data-super-user/05.2-01-SUMMARY.md

**Key files:**
@convex/schema.ts
@convex/seedData.ts
@src/components/ui/carousel.tsx

**Tech stack available:**
- embla-carousel-react (already installed)
- Shadcn Carousel component exists

**Established patterns:**
- Property schema in convex/schema.ts
- Seed data in convex/seedData.ts with 15 Israeli properties
- Shadcn component patterns for UI

**Constraining decisions:**
- Phase 5.2: Created 15 mock properties across 9 Israeli cities
- Phase 4: Property card image height h-48 (192px)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add latitude/longitude to property schema</name>
  <files>convex/schema.ts</files>
  <action>
Add optional latitude and longitude fields to the properties table in the schema:
- latitude: v.optional(v.number()) - decimal degrees
- longitude: v.optional(v.number()) - decimal degrees
Add them after the "city" field in the Location section comment area.
Optional because existing properties may not have coordinates.
  </action>
  <verify>npx convex dev runs without schema errors</verify>
  <done>Schema includes latitude and longitude fields, Convex syncs successfully</done>
</task>

<task type="auto">
  <name>Task 2: Update seed data with coordinates</name>
  <files>convex/seedData.ts</files>
  <action>
Add latitude and longitude to all 15 mock properties in seedData.ts.
Use real Israeli city coordinates (approximate central locations):
- Tel Aviv: 32.0853, 34.7818
- Jerusalem: 31.7683, 35.2137
- Herzliya: 32.1667, 34.8417
- Haifa: 32.7940, 34.9896
- Netanya: 32.3286, 34.8550
- Ra'anana: 32.1844, 34.8706
- Ashdod: 31.8044, 34.6554
- Beer Sheva: 31.2530, 34.7915
- Eilat: 29.5581, 34.9482

Add slight variations (Â±0.01) per property to spread them on the map.
Update the MockProperty type to include latitude and longitude.
  </action>
  <verify>Run seed function and verify properties have coordinates via Convex dashboard</verify>
  <done>All 15 properties have latitude and longitude values in seed data</done>
</task>

<task type="auto">
  <name>Task 3: Create PropertyImageCarousel component</name>
  <files>src/components/properties/PropertyImageCarousel.tsx</files>
  <action>
Create a new PropertyImageCarousel component using Shadcn Carousel:

Props:
- images: string[] - array of image URLs
- title: string - property title for alt text
- className?: string - optional className for container

Features:
- Full-width carousel with aspect-video ratio
- Previous/Next navigation buttons (positioned inside the image, not outside)
- Dot indicators below showing current slide position
- Fallback placeholder when no images provided
- Property type badge overlay (top-left, like current implementation)
- Smooth slide transitions

Use Shadcn Carousel components (Carousel, CarouselContent, CarouselItem, CarouselPrevious, CarouselNext).
Position nav buttons inside the carousel (left-4, right-4) with semi-transparent background.
Add dot indicators using carousel API to track current slide.

Style to match existing property detail page aesthetic (rounded-lg, similar to current featuredImage section).
  </action>
  <verify>Component exports correctly, TypeScript compiles without errors</verify>
  <done>PropertyImageCarousel component created with carousel functionality, navigation, and dot indicators</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npx convex dev` syncs schema without errors
- [ ] Seed data includes coordinates for all properties
- [ ] PropertyImageCarousel component compiles without TypeScript errors
- [ ] Component is exported from its file
</verification>

<success_criteria>

- Property schema has latitude/longitude fields
- All 15 seed properties have coordinates
- PropertyImageCarousel component created with full carousel functionality
- No TypeScript or build errors
</success_criteria>

<output>
After completion, create `.planning/phases/05.3-property-page-carousel-and-interactive-map/05.3-01-SUMMARY.md`
</output>
