---
phase: 29-css-logical-properties-migration
plan: 04
type: execute
wave: 2
depends_on: ["29-01", "29-02", "29-03"]
files_modified:
  - src/components/layout/AppShell.tsx
  - src/components/layout/Header.tsx
  - src/components/layout/Sidebar.tsx
  - src/components/layout/InvestorSearchBar.tsx
  - src/components/layout/TopNav.tsx
  - src/components/layout/MobileBottomNav.tsx
  - src/components/search/GlobalSearchBar.tsx
  - src/components/search/FilterChips.tsx
  - src/components/search/PropertyFiltersPanel.tsx
  - src/components/search/SearchInput.tsx
autonomous: true

must_haves:
  truths:
    - "App shell layout mirrors correctly in RTL mode"
    - "Header and navigation components align correctly in RTL"
    - "Search bar icons and inputs position correctly in RTL"
    - "Filter components maintain correct spacing in RTL"
  artifacts:
    - path: "src/components/layout/InvestorSearchBar.tsx"
      provides: "RTL-compatible search bar"
      contains: "ms-|me-|ps-|pe-|start-|end-"
    - path: "src/components/search/GlobalSearchBar.tsx"
      provides: "RTL-compatible global search"
      contains: "ms-|me-|ps-|pe-|start-|end-"
  key_links:
    - from: "src/components/layout/AppShell.tsx"
      to: "src/components/ui/sidebar.tsx"
      via: "Sidebar composition"
      pattern: "Sidebar"
---

<objective>
Migrate layout and search components to CSS logical properties

Purpose: These components form the application shell and search functionality. They're used on every page and must work correctly in RTL for the app to be usable.

Output: All layout and search components use logical CSS properties.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/29-css-logical-properties-migration/29-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate layout components</name>
  <files>
    src/components/layout/AppShell.tsx
    src/components/layout/Header.tsx
    src/components/layout/Sidebar.tsx
    src/components/layout/InvestorSearchBar.tsx
    src/components/layout/TopNav.tsx
    src/components/layout/MobileBottomNav.tsx
  </files>
  <action>
Migrate AppShell.tsx (2 directional classes):
- Convert any `ml-`/`mr-` to `ms-`/`me-` for content margins
- Convert any `pl-`/`pr-` to `ps-`/`pe-` for content padding

Migrate Header.tsx (2 directional classes):
- Convert any `ml-`/`mr-` to `ms-`/`me-` for logo/nav spacing
- Convert any `left-`/`right-` positioning to `start-`/`end-`

Migrate Sidebar.tsx (3 directional classes):
- Convert `ml-`/`mr-` to `ms-`/`me-` for item spacing
- Convert `pl-`/`pr-` to `ps-`/`pe-` for content padding
- Convert any border classes to logical

Migrate InvestorSearchBar.tsx (10 directional classes - high priority):
- Convert all `pl-`/`pr-` to `ps-`/`pe-` for input padding
- Convert all `ml-`/`mr-` to `ms-`/`me-` for icon/button spacing
- Convert `left-`/`right-` positioning to `start-`/`end-` for icons
- Add `rtl:space-x-reverse` if using `space-x-*`

Migrate TopNav.tsx (1 directional class):
- Convert any directional classes to logical

Migrate MobileBottomNav.tsx (1 directional class):
- Convert any directional classes to logical
  </action>
  <verify>
Run `npm run build` - no TypeScript errors.
Grep check:
`grep -E "(ml-|mr-|pl-|pr-|left-[0-9]|right-[0-9])" src/components/layout/*.tsx`
Should return empty or minimal matches.
  </verify>
  <done>
All layout components use logical properties.
InvestorSearchBar search icon and input padding are logical.
Sidebar content margins are logical.
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate search components</name>
  <files>
    src/components/search/GlobalSearchBar.tsx
    src/components/search/FilterChips.tsx
    src/components/search/PropertyFiltersPanel.tsx
    src/components/search/SearchInput.tsx
  </files>
  <action>
Migrate GlobalSearchBar.tsx (11 directional classes - highest priority):
- Convert all `pl-`/`pr-` to `ps-`/`pe-` for input and result padding
- Convert all `ml-`/`mr-` to `ms-`/`me-` for icon and result spacing
- Convert `left-`/`right-` positioning to `start-`/`end-` for search icon
- Add `rtl:space-x-reverse` to any `space-x-*` containers
- Pay attention to result list item spacing

Migrate FilterChips.tsx (2 directional classes):
- Convert `ml-`/`mr-` to `ms-`/`me-` for chip spacing
- Add `rtl:space-x-reverse` if using `space-x-*`

Migrate PropertyFiltersPanel.tsx (4 directional classes):
- Convert all `pl-`/`pr-` to `ps-`/`pe-` for field padding
- Convert all `ml-`/`mr-` to `ms-`/`me-` for element spacing

Migrate SearchInput.tsx (4 directional classes):
- Convert `pl-`/`pr-` to `ps-`/`pe-` for input padding
- Convert `left-`/`right-` icon positioning to `start-`/`end-`
  </action>
  <verify>
Run `npm run build` - no TypeScript errors.
Grep check:
`grep -E "(ml-|mr-|pl-|pr-|left-[0-9]|right-[0-9])" src/components/search/*.tsx`
Should return empty.
  </verify>
  <done>
GlobalSearchBar input and results use logical properties.
FilterChips use logical margins between chips.
PropertyFiltersPanel uses logical padding.
SearchInput icon positioned with start-/end-.
  </done>
</task>

</tasks>

<verification>
1. Build passes: `npm run build`
2. No physical directional classes in layout or search components
3. Search functionality works correctly in RTL mode
</verification>

<success_criteria>
- [ ] AppShell content area uses logical margins
- [ ] Header uses logical spacing
- [ ] InvestorSearchBar (10 classes) fully migrated
- [ ] GlobalSearchBar (11 classes) fully migrated
- [ ] All search/filter components migrated
- [ ] Build passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/29-css-logical-properties-migration/29-04-SUMMARY.md`
</output>
