---
phase: 29-css-logical-properties-migration
plan: 11
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/chat/ChatMessage.tsx
  - src/components/questionnaire/AnswerArea.tsx
  - src/components/questionnaire/QuestionBubble.tsx
  - src/components/ui/navigation-menu.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Chat message bubbles have correct corner styling in RTL mode"
    - "Questionnaire bubbles have correct corner styling in RTL mode"
    - "Navigation menu indicator has correct corner styling in RTL mode"
  artifacts:
    - path: "src/components/chat/ChatMessage.tsx"
      provides: "RTL-aware chat bubble corners"
      contains: "rounded-ee-sm"
    - path: "src/components/questionnaire/AnswerArea.tsx"
      provides: "RTL-aware answer bubble corners"
      contains: "rounded-ee-sm"
    - path: "src/components/questionnaire/QuestionBubble.tsx"
      provides: "RTL-aware question bubble corners"
      contains: "rounded-ss-sm"
    - path: "src/components/ui/navigation-menu.tsx"
      provides: "RTL-aware indicator corners"
      contains: "rounded-ss-sm"
  key_links:
    - from: "Chat bubbles"
      to: "RTL direction"
      via: "Logical rounded corner classes"
      pattern: "rounded-(ss|se|es|ee)-"
---

<objective>
Fix remaining rounded corner classes that were missed during the main migration.

Purpose: Complete RTL-02 requirement by converting the last 4 files with physical rounded corner classes to logical properties.
Output: All directional rounded corner classes use logical properties (rounded-ss-*, rounded-se-*, rounded-es-*, rounded-ee-*) that auto-flip in RTL mode.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Gap source
@.planning/phases/29-css-logical-properties-migration/29-VERIFICATION.md
</context>

<reference>
## Rounded Corner Logical Property Mapping

Physical to logical mapping for rounded corners:
- `rounded-tl-*` (top-left) -> `rounded-ss-*` (start-start)
- `rounded-tr-*` (top-right) -> `rounded-se-*` (start-end)
- `rounded-bl-*` (bottom-left) -> `rounded-es-*` (end-start)
- `rounded-br-*` (bottom-right) -> `rounded-ee-*` (end-end)

In RTL mode:
- `rounded-ss-*` renders as top-right (start is right in RTL)
- `rounded-se-*` renders as top-left (end is left in RTL)
- `rounded-es-*` renders as bottom-right
- `rounded-ee-*` renders as bottom-left

This ensures chat bubble "tails" point correctly in both LTR and RTL modes.
</reference>

<tasks>

<task type="auto">
  <name>Task 1: Fix ChatMessage rounded corners</name>
  <files>src/components/chat/ChatMessage.tsx</files>
  <action>
    Update the chat message bubble classes:

    Line 85 (own message bubble):
    - Change: `rounded-2xl rounded-br-sm`
    - To: `rounded-2xl rounded-ee-sm`

    Line 86 (other's message bubble):
    - Change: `rounded-2xl rounded-bl-sm`
    - To: `rounded-2xl rounded-es-sm`

    This ensures:
    - Own messages (right-aligned in LTR): tail points bottom-right in LTR, bottom-left in RTL
    - Other's messages (left-aligned in LTR): tail points bottom-left in LTR, bottom-right in RTL
  </action>
  <verify>
    grep -n "rounded-ee-sm\|rounded-es-sm" src/components/chat/ChatMessage.tsx
    # Should show 2 matches on lines 85-86

    grep -n "rounded-br-sm\|rounded-bl-sm" src/components/chat/ChatMessage.tsx
    # Should show 0 matches
  </verify>
  <done>ChatMessage.tsx uses rounded-ee-sm for own messages and rounded-es-sm for others</done>
</task>

<task type="auto">
  <name>Task 2: Fix questionnaire bubble corners</name>
  <files>src/components/questionnaire/AnswerArea.tsx, src/components/questionnaire/QuestionBubble.tsx</files>
  <action>
    Update AnswerArea.tsx line 31:
    - Change: `rounded-2xl rounded-br-sm`
    - To: `rounded-2xl rounded-ee-sm`

    Update QuestionBubble.tsx line 63:
    - Change: `rounded-2xl rounded-tl-sm`
    - To: `rounded-2xl rounded-ss-sm`

    This ensures:
    - Answer bubbles (user input, right-aligned): tail points bottom-right in LTR, bottom-left in RTL
    - Question bubbles (assistant, left-aligned): tail points top-left in LTR, top-right in RTL
  </action>
  <verify>
    grep -n "rounded-ee-sm" src/components/questionnaire/AnswerArea.tsx
    # Should show 1 match

    grep -n "rounded-ss-sm" src/components/questionnaire/QuestionBubble.tsx
    # Should show 1 match

    grep -n "rounded-br-sm\|rounded-tl-sm" src/components/questionnaire/
    # Should show 0 matches
  </verify>
  <done>AnswerArea uses rounded-ee-sm, QuestionBubble uses rounded-ss-sm</done>
</task>

<task type="auto">
  <name>Task 3: Fix navigation menu indicator corner</name>
  <files>src/components/ui/navigation-menu.tsx</files>
  <action>
    Update NavigationMenuIndicator line 153:
    - Change: `rounded-tl-sm`
    - To: `rounded-ss-sm`

    This is the small arrow/triangle indicator that shows under the active menu item.
    The top-left corner rounding should flip to top-right in RTL.
  </action>
  <verify>
    grep -n "rounded-ss-sm" src/components/ui/navigation-menu.tsx
    # Should show 1 match

    grep -n "rounded-tl-sm" src/components/ui/navigation-menu.tsx
    # Should show 0 matches
  </verify>
  <done>NavigationMenuIndicator uses rounded-ss-sm for RTL-aware corner styling</done>
</task>

</tasks>

<verification>
## Verification Commands

```bash
# Verify no physical rounded corner classes remain in these files
grep -rn "rounded-tl-\|rounded-tr-\|rounded-bl-\|rounded-br-" \
  src/components/chat/ChatMessage.tsx \
  src/components/questionnaire/AnswerArea.tsx \
  src/components/questionnaire/QuestionBubble.tsx \
  src/components/ui/navigation-menu.tsx
# Expected: No matches

# Verify logical rounded corner classes are in place
grep -rn "rounded-ss-\|rounded-se-\|rounded-es-\|rounded-ee-" \
  src/components/chat/ChatMessage.tsx \
  src/components/questionnaire/AnswerArea.tsx \
  src/components/questionnaire/QuestionBubble.tsx \
  src/components/ui/navigation-menu.tsx
# Expected: 5 matches total

# Verify build succeeds
npm run build
```
</verification>

<success_criteria>
- [ ] ChatMessage.tsx: `rounded-br-sm` -> `rounded-ee-sm`, `rounded-bl-sm` -> `rounded-es-sm`
- [ ] AnswerArea.tsx: `rounded-br-sm` -> `rounded-ee-sm`
- [ ] QuestionBubble.tsx: `rounded-tl-sm` -> `rounded-ss-sm`
- [ ] navigation-menu.tsx: `rounded-tl-sm` -> `rounded-ss-sm`
- [ ] Build succeeds with no errors
- [ ] Zero physical rounded corner classes in target files
</success_criteria>

<output>
After completion, create `.planning/phases/29-css-logical-properties-migration/29-11-SUMMARY.md`
</output>
