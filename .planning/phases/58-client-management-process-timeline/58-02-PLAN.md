# Plan 58-02: Process Timeline Visualization with Stage Transitions

## Overview

Build a reusable visual process timeline component showing the 7-stage deal flow, with the current stage highlighted and transition dates displayed. Integrate into the client detail page.

## Changes

### 1. Process Timeline Component (src/components/deal/ProcessTimeline.tsx — NEW)

Reusable timeline visualization:

**Props:**
- `currentStage: string` — current deal stage key
- `stageHistory: Array<{ stage: string; timestamp: number; note?: string }>` — transition history
- `createdAt: number` — deal creation timestamp

**Visual Design:**
- Horizontal stepper on desktop, vertical on mobile
- 7 steps matching DEAL_STAGES from deal-constants.ts
- Each step shows: stage icon/number, label, transition date (if available)
- States: completed (green checkmark), current (blue pulse), upcoming (gray), cancelled (red X)
- Connect steps with lines (solid for completed, dashed for upcoming)
- Use Tailwind + Framer Motion for animations
- RTL-safe layout

**Stage mapping:**
1. Interest → 2. Broker Assigned → 3. Mortgage → 4. Legal → 5. Closing → 6. Completed
- Cancelled shown as overlay/badge if deal is cancelled

**Date display:**
- Parse stageHistory to find transition date for each stage
- Format dates using locale-aware formatting (Intl.DateTimeFormat)
- Show relative time for recent transitions ("2 days ago")
- Show "—" for future stages

### 2. Integration: Client Detail Page

- Import ProcessTimeline into ClientDetailContent.tsx
- Render below each deal card
- Pass deal.stage, deal.stageHistory, deal.createdAt

### 3. Integration: Deal Detail Page (existing)

- Add ProcessTimeline to existing deal detail view
- Same props pattern

### 4. i18n (messages/en.json + messages/he.json)

Add `processTimeline` namespace:
- Stage labels (if not already in deal namespace)
- Date formatting strings
- Status labels (completed, current, upcoming, cancelled)
- ~20 keys per language

## Verification

- [ ] `npx tsc --noEmit` passes
- [ ] Timeline renders all 7 stages
- [ ] Current stage is highlighted
- [ ] Transition dates display correctly
- [ ] Responsive: horizontal desktop, vertical mobile
- [ ] RTL layout works
- [ ] i18n complete for EN and HE
