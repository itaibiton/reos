---
phase: 34.1-translate-all-pages-content
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/properties/MortgageCalculator.tsx
  - src/components/feed/PropertySelector.tsx
  - src/components/feed/RepostDialog.tsx
  - messages/en.json
  - messages/he.json
autonomous: true

must_haves:
  truths:
    - "MortgageCalculator displays all labels in selected locale"
    - "PropertySelector displays empty states and placeholders in selected locale"
    - "RepostDialog displays dialog text and visibility options in selected locale"
    - "Status labels in PropertySelector use common.propertyStatus translations"
    - "Role labels in RepostDialog use common.roles translations"
  artifacts:
    - path: "messages/en.json"
      provides: "properties.mortgage and feed.propertySelector translation keys"
      contains: "mortgage"
    - path: "messages/he.json"
      provides: "Hebrew translations for mortgage and property selector"
      contains: "mortgage"
  key_links:
    - from: "src/components/properties/MortgageCalculator.tsx"
      to: "messages/*/json"
      via: "useTranslations('properties')"
      pattern: "useTranslations.*properties"
    - from: "src/components/feed/PropertySelector.tsx"
      to: "messages/*/json"
      via: "useTranslations('feed') and useTranslations('common')"
      pattern: "useTranslations"
---

<objective>
Translate MortgageCalculator, PropertySelector, and RepostDialog components.

Purpose: These MEDIUM priority components are part of property details and feed posting flows. Users encounter them during key workflows.

Output: 3 translated components using ~28 new translation keys across properties.mortgage, feed.propertySelector, and feed.share namespaces.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/34.1-translate-all-pages-content/34.1-RESEARCH.md
@messages/en.json
@messages/he.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add mortgage, property selector, and repost translation keys</name>
  <files>messages/en.json, messages/he.json</files>
  <action>
Add to properties namespace in BOTH en.json and he.json:

```json
"mortgage": {
  "title": "Mortgage Calculator" / "מחשבון משכנתא",
  "propertyPrice": "Property Price" / "מחיר הנכס",
  "downPayment": "Down Payment" / "הון עצמי",
  "interestRate": "Interest Rate (%)" / "ריבית (%)",
  "loanTerm": "Loan Term" / "תקופת ההלוואה",
  "years": "{count} years" / "{count} שנים",
  "selectTerm": "Select term" / "בחר תקופה",
  "monthlyPayment": "Monthly Payment" / "תשלום חודשי",
  "loanAmount": "Loan Amount" / "סכום ההלוואה",
  "totalInterest": "Total Interest" / "סה\"כ ריבית",
  "totalPayment": "Total Payment" / "סה\"כ תשלום"
}
```

Add to feed namespace in BOTH en.json and he.json:

```json
"propertySelector": {
  "noProperties": "You haven't listed any properties yet" / "עדיין לא פרסמת נכסים",
  "addPropertyFirst": "Add a property listing first to share it in your feed" / "הוסף פרסום נכס כדי לשתף אותו בפיד",
  "searchProperties": "Search properties..." / "חיפוש נכסים...",
  "noMatch": "No properties match your search" / "לא נמצאו נכסים תואמים",
  "untitledProperty": "Untitled Property" / "נכס ללא שם",
  "unknown": "Unknown" / "לא ידוע"
},
"repost": {
  "title": "Repost" / "שתף מחדש",
  "addComment": "Add a comment (optional)" / "הוסף תגובה (אופציונלי)",
  "addThoughts": "Add your thoughts..." / "הוסף את המחשבות שלך...",
  "whoCanSee": "Who can see this repost?" / "מי יכול לראות את השיתוף?",
  "publicEveryone": "Public - Everyone" / "ציבורי - כולם",
  "followersOnly": "Followers Only" / "עוקבים בלבד",
  "originalPost": "Original post" / "פוסט מקורי",
  "serviceRequest": "Service Request" / "בקשת שירות",
  "reposting": "Reposting..." / "משתף מחדש...",
  "repost": "Repost" / "שתף מחדש"
}
```

Ensure keys are added to BOTH files with appropriate English/Hebrew values.
  </action>
  <verify>Run `grep -c "mortgage" messages/en.json` returns increased count. Run `grep -c "משכנתא" messages/he.json` returns > 0.</verify>
  <done>Both en.json and he.json contain all new translation keys for mortgage calculator, property selector, and repost dialog.</done>
</task>

<task type="auto">
  <name>Task 2: Translate MortgageCalculator component</name>
  <files>src/components/properties/MortgageCalculator.tsx</files>
  <action>
Import useTranslations from next-intl at the top of the file.

Inside MortgageCalculator function, add:
```typescript
const t = useTranslations("properties.mortgage");
```

Replace hardcoded strings:
- `<h3 className="font-semibold">Mortgage Calculator</h3>` -> `<h3 className="font-semibold">{t("title")}</h3>`
- `<Label htmlFor="price">Property Price</Label>` -> `<Label htmlFor="price">{t("propertyPrice")}</Label>`
- `<Label>Down Payment</Label>` -> `<Label>{t("downPayment")}</Label>`
- `<Label htmlFor="interestRate">Interest Rate (%)</Label>` -> `<Label htmlFor="interestRate">{t("interestRate")}</Label>`
- `<Label htmlFor="termYears">Loan Term</Label>` -> `<Label htmlFor="termYears">{t("loanTerm")}</Label>`
- `<SelectValue placeholder="Select term" />` -> `<SelectValue placeholder={t("selectTerm")} />`
- `<SelectItem value="15">15 years</SelectItem>` -> `<SelectItem value="15">{t("years", { count: 15 })}</SelectItem>`
- `<SelectItem value="20">20 years</SelectItem>` -> `<SelectItem value="20">{t("years", { count: 20 })}</SelectItem>`
- `<SelectItem value="25">25 years</SelectItem>` -> `<SelectItem value="25">{t("years", { count: 25 })}</SelectItem>`
- `<SelectItem value="30">30 years</SelectItem>` -> `<SelectItem value="30">{t("years", { count: 30 })}</SelectItem>`
- `<p className="text-sm text-muted-foreground mb-1">Monthly Payment</p>` -> `<p className="text-sm text-muted-foreground mb-1">{t("monthlyPayment")}</p>`
- `<p className="text-sm text-muted-foreground">Loan Amount</p>` -> `<p className="text-sm text-muted-foreground">{t("loanAmount")}</p>`
- `<p className="text-sm text-muted-foreground">Total Interest</p>` -> `<p className="text-sm text-muted-foreground">{t("totalInterest")}</p>`
- `<p className="text-sm text-muted-foreground">Total Payment</p>` -> `<p className="text-sm text-muted-foreground">{t("totalPayment")}</p>`

Keep the "$" currency symbol as-is (part of formatting, not translation).
  </action>
  <verify>Navigate to a property detail page, view MortgageCalculator, switch to Hebrew locale, verify all labels display in Hebrew.</verify>
  <done>MortgageCalculator displays localized labels based on current locale.</done>
</task>

<task type="auto">
  <name>Task 3: Translate PropertySelector and RepostDialog components</name>
  <files>src/components/feed/PropertySelector.tsx, src/components/feed/RepostDialog.tsx</files>
  <action>
**PropertySelector.tsx:**
Import useTranslations from next-intl.

Inside PropertySelector function, add:
```typescript
const t = useTranslations("feed.propertySelector");
const tStatus = useTranslations("common.propertyStatus");
```

Replace hardcoded strings:
- `"You haven't listed any properties yet"` -> `{t("noProperties")}`
- `"Add a property listing first to share it in your feed"` -> `{t("addPropertyFirst")}`
- `placeholder="Search properties..."` -> `placeholder={t("searchProperties")}`
- `"No properties match your search"` -> `{t("noMatch")}`
- `{property.title || "Untitled Property"}` -> `{property.title || t("untitledProperty")}`
- `{property.city || "Unknown"}` -> `{property.city || t("unknown")}`

Replace status badge:
- `{property.status || "available"}` -> `{tStatus(property.status || "available")}`

**RepostDialog.tsx:**
Import useTranslations from next-intl.

Inside RepostDialog function, add:
```typescript
const t = useTranslations("feed.repost");
const tRoles = useTranslations("common.roles");
const tActions = useTranslations("common.actions");
```

Replace ROLE_LABELS constant usage with tRoles:
```typescript
const roleKeyMap: Record<string, string> = {
  investor: "investor",
  broker: "broker",
  mortgage_advisor: "mortgageAdvisor",
  lawyer: "lawyer",
};
const roleLabel = post.authorRole
  ? tRoles(roleKeyMap[post.authorRole] || post.authorRole)
  : undefined;
```

Replace hardcoded strings:
- `<DialogTitle>Repost</DialogTitle>` -> `<DialogTitle>{t("title")}</DialogTitle>`
- `<Label htmlFor="repost-comment">Add a comment (optional)</Label>` -> `<Label htmlFor="repost-comment">{t("addComment")}</Label>`
- `placeholder="Add your thoughts..."` -> `placeholder={t("addThoughts")}`
- `<Label>Who can see this repost?</Label>` -> `<Label>{t("whoCanSee")}</Label>`
- `<SelectItem value="public">Public - Everyone</SelectItem>` -> `<SelectItem value="public">{t("publicEveryone")}</SelectItem>`
- `<SelectItem value="followers_only">Followers Only</SelectItem>` -> `<SelectItem value="followers_only">{t("followersOnly")}</SelectItem>`
- `<Label className="text-muted-foreground">Original post</Label>` -> `<Label className="text-muted-foreground">{t("originalPost")}</Label>`
- `Service Request` badge -> `{t("serviceRequest")}`
- `<Button variant="outline" onClick={handleClose} disabled={isSubmitting}>Cancel</Button>` -> use `{tActions("cancel")}`
- `{isSubmitting ? "Reposting..." : "Repost"}` -> `{isSubmitting ? t("reposting") : t("repost")}`

Remove the ROLE_LABELS constant since we now use translations.
  </action>
  <verify>Navigate to Feed page, open Create Post dialog with property selection, verify Hebrew text. Open share/repost dialog, verify Hebrew text.</verify>
  <done>PropertySelector and RepostDialog display localized text based on current locale, role labels use common.roles namespace.</done>
</task>

</tasks>

<verification>
1. Switch browser to Hebrew locale via LocaleSwitcher
2. Navigate to property detail page, scroll to MortgageCalculator
3. Verify all labels in Hebrew: "מחשבון משכנתא", "מחיר הנכס", "הון עצמי", etc.
4. Navigate to Feed page, click "Create Post"
5. Select "Property" tab, verify empty state or property list labels in Hebrew
6. Find a post and click share/repost, verify dialog in Hebrew
7. Run `npm run build` - verify no TypeScript errors
</verification>

<success_criteria>
- MortgageCalculator fully translated (12 keys)
- PropertySelector fully translated (6 keys)
- RepostDialog fully translated (10 keys)
- Status and role labels use common namespace translations
- Build passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/34.1-translate-all-pages-content/34.1-02-SUMMARY.md`
</output>
