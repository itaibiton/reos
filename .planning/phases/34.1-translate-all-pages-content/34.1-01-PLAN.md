---
phase: 34.1-translate-all-pages-content
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/notifications/NotificationCenter.tsx
  - src/components/chat/ConversationSelector.tsx
  - src/components/chat/NewConversationDialog.tsx
  - src/components/chat/AddMembersDialog.tsx
  - src/components/chat/GroupSettingsDialog.tsx
  - src/components/chat/DirectChatThread.tsx
  - messages/en.json
  - messages/he.json
autonomous: true

must_haves:
  truths:
    - "NotificationCenter displays all text in selected locale"
    - "Chat dialogs (new chat, new group, add members) display in selected locale"
    - "Group settings dialog displays in selected locale"
    - "Direct chat thread displays in selected locale"
    - "Role labels in chat components use common.roles translations"
  artifacts:
    - path: "messages/en.json"
      provides: "common.notifications and chat.* translation keys"
      contains: "notifications"
    - path: "messages/he.json"
      provides: "Hebrew translations for notifications and chat"
      contains: "notifications"
  key_links:
    - from: "src/components/notifications/NotificationCenter.tsx"
      to: "messages/*/json"
      via: "useTranslations('common')"
      pattern: "useTranslations.*common"
    - from: "src/components/chat/*.tsx"
      to: "messages/*/json"
      via: "useTranslations('chat') and useTranslations('common.roles')"
      pattern: "useTranslations"
---

<objective>
Translate NotificationCenter component and all chat dialog components (ConversationSelector, NewConversationDialog, AddMembersDialog, GroupSettingsDialog, DirectChatThread).

Purpose: These are high-traffic UI components that users interact with frequently. Hardcoded English strings prevent proper localization.

Output: 6 translated components using ~35 new translation keys across common.notifications and chat namespaces.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/34.1-translate-all-pages-content/34.1-RESEARCH.md
@messages/en.json
@messages/he.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add notification and chat translation keys to en.json/he.json</name>
  <files>messages/en.json, messages/he.json</files>
  <action>
Add to common namespace in BOTH en.json and he.json:

```json
"notifications": {
  "title": "Notifications" / "התראות",
  "markAllRead": "Mark all read" / "סמן הכל כנקרא",
  "loading": "Loading..." / "טוען...",
  "empty": "No notifications" / "אין התראות",
  "caughtUp": "You're all caught up!" / "הכל נקרא!"
}
```

Add to chat namespace in BOTH en.json and he.json:

```json
"conversations": {
  "search": "Search conversations..." / "חיפוש שיחות...",
  "newChat": "New Chat" / "צ'אט חדש",
  "newGroup": "New Group" / "קבוצה חדשה",
  "noConversations": "No conversations yet" / "אין שיחות עדיין",
  "noMatch": "No conversations match your search" / "לא נמצאו שיחות תואמות",
  "noMessages": "No messages yet" / "אין הודעות עדיין"
},
"newConversation": {
  "title": "New Conversation" / "שיחה חדשה",
  "titleGroup": "New Group" / "קבוצה חדשה",
  "selectUserDirect": "Select a user to start a conversation" / "בחר משתמש להתחלת שיחה",
  "selectUsersGroup": "Select users to create a new group" / "בחר משתמשים ליצירת קבוצה",
  "groupNameOptional": "Group Name (optional)" / "שם הקבוצה (אופציונלי)",
  "groupNamePlaceholder": "Enter group name..." / "הכנס שם קבוצה...",
  "searchUsers": "Search users..." / "חיפוש משתמשים...",
  "noUsersMatch": "No users match your search" / "לא נמצאו משתמשים תואמים",
  "noUsersAvailable": "No users available" / "אין משתמשים זמינים",
  "creating": "Creating..." / "יוצר...",
  "startChat": "Start Chat" / "התחל צ'אט",
  "createGroup": "Create Group" / "צור קבוצה",
  "selectAtLeastOne": "Please select at least one user" / "נא לבחור לפחות משתמש אחד",
  "selectAtLeastTwo": "Please select at least 2 users for a group" / "נא לבחור לפחות 2 משתמשים לקבוצה"
},
"addMembers": {
  "title": "Add Members" / "הוסף משתתפים",
  "description": "Select users to add to this group" / "בחר משתמשים להוספה לקבוצה",
  "noUsersToAdd": "No users available to add" / "אין משתמשים זמינים להוספה",
  "adding": "Adding..." / "מוסיף...",
  "addCount": "Add ({count})" / "הוסף ({count})"
},
"groupSettings": {
  "title": "Group Settings" / "הגדרות קבוצה",
  "groupName": "Group Name" / "שם הקבוצה",
  "members": "Members ({count})" / "משתתפים ({count})",
  "add": "Add" / "הוסף",
  "you": "(You)" / "(אתה)",
  "creator": "Creator" / "יוצר",
  "groupNameUpdated": "Group name updated" / "שם הקבוצה עודכן",
  "memberRemoved": "Member removed" / "משתתף הוסר",
  "membersAdded": "Members added" / "משתתפים נוספו",
  "leaveGroup": "Leave Group" / "עזוב קבוצה"
},
"directChat": {
  "participants": "{count} participants - Tap for settings" / "{count} משתתפים - לחץ להגדרות",
  "sendMessage": "Send a message to start the conversation" / "שלח הודעה להתחלת השיחה",
  "messagePlaceholder": "Message {name}..." / "הודעה ל{name}..."
}
```

Ensure keys are added to BOTH files with appropriate English/Hebrew values.
  </action>
  <verify>Run `grep -c "notifications" messages/en.json` returns increased count. Run `grep -c "התראות" messages/he.json` returns > 0.</verify>
  <done>Both en.json and he.json contain all new translation keys for notifications and chat conversations.</done>
</task>

<task type="auto">
  <name>Task 2: Translate NotificationCenter component</name>
  <files>src/components/notifications/NotificationCenter.tsx</files>
  <action>
Import useTranslations from next-intl at the top of the file.

Inside NotificationCenter function, add:
```typescript
const t = useTranslations("common");
```

Replace hardcoded strings:
- `"Notifications"` -> `{t("notifications.title")}`
- `"Mark all read"` -> `{t("notifications.markAllRead")}`
- `"Loading..."` -> `{t("notifications.loading")}`
- `"No notifications"` -> `{t("notifications.empty")}`
- `"You're all caught up!"` -> `{t("notifications.caughtUp")}`
- `<span className="sr-only">Notifications</span>` -> `<span className="sr-only">{t("notifications.title")}</span>`

Keep console.error messages as-is (developer-facing, not user-facing).
  </action>
  <verify>Open NotificationCenter in browser, switch to Hebrew locale, verify all text displays in Hebrew.</verify>
  <done>NotificationCenter displays localized text based on current locale.</done>
</task>

<task type="auto">
  <name>Task 3: Translate chat dialog components</name>
  <files>src/components/chat/ConversationSelector.tsx, src/components/chat/NewConversationDialog.tsx, src/components/chat/AddMembersDialog.tsx, src/components/chat/GroupSettingsDialog.tsx, src/components/chat/DirectChatThread.tsx</files>
  <action>
For each file, import useTranslations and replace hardcoded strings:

**ConversationSelector.tsx:**
- Add `const t = useTranslations("chat");` and `const tRoles = useTranslations("common.roles");`
- Replace `formatRole` function to use `tRoles(roleKeyMap[role])` where roleKeyMap maps snake_case to camelCase
- Replace: "Search conversations..." -> t("conversations.search")
- Replace: "New Chat" -> t("conversations.newChat")
- Replace: "New Group" -> t("conversations.newGroup")
- Replace: "No conversations yet" -> t("conversations.noConversations")
- Replace: "No conversations match your search" -> t("conversations.noMatch")
- Replace: "No messages yet" -> t("conversations.noMessages")

**NewConversationDialog.tsx:**
- Add `const t = useTranslations("chat");` and `const tRoles = useTranslations("common.roles");` and `const tActions = useTranslations("common.actions");`
- Replace formatRole to use tRoles
- Replace dialog title: isGroupMode ? t("newConversation.titleGroup") : t("newConversation.title")
- Replace description: isGroupMode ? t("newConversation.selectUsersGroup") : t("newConversation.selectUserDirect")
- Replace: "Group Name (optional)" -> t("newConversation.groupNameOptional")
- Replace: "Enter group name..." -> t("newConversation.groupNamePlaceholder")
- Replace: "Search users..." -> t("newConversation.searchUsers")
- Replace: "No users match your search" -> t("newConversation.noUsersMatch")
- Replace: "No users available" -> t("newConversation.noUsersAvailable")
- Replace: "Cancel" -> tActions("cancel")
- Replace: isCreating ? "Creating..." : isGroup ? "Create Group" : "Start Chat" -> isCreating ? t("newConversation.creating") : isGroup ? t("newConversation.createGroup") : t("newConversation.startChat")

**AddMembersDialog.tsx:**
- Add `const t = useTranslations("chat");` and `const tRoles = useTranslations("common.roles");` and `const tActions = useTranslations("common.actions");`
- Replace formatRole to use tRoles
- Replace: "Add Members" -> t("addMembers.title")
- Replace: "Select users to add to this group" -> t("addMembers.description")
- Replace: "Search users..." -> t("newConversation.searchUsers") (reuse)
- Replace: "No users match your search" -> t("newConversation.noUsersMatch")
- Replace: "No users available to add" -> t("addMembers.noUsersToAdd")
- Replace: "Cancel" -> tActions("cancel")
- Replace: isAdding ? "Adding..." : `Add (${count})` -> isAdding ? t("addMembers.adding") : t("addMembers.addCount", { count: selectedUserIds.length })

**GroupSettingsDialog.tsx:**
- Add `const t = useTranslations("chat");` and `const tRoles = useTranslations("common.roles");`
- Replace formatRole to use tRoles
- Replace: "Group Settings" -> t("groupSettings.title")
- Replace: "Group Name" -> t("groupSettings.groupName")
- Replace: "Enter group name..." -> t("newConversation.groupNamePlaceholder")
- Replace: `Members (${count})` -> t("groupSettings.members", { count: participants.length })
- Replace: "Add" -> t("groupSettings.add")
- Replace: "(You)" -> t("groupSettings.you")
- Replace: "Creator" -> t("groupSettings.creator")
- Replace: "Leave Group" -> t("groupSettings.leaveGroup")
- Replace toast messages: "Group name updated" -> t("groupSettings.groupNameUpdated"), "Member removed" -> t("groupSettings.memberRemoved"), "Members added" -> t("groupSettings.membersAdded")

**DirectChatThread.tsx:**
- Add `const t = useTranslations("chat");` and `const tRoles = useTranslations("common.roles");`
- Replace formatRole to use tRoles
- Replace: "{count} participants - Tap for settings" -> t("directChat.participants", { count: conversation?.participants?.length })
- Replace: "No messages yet" -> t("empty.noMessages")
- Replace: "Send a message to start the conversation" -> t("directChat.sendMessage")
- Replace placeholder: `Message ${displayName}...` -> t("directChat.messagePlaceholder", { name: displayName })

For all roleKeyMap objects, use:
```typescript
const roleKeyMap: Record<string, string> = {
  investor: "investor",
  broker: "broker",
  mortgage_advisor: "mortgageAdvisor",
  lawyer: "lawyer",
  admin: "admin",
};
```
  </action>
  <verify>Navigate to chat page in browser, switch to Hebrew locale, verify all dialog text, role labels, and empty states display in Hebrew.</verify>
  <done>All 5 chat components display localized text based on current locale, role labels use common.roles namespace.</done>
</task>

</tasks>

<verification>
1. Switch browser to Hebrew locale via LocaleSwitcher
2. Click notification bell - verify "התראות" title and "סמן הכל כנקרא" button
3. Navigate to Chat page
4. Click "New Chat" button - verify Hebrew dialog text
5. Click "New Group" button - verify Hebrew dialog text
6. Open existing group, click settings - verify Hebrew labels and role badges
7. Open direct chat - verify Hebrew role badges and placeholder
8. Run `npm run build` - verify no TypeScript errors
</verification>

<success_criteria>
- NotificationCenter fully translated (5 keys)
- All 5 chat components fully translated (~30 keys)
- Role labels use common.roles translations (not hardcoded maps)
- All toast messages translated
- Build passes with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/34.1-translate-all-pages-content/34.1-01-SUMMARY.md`
</output>
