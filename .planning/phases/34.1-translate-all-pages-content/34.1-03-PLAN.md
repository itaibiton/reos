---
phase: 34.1-translate-all-pages-content
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/chat/DealSelector.tsx
  - src/components/chat/LeaveGroupDialog.tsx
  - src/components/chat/DeleteGroupDialog.tsx
  - messages/en.json
  - messages/he.json
autonomous: true

must_haves:
  truths:
    - "DealSelector displays search placeholder and empty states in selected locale"
    - "LeaveGroupDialog displays confirmation text in selected locale"
    - "DeleteGroupDialog displays confirmation text in selected locale"
    - "Deal stage labels display in selected locale"
  artifacts:
    - path: "messages/en.json"
      provides: "chat.dealSelector translation keys"
      contains: "dealSelector"
    - path: "messages/he.json"
      provides: "Hebrew translations for deal selector"
      contains: "dealSelector"
  key_links:
    - from: "src/components/chat/DealSelector.tsx"
      to: "messages/*/json"
      via: "useTranslations('chat')"
      pattern: "useTranslations.*chat"
---

<objective>
Translate DealSelector, LeaveGroupDialog, and DeleteGroupDialog components, then verify all Phase 34.1 translations.

Purpose: Complete remaining chat-related components and ensure comprehensive translation coverage.

Output: 3 translated components using ~12 new translation keys, plus full verification of all Phase 34.1 work.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/34.1-translate-all-pages-content/34.1-RESEARCH.md
@messages/en.json
@messages/he.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add deal selector and group dialog translation keys</name>
  <files>messages/en.json, messages/he.json</files>
  <action>
Add to chat namespace in BOTH en.json and he.json:

```json
"dealSelector": {
  "searchDeals": "Search deals..." / "חיפוש עסקאות...",
  "noActiveDeals": "No active deals" / "אין עסקאות פעילות",
  "noMatch": "No deals match your search" / "לא נמצאו עסקאות תואמות",
  "property": "Property" / "נכס",
  "unknown": "Unknown" / "לא ידוע"
}
```

Verify existing chat.group namespace has leave/delete keys (should exist from Phase 31):
- group.leaveTitle: "Leave \"{groupName}\"?"
- group.leaveConfirm: "You won't be able to see messages from this group anymore..."
- group.leaving: "Leaving..."
- group.deleteTitle: "Delete \"{groupName}\"?"
- group.deleteConfirm: "This will permanently delete the group..."
- group.deleting: "Deleting..."

If any are missing, add them. Ensure Hebrew translations exist for all.
  </action>
  <verify>Run `grep -c "dealSelector" messages/en.json` returns > 0. Run `grep "עסקאות" messages/he.json` returns matches.</verify>
  <done>Both en.json and he.json contain all translation keys for deal selector and group dialogs.</done>
</task>

<task type="auto">
  <name>Task 2: Translate DealSelector component</name>
  <files>src/components/chat/DealSelector.tsx</files>
  <action>
Import useTranslations from next-intl.

Inside DealSelector function, add:
```typescript
const t = useTranslations("chat.dealSelector");
const tDeals = useTranslations("deals.stages");
```

Replace hardcoded strings:
- `placeholder="Search deals..."` -> `placeholder={t("searchDeals")}`
- `"No active deals"` -> `{t("noActiveDeals")}`
- `"No deals match your search"` -> `{t("noMatch")}`
- `{deal.property?.title || "Property"}` -> `{deal.property?.title || t("property")}`
- `{deal.property?.city || "Unknown"}` -> `{deal.property?.city || t("unknown")}`

Replace deal stage label:
- `{stageInfo?.label || deal.stage}` -> Use tDeals to get translated stage label

The deal stages are already defined in deals.stages namespace from Phase 31. Use:
```typescript
const stageKeyMap: Record<string, string> = {
  interest: "interest",
  broker_assigned: "brokerAssigned",
  mortgage: "mortgage",
  legal: "legal",
  closing: "closing",
  completed: "completed",
  cancelled: "cancelled",
};
const stageLabel = tDeals(stageKeyMap[deal.stage] || deal.stage);
```

Note: Keep using stageInfo.color for styling, just replace the label.
  </action>
  <verify>Navigate to Chat page, open deal selector dropdown, switch to Hebrew locale, verify search placeholder and stage labels in Hebrew.</verify>
  <done>DealSelector displays localized text and deal stage labels based on current locale.</done>
</task>

<task type="auto">
  <name>Task 3: Translate LeaveGroupDialog and DeleteGroupDialog components</name>
  <files>src/components/chat/LeaveGroupDialog.tsx, src/components/chat/DeleteGroupDialog.tsx</files>
  <action>
**LeaveGroupDialog.tsx:**
Import useTranslations from next-intl.

Add:
```typescript
const t = useTranslations("chat.group");
const tActions = useTranslations("common.actions");
```

Replace hardcoded strings:
- Dialog title: use `t("leaveTitle", { groupName })`
- Dialog description: use `t("leaveConfirm")`
- Cancel button: use `tActions("cancel")`
- Leave button: use `isLeaving ? t("leaving") : t("leave")`
- Toast success: use `t("leftSuccess")`
- Toast error: use `t("leftError")`

**DeleteGroupDialog.tsx:**
Import useTranslations from next-intl.

Add:
```typescript
const t = useTranslations("chat.group");
const tActions = useTranslations("common.actions");
```

Replace hardcoded strings:
- Dialog title: use `t("deleteTitle", { groupName })`
- Dialog description: use `t("deleteConfirm")`
- Cancel button: use `tActions("cancel")`
- Delete button: use `isDeleting ? t("deleting") : t("delete")`
- Toast success: use `t("deletedSuccess")`
- Toast error: use `t("deletedError")`
  </action>
  <verify>Open a group chat, click settings, test Leave Group and Delete Group dialogs, verify Hebrew text in confirmation dialogs.</verify>
  <done>LeaveGroupDialog and DeleteGroupDialog display localized confirmation text and buttons based on current locale.</done>
</task>

</tasks>

<verification>
Full Phase 34.1 verification:

1. **NotificationCenter** (Plan 01):
   - Click notification bell, verify "התראות" title
   - Verify "סמן הכל כנקרא" button
   - Verify empty state in Hebrew

2. **Chat Components** (Plan 01 & 03):
   - Open Chat page, verify "צ'אט חדש", "קבוצה חדשה" buttons
   - Open New Conversation dialog, verify Hebrew labels
   - Open Add Members dialog, verify Hebrew labels
   - Open Group Settings, verify Hebrew labels
   - Test Leave Group dialog, verify Hebrew confirmation
   - Test Delete Group dialog, verify Hebrew confirmation
   - Verify deal selector search placeholder and stage labels

3. **MortgageCalculator** (Plan 02):
   - Navigate to property detail page
   - Verify all labels in Hebrew

4. **PropertySelector** (Plan 02):
   - Open Create Post dialog
   - Select Property tab
   - Verify empty state or search placeholder in Hebrew

5. **RepostDialog** (Plan 02):
   - Share a post
   - Verify dialog labels in Hebrew

6. **Final checks:**
   - Run `npm run build` - no errors
   - Run `npm run lint` - no warnings about hardcoded strings
   - Grep for common hardcoded patterns: `grep -r '"Loading"' src/components/` should return minimal results (only legitimate technical usage)
</verification>

<success_criteria>
- DealSelector fully translated (5 keys)
- LeaveGroupDialog fully translated (existing keys)
- DeleteGroupDialog fully translated (existing keys)
- All Phase 34.1 components verified working in Hebrew locale
- Build passes with no errors
- Requirements TRANS-04 and TRANS-05 satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/34.1-translate-all-pages-content/34.1-03-SUMMARY.md`
</output>
