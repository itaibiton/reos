---
phase: 47-landing-page-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/landing/Navigation/LandingNav.tsx
  - src/app/[locale]/(main)/layout.tsx
  - messages/en.json
  - messages/he.json
autonomous: true

must_haves:
  truths:
    - "Fixed navbar stays visible while scrolling through landing page"
    - "Mobile users can open hamburger menu and navigate to all sections"
    - "CTA button in navbar navigates to sign-up or contact section"
  artifacts:
    - path: "src/components/landing/Navigation/LandingNav.tsx"
      provides: "Fixed navbar with scroll detection, mobile menu, CTA"
      contains: "fixed top-0"
    - path: "src/app/[locale]/(main)/layout.tsx"
      provides: "Landing layout with padding for fixed navbar"
      contains: "pt-16"
  key_links:
    - from: "src/components/landing/Navigation/LandingNav.tsx"
      to: "sections in page.tsx"
      via: "hash anchor links (#hero, #features, #testimonials, #contact)"
      pattern: "href=\"#"
---

<objective>
Update navigation component for new landing page sections and ensure proper layout structure.

Purpose: The navbar needs to link to the correct sections for the v1.7 landing page (Hero, Features, Testimonials, Contact) and the layout needs proper spacing to accommodate the fixed navbar without content overlap.

Output: Updated LandingNav with correct section links, landing layout with proper navbar spacing.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/47-landing-page-foundation/47-RESEARCH.md

# Existing components to modify
@src/components/landing/Navigation/LandingNav.tsx
@src/app/[locale]/(main)/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update navbar section links for v1.7 landing page</name>
  <files>
    src/components/landing/Navigation/LandingNav.tsx
    messages/en.json
    messages/he.json
  </files>
  <action>
Update the navLinks array in LandingNav.tsx to match the v1.7 landing page sections:

```typescript
const navLinks: NavLink[] = [
  { href: "#features", labelKey: "features" },
  { href: "#testimonials", labelKey: "testimonials" },
  { href: "#contact", labelKey: "contact" },
];
```

Update the CTA button in CTAButtons component to scroll to contact section on click (for "Get Started" button), keeping sign-in as link to sign-in page:

```typescript
// In CTAButtons, change the "Get Started" button to:
<Button
  className={cn(
    "bg-landing-primary text-white hover:bg-landing-primary/90",
    "clip-corner-cut-tr",
    "transition-all duration-200"
  )}
  asChild
>
  <a href="#contact">{t("getStarted")}</a>
</Button>
```

Also update mobile nav CTA to use same pattern (scroll to #contact for Get Started).

Update translation files to add "testimonials" and "contact" keys under landing.nav:
- In messages/en.json, update landing.nav to include: "testimonials": "Testimonials", "contact": "Contact"
- In messages/he.json, update landing.nav to include: "testimonials": "המלצות", "contact": "צור קשר"

Remove old unused keys (services, pricing, team, faq) from nav links array but keep translations in case they're used elsewhere.
  </action>
  <verify>
Run `npm run dev` and verify:
1. Navbar shows Features, Testimonials, Contact links
2. Desktop "Get Started" button scrolls to #contact section
3. Mobile menu shows same links plus Sign In/Get Started buttons
4. No TypeScript errors: `npx tsc --noEmit`
  </verify>
  <done>
Navbar links updated for v1.7 sections, CTA scrolls to contact section, translations added for new nav items.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create proper landing layout with navbar spacing</name>
  <files>
    src/app/[locale]/(main)/layout.tsx
  </files>
  <action>
Update the (main)/layout.tsx to properly handle the fixed navbar spacing. The existing layout is a passthrough - update it to include proper structure:

```typescript
import { LandingNav } from "@/components/landing/Navigation";
import { Footer } from "@/components/landing/Footer";

export default function LandingLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <>
      <LandingNav />
      <main className="min-h-dvh">{children}</main>
      <Footer />
    </>
  );
}
```

Then update page.tsx to REMOVE the LandingNav and Footer imports since they're now in the layout:

Remove from page.tsx:
- `import { LandingNav } from "@/components/landing/Navigation";`
- `import { Footer } from "@/components/landing/Footer";`
- `<LandingNav />` component
- `<Footer />` component

Keep the main content sections in page.tsx.

Note: Do NOT add pt-16/pt-20 padding to main - the hero section should be full viewport height starting from top (under the transparent navbar). The fixed navbar has z-50 and will float over the hero. Content sections below hero will have their own padding.
  </action>
  <verify>
Run `npm run dev` and verify:
1. Landing page loads at localhost:3000/en
2. Navbar appears fixed at top with transparent background
3. Hero section starts at top of viewport (full 100vh/dvh)
4. Scrolling shows navbar becomes opaque with backdrop blur
5. Footer appears at bottom of page
6. No duplicate navbar or footer
  </verify>
  <done>
Landing layout properly structured with LandingNav and Footer, page.tsx simplified to content only.
  </done>
</task>

<task type="auto">
  <name>Task 3: Add smooth scroll behavior for section navigation</name>
  <files>
    src/app/globals.css
    src/components/landing/Navigation/LandingNav.tsx
  </files>
  <action>
Add smooth scroll CSS to globals.css if not already present:

```css
/* Smooth scroll for anchor links */
html {
  scroll-behavior: smooth;
}

/* Account for fixed navbar height when scrolling to sections */
:target {
  scroll-margin-top: 5rem; /* 80px to account for navbar height */
}
```

In LandingNav.tsx, update the anchor links to close mobile menu after click AND provide smooth scroll behavior:

```typescript
// In MobileNav component, update the onClick handler for links:
<a
  key={link.href}
  href={link.href}
  onClick={(e) => {
    // Let the browser handle the smooth scroll
    onClose();
  }}
  className={cn(
    "px-4 py-3 text-base font-medium",
    // ... rest of classes
  )}
>
```

This ensures mobile menu closes when user taps a section link, and CSS handles the smooth scrolling.
  </action>
  <verify>
1. Click a nav link on desktop - page smoothly scrolls to section
2. Click a nav link on mobile - menu closes AND page scrolls to section
3. Section heading is not hidden behind navbar after scroll (scroll-margin-top working)
4. Check CSS has scroll-behavior: smooth in globals.css
  </verify>
  <done>
Smooth scroll behavior enabled for section navigation with proper offset for fixed navbar.
  </done>
</task>

</tasks>

<verification>
After all tasks:
1. `npm run build` completes without errors
2. `npx tsc --noEmit` passes
3. Landing page at /en shows fixed navbar with Features, Testimonials, Contact links
4. Mobile hamburger menu works with smooth animations
5. "Get Started" CTA scrolls to contact section
6. Footer displays at bottom with all required elements
7. No layout shift when navbar transitions from transparent to opaque
</verification>

<success_criteria>
- Fixed navbar stays visible while scrolling (z-50, fixed positioning)
- Mobile hamburger menu opens/closes with Framer Motion animation
- CTA button scrolls to contact section
- Smooth scroll behavior for all section links
- No duplicate components (navbar/footer in layout only)
- Build passes, no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/47-landing-page-foundation/47-01-SUMMARY.md`
</output>
