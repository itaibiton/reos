# Milestone v1.0: MVP

**Status:** SHIPPED 2026-01-17
**Phases:** 1-8 (including decimal insertions: 1.1, 1.2, 1.3, 4.1, 5.1, 5.2, 5.3, 5.4, 6.1)
**Total Plans:** 40

## Overview

Building an end-to-end real estate investment platform connecting US investors with Israeli properties. The journey starts with foundational setup and authentication, moves through profile and marketplace systems, adds intelligent search, then implements the core deal flow orchestration, and culminates with dashboards and real-time communication features.

## Phases

### Phase 1: Foundation

**Goal**: Project scaffolding with Next.js, Convex backend connected, Shadcn/ui components, and base layout structure
**Depends on**: Nothing (first phase)
**Plans**: 2 plans

Plans:
- [x] 01-01: Project scaffolding (Next.js + Convex + Shadcn)
- [x] 01-02: Base layout (header, sidebar, main content)

### Phase 1.1: Integrate Shadcn (INSERTED)

**Goal**: Integrate Shadcn/ui with Hugeicons and Inter font
**Depends on**: Phase 1
**Plans**: 1 plan

Plans:
- [x] 01.1-01: Configure compact design system with Inter font and Hugeicons

### Phase 1.2: Add All Shadcn Components (INSERTED)

**Goal**: Install complete Shadcn component library
**Depends on**: Phase 1.1
**Plans**: 1 plan

Plans:
- [x] 01.2-01: Install all 53 Shadcn components

### Phase 1.3: Create Design System Page (INSERTED)

**Goal**: Design system documentation page showcasing all 53 Shadcn/ui components
**Depends on**: Phase 1.2
**Plans**: 1 plan

Plans:
- [x] 01.3-01: Design system page with component showcases

**Details:**
Created /design-system route with 5 category tabs (Buttons & Inputs, Layout, Feedback, Overlays, Data Display), interactive examples for 25+ components, and fixed Radix scroll-lock issue.

### Phase 2: Authentication

**Goal**: Clerk authentication with investor and service provider roles, protected routes, and Convex user sync
**Depends on**: Phase 1.3
**Plans**: 3 plans

Plans:
- [x] 02-01: Clerk installation + Convex integration
- [x] 02-02: User schema + sync functions
- [x] 02-03: Protected routes + auth UI

**Details:**
Uses ConvexProviderWithClerk for auth integration. Users table stores role (investor, broker, mortgage_advisor, lawyer). Auto-sync from Clerk on first sign-in. Route groups: (main) public landing, (auth) sign-in/sign-up, (app) protected pages with AppShell.

### Phase 3: Profiles

**Goal**: Investor profile builder (preferences, budget, criteria) and service provider registration (broker, mortgage, lawyer)
**Depends on**: Phase 2
**Plans**: 4 plans

Plans:
- [x] 03-01: Onboarding flow (role selection, redirect incomplete users)
- [x] 03-02: Investor profile schema + form
- [x] 03-03: Service provider profile schema + form
- [x] 03-04: Settings page with role-based routing

**Details:**
Onboarding captures user role at /onboarding. Investor profiles store investment preferences (property types, budget, risk tolerance, timeline). Service provider profiles store business info (company, license, specializations, service areas, languages). Settings page at /settings shows role-appropriate profile form in two-column layout.

### Phase 4: Property Marketplace

**Goal**: Property listing display with metrics, admin upload interface, detail pages, save/favorite functionality
**Depends on**: Phase 3
**Plans**: 4 plans

Plans:
- [x] 04-01: Property schema + admin upload form
- [x] 04-02: Property listings page (marketplace)
- [x] 04-03: Property detail page + favorites
- [x] 04-04: Navigation integration + verification

### Phase 4.1: Edit Property (INSERTED)

**Goal**: Edit existing property listings
**Depends on**: Phase 4
**Plans**: 1 plan

Plans:
- [x] 04.1-01: PropertyForm edit mode + edit page

**Details:**
Extended PropertyForm with mode prop (create/edit) and initialData prop for pre-populating fields. Created edit page at /properties/[id]/edit.

### Phase 5: Smart Search

**Goal**: Natural language search input parsed to structured property filters
**Depends on**: Phase 4
**Plans**: 3 plans

Plans:
- [x] 05-01: AI Parser Setup (Anthropic SDK + parseSearchQuery action)
- [x] 05-02: Enhanced Query (extend properties.list with full filters)
- [x] 05-03: Search UI (SearchInput, FilterChips, marketplace integration)

**Details:**
Uses Claude AI (Anthropic SDK) to parse natural language queries into structured PropertyFilters. parseSearchQuery Convex action handles the NL→filter conversion.

### Phase 5.1: Add Also Regular Filter (INSERTED)

**Goal**: Add traditional filter dropdowns/inputs alongside smart search
**Depends on**: Phase 5
**Plans**: 1 plan

Plans:
- [x] 05.1-01: PropertyFiltersPanel component with popover UI

**Details:**
Created PropertyFiltersPanel with Popover dropdown containing filter controls. Uses draft state pattern - changes only apply on "Apply Filters" button click.

### Phase 5.2: Mock Data & Super User (INSERTED)

**Goal**: Add mock data system, super user with role-switching dropdown, and Israeli property listings
**Depends on**: Phase 5.1
**Plans**: 1 plan

Plans:
- [x] 05.2-01: Admin role, seed data, role-switching UI

**Details:**
Added "admin" as 5th user role with viewingAsRole field for impersonation. Created 15 mock Israeli properties across 9 cities.

### Phase 5.3: Property Page Carousel and Interactive Map (INSERTED)

**Goal**: Replace static image display with interactive carousel and add property location map
**Depends on**: Phase 5.2
**Plans**: 2 plans

Plans:
- [x] 05.3-01: Schema coordinates + seed data + PropertyImageCarousel component
- [x] 05.3-02: PropertyMap component + property detail page integration

**Details:**
Adds latitude/longitude to property schema. Creates PropertyImageCarousel using embla-carousel. Creates PropertyMap using react-leaflet with OpenStreetMap tiles.

### Phase 5.4: Yad2-Style Property Page (INSERTED)

**Goal**: Redesign property detail page with Yad2-inspired layout and features
**Depends on**: Phase 5.3
**Plans**: 3 plans

Plans:
- [x] 05.4-01: Schema extension (amenities, neighborhoods, price history)
- [x] 05.4-02: Property amenities display + mortgage calculator
- [x] 05.4-03: Neighborhood info + value history + sold properties + page redesign

**Details:**
Yad2-inspired features: Property amenities grid, neighborhood info, mortgage calculator, value history charts, sold properties table.

### Phase 6: Deal Flow

**Goal**: Deal stages tracking, service provider requests, file storage per deal, client handoffs
**Depends on**: Phase 3
**Plans**: 5 plans

Plans:
- [x] 06-01: Deals schema + basic CRUD
- [x] 06-02: Service provider request flow
- [x] 06-03: File storage per deal (Convex storage)
- [x] 06-04: Deal transitions + handoffs
- [x] 06-05: Deals UI (list + detail pages)

**Details:**
7-stage deal progression (interest → broker_assigned → mortgage → legal → closing → completed, + cancelled). Service requests between investors and providers. Convex file storage for deal documents. Activity logging for audit trail.

### Phase 6.1: Multi-layout Chat Page (INSERTED)

**Goal**: Chat page with multiple layout options for communicating with service providers
**Depends on**: Phase 6
**Plans**: 3 plans

Plans:
- [x] 06.1-01: Messages schema + chat backend (queries, mutations)
- [x] 06.1-02: Chat UI components + single layout
- [x] 06.1-03: Multi-layout system with drag-and-drop

**Details:**
Multi-layout chat interface: Single (1 pane), Split (2 cols), Quad (2x2 grid). Uses @dnd-kit/core for drag-and-drop functionality.

### Phase 7: Dashboards

**Goal**: Investor dashboard and service provider dashboard
**Depends on**: Phase 4, Phase 6.1
**Plans**: 3 plans

Plans:
- [x] 07-01: Dashboard backend queries (stats per role, property recommendations)
- [x] 07-02: Investor dashboard UI (personalized stats, recommendations section)
- [x] 07-03: Provider dashboard UI (client metrics, pending requests, activity feed)

**Details:**
Role-specific dashboards: Investor (deals, saved properties, recommendations), Provider (requests, clients, activity feed).

### Phase 8: Real-time Features

**Goal**: Notification system for real-time event alerts
**Depends on**: Phase 6, Phase 7
**Plans**: 2 plans

Plans:
- [x] 08-01: Notifications schema + backend (table, queries, mutations, event triggers)
- [x] 08-02: Notification UI (NotificationCenter component, header integration)

**Details:**
Bell icon in header with unread count badge. Notification dropdown with recent alerts. Notifications triggered by: new messages, deal stage changes, file uploads, service request responses.

---

## Milestone Summary

**Decimal Phases:**
- Phase 1.1: Integrate Shadcn (inserted after Phase 1 for design system)
- Phase 1.2: Add All Shadcn Components (inserted after Phase 1.1)
- Phase 1.3: Create Design System Page (inserted after Phase 1.2)
- Phase 4.1: Edit Property (inserted after Phase 4)
- Phase 5.1: Add Also Regular Filter (inserted after Phase 5)
- Phase 5.2: Mock Data & Super User (inserted after Phase 5.1)
- Phase 5.3: Property Page Carousel and Map (inserted after Phase 5.2)
- Phase 5.4: Yad2-Style Property Page (inserted after Phase 5.3)
- Phase 6.1: Multi-layout Chat (inserted after Phase 6)

**Key Decisions:**
- Convex for backend (real-time features, reactive by default)
- Clerk for auth (multi-tenant, role management)
- Shadcn/ui with Hugeicons for design system
- Claude AI for natural language search parsing
- OpenStreetMap + Leaflet for maps (no API key required)
- dnd-kit for drag-and-drop (cleaner API than react-dnd)

**Issues Resolved:**
- Radix scroll-lock CSS override for mobile modals
- Leaflet SSR compatibility with dynamic imports
- Shadcn Select empty state with sentinel value pattern

**Issues Deferred:**
None

**Technical Debt Incurred:**
- USD/ILS exchange rate hardcoded (3.7) - needs live API
- No rate limiting on API endpoints
- No comprehensive test coverage

---

*For current project status, see .planning/ROADMAP.md*
