# Roadmap: REOS v1.4 Internationalization & RTL Support

## Overview

Adding full internationalization infrastructure with Hebrew as the first additional language. This includes URL-based locale routing, complete RTL layout support, locale-aware formatting, and a scalable i18n architecture for future languages. The implementation follows a strict dependency order: infrastructure first (routing, middleware, providers), then RTL layout (CSS migration, component patches), then content (translations, formatting), and finally user-facing controls (language switcher).

## Milestone Goal

Users can seamlessly use REOS in English or Hebrew, with proper RTL layout, localized dates/numbers/currency, and easy language switching.

## Phases

### Phase 28: i18n Infrastructure

**Goal:** App supports dual-locale routing with proper provider stack and middleware composition.

**Dependencies:** None (foundational)

**Requirements:**
- INFRA-01: App supports URL-based locale routing with `/he/` and `/en/` path prefixes
- INFRA-02: Middleware correctly chains Clerk auth with next-intl locale handling
- INFRA-03: App wrapped with DirectionProvider for Radix/Shadcn RTL support
- INFRA-04: Existing route groups `(app)`, `(auth)`, `(main)` preserved under `[locale]` segment
- RTL-01: HTML `dir` attribute set to `rtl` when locale is Hebrew

**Plans:** 2 plans

Plans:
- [x] 28-01-PLAN.md — i18n core setup (packages, config, middleware)
- [x] 28-02-PLAN.md — App structure migration ([locale] segment, providers)

**Success Criteria:**
1. User can navigate to `/en/dashboard` and `/he/dashboard` and see the same content
2. User visiting `/he/` sees `<html dir="rtl" lang="he">` in page source
3. User visiting `/en/` sees `<html dir="ltr" lang="en">` in page source
4. Protected routes still require authentication (Clerk middleware preserved)
5. Existing routes like `/dashboard`, `/properties` redirect to locale-prefixed versions

---

### Phase 29: CSS Logical Properties Migration

**Goal:** All directional CSS classes use logical properties that auto-flip for RTL.

**Dependencies:** Phase 28 (need RTL mode to test)

**Requirements:**
- RTL-02: All directional CSS classes converted to logical properties (`ml-` to `ms-`, etc.)

**Plans:** 11 plans (10 original + 1 gap closure)

Plans:
- [x] 29-01-PLAN.md — Migrate high-priority Shadcn UI (sidebar, sheet, menus)
- [x] 29-02-PLAN.md — Migrate medium-priority Shadcn UI (dialog, table, calendar)
- [x] 29-03-PLAN.md — Migrate remaining Shadcn UI components
- [x] 29-04-PLAN.md — Migrate layout and search components
- [x] 29-05-PLAN.md — Migrate dashboard and property components
- [x] 29-06-PLAN.md — Migrate chat components
- [x] 29-07-PLAN.md — Migrate questionnaire components
- [x] 29-08-PLAN.md — Migrate feed, profile, deals, settings components
- [x] 29-09-PLAN.md — Migrate high-traffic application pages
- [x] 29-10-PLAN.md — Migrate remaining pages and final verification
- [x] 29-11-PLAN.md — [GAP CLOSURE] Fix rounded corner classes (4 files)

**Success Criteria:**
1. User in Hebrew mode sees margins/padding flip correctly (left becomes right, right becomes left)
2. Codebase has zero occurrences of physical directional classes (`ml-*`, `mr-*`, `left-*`, `right-*`, `pl-*`, `pr-*`)
3. ESLint rule warns on new physical directional class usage (deferred - regression prevention via code review)
4. All page layouts render correctly in both LTR and RTL modes

---

### Phase 30: RTL Component Patches

**Goal:** All Shadcn/Radix components work correctly in RTL mode.

**Dependencies:** Phase 29 (CSS migration complete)

**Requirements:**
- RTL-03: Shadcn Sidebar component works correctly in RTL mode
- RTL-04: Shadcn Sheet, DropdownMenu, and other positioned components work in RTL
- RTL-05: Directional icons (arrows, chevrons) flip appropriately in RTL mode

**Success Criteria:**
1. User in Hebrew mode sees sidebar on the right side of the screen
2. User in Hebrew mode sees dropdown menus open in the correct direction
3. User in Hebrew mode sees Sheet/drawer slide from the correct edge
4. Chevron icons in navigation point in the correct direction for each locale
5. Arrow icons in "back" buttons point left in LTR, right in RTL

---

### Phase 31: Translation Infrastructure

**Goal:** All UI strings externalized to translation files with organized namespace structure.

**Dependencies:** Phase 28 (need next-intl context)

**Requirements:**
- TRANS-01: All UI strings extracted to JSON translation files
- TRANS-03: Translation files organized by namespace/feature

**Success Criteria:**
1. Zero hardcoded user-facing strings remain in component code
2. Translation files exist for each namespace (common, navigation, dashboard, properties, deals, chat, feed, settings)
3. Components use `useTranslations` hook with namespace parameter
4. Server components use `getTranslations` for static content
5. English translations display correctly (no broken keys shown)

---

### Phase 32: Locale Formatting

**Goal:** Dates, numbers, and currency display in locale-appropriate formats.

**Dependencies:** Phase 31 (translation infrastructure provides formatters)

**Requirements:**
- FMT-01: Dates displayed in locale-appropriate format
- FMT-02: Numbers displayed with locale-appropriate separators
- FMT-03: Currency displayed with locale-appropriate symbol and format

**Success Criteria:**
1. User in English sees dates as "January 19, 2026" or "1/19/2026"
2. User in Hebrew sees dates as Hebrew format
3. User in English sees numbers as "1,500,000"
4. User in Hebrew sees numbers with appropriate separators
5. Currency displays correctly in both locales ($ for USD, appropriate format for each)

---

### Phase 33: Hebrew Translation

**Goal:** Complete Hebrew translation of all UI strings.

**Dependencies:** Phase 31 (translation keys must exist first)

**Requirements:**
- TRANS-02: Hebrew translations provided for all extracted UI strings

**Success Criteria:**
1. User switching to Hebrew sees all UI text in Hebrew
2. No English text visible in Hebrew mode (except proper nouns, user content)
3. Navigation items, buttons, labels, placeholders all translated
4. Form validation messages display in Hebrew
5. Empty states and error messages display in Hebrew

---

### Phase 34: Language Switcher & Polish

**Goal:** Users can easily switch languages with their preference persisted.

**Dependencies:** Phase 33 (need both languages complete to test switching)

**Requirements:**
- UX-01: Language switcher component available in UI
- UX-02: User locale preference persisted across sessions
- UX-03: Locale auto-detected on first visit based on browser settings

**Success Criteria:**
1. User can see a language switcher in the header/navigation area
2. User clicking language switcher can choose between English and Hebrew
3. User switching languages sees page immediately update (no full reload required)
4. User returning to site sees their previously selected language
5. New user with Hebrew browser settings sees Hebrew by default

---

## Progress

| Phase | Name | Requirements | Plans | Status |
|-------|------|--------------|-------|--------|
| 28 | i18n Infrastructure | INFRA-01, INFRA-02, INFRA-03, INFRA-04, RTL-01 | 2 | Complete |
| 29 | CSS Logical Properties Migration | RTL-02 | 11 | Complete |
| 30 | RTL Component Patches | RTL-03, RTL-04, RTL-05 | TBD | Pending |
| 31 | Translation Infrastructure | TRANS-01, TRANS-03 | TBD | Pending |
| 32 | Locale Formatting | FMT-01, FMT-02, FMT-03 | TBD | Pending |
| 33 | Hebrew Translation | TRANS-02 | TBD | Pending |
| 34 | Language Switcher & Polish | UX-01, UX-02, UX-03 | TBD | Pending |

## Coverage

| Requirement | Phase | Description |
|-------------|-------|-------------|
| INFRA-01 | 28 | URL-based locale routing |
| INFRA-02 | 28 | Middleware composition |
| INFRA-03 | 28 | DirectionProvider wrapping |
| INFRA-04 | 28 | Route groups preserved |
| RTL-01 | 28 | HTML dir attribute |
| RTL-02 | 29 | CSS logical properties |
| RTL-03 | 30 | Sidebar RTL |
| RTL-04 | 30 | Positioned components RTL |
| RTL-05 | 30 | Directional icons |
| TRANS-01 | 31 | String extraction |
| TRANS-03 | 31 | Namespace organization |
| FMT-01 | 32 | Date formatting |
| FMT-02 | 32 | Number formatting |
| FMT-03 | 32 | Currency formatting |
| TRANS-02 | 33 | Hebrew translations |
| UX-01 | 34 | Language switcher |
| UX-02 | 34 | Locale persistence |
| UX-03 | 34 | Locale auto-detection |

**Total:** 18/18 requirements mapped

---

*Created: 2026-01-19*
*Milestone: v1.4 Internationalization & RTL Support*
